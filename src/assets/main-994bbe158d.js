!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){/*!
     * main.js
     * @date 2017.11.1
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
"use strict";n(1);var i=n(29),o=n(30),r=(n(31),n(32)),s=n(33),a=n(36),c=n(38),u=n(39),l=n(41),h=n(42),d=n(44),p=n(47),f=n(49),m=n(50),v=n(51),g=n(52),y=n(53),b=n(54),w=n(63),_=n(67),k=n(68),x=n(72),T=n(74),S=window.MZ.modelData,E=new y.ProModel({recommend:g.getRecommend(g.queryString("skuid"),S),packageMap:S.packageMap,skus:S.sku,packageItems:S.packageItems,isSupportCart:S.isSupportCart,isPackage:!o.isEmpty(S.packageMap),discountKeys:S.discount?Object.keys(S.discount.cspuMap):null,shipping:S.shipping});window.livePropertyView=new b({el:document.body,model:E,collection:new y.SkuCollection(g.parseSku(S.sku))}),new x(window.livePropertyView),new w(window.livePropertyView),new _(window.livePropertyView),new k(window.livePropertyView,S.supportFastArrival),new s,new m(window.livePropertyView,S.itemId),new f(window.livePropertyView,S.itemId),d(),p(MZ.modelData.itemId),h(),r(),u(),l.attach(document.body),T(MZ.modelData.showItemRecommend,MZ.modelData.itemId),/android/.test(navigator.userAgent.toLowerCase())&&a.init({insetBefore:"#headerBack",show:function(){i("body").css("padding-top",i("#headerOpacity").height())},remove:function(){i("body").css("padding-top",0)}}),i(function(){v();var t="yes"===g.queryString("dnoa");t||c("detail",{adfrom:"mall",from:"detail",itemId:S.itemId,itemNumber:S.itemNumber,skuId:window.livePropertyView.model.get("skuId")||0})})},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=Zepto},function(t,e,n){var i,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function n(t){function e(e,n,i,o,r,s){for(;r>=0&&r<s;r+=t){var a=o?o[r]:r;i=n(i,e[a],a,e)}return i}return function(n,i,o,r){i=T(i,r,4);var s=!A(n)&&x.keys(n),a=(s||n).length,c=t>0?0:a-1;return arguments.length<3&&(o=n[s?s[c]:c],c+=t),e(n,i,o,s,c,a)}}function s(t){return function(e,n,i){n=S(n,i);for(var o=M(e),r=t>0?0:o-1;r>=0&&r<o;r+=t)if(n(e[r],r,e))return r;return-1}}function a(t,e,n){return function(i,o,r){var s=0,a=M(i);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=e(m.call(i,s,a),x.isNaN),r>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(i[r]===o)return r;return-1}}function c(t,e){var n=L.length,i=t.constructor,o=x.isFunction(i)&&i.prototype||d,r="constructor";for(x.has(t,r)&&!x.contains(e,r)&&e.push(r);n--;)r=L[n],r in t&&t[r]!==o[r]&&!x.contains(e,r)&&e.push(r)}var u=this,l=u._,h=Array.prototype,d=Object.prototype,p=Function.prototype,f=h.push,m=h.slice,v=d.toString,g=d.hasOwnProperty,y=Array.isArray,b=Object.keys,w=p.bind,_=Object.create,k=function(){},x=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};"undefined"!=typeof t&&t.exports&&(e=t.exports=x),e._=x,x.VERSION="1.8.3";var T=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}},S=function(t,e,n){return null==t?x.identity:x.isFunction(t)?T(t,e,n):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return S(t,e,1/0)};var E=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=t(r),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=r[u])}return n}},P=function(t){if(!x.isObject(t))return{};if(_)return _(t);k.prototype=t;var e=new k;return k.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},I=Math.pow(2,53)-1,M=C("length"),A=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=I};x.each=x.forEach=function(t,e,n){e=T(e,n);var i,o;if(A(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var r=x.keys(t);for(i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t)}return t},x.map=x.collect=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=Array(o),s=0;s<o;s++){var a=i?i[s]:s;r[s]=e(t[a],a,t)}return r},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(t,e,n){var i;if(i=A(t)?x.findIndex(t,e,n):x.findKey(t,e,n),void 0!==i&&i!==-1)return t[i]},x.filter=x.select=function(t,e,n){var i=[];return e=S(e,n),x.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},x.reject=function(t,e,n){return x.filter(t,x.negate(S(e)),n)},x.every=x.all=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(!e(t[s],s,t))return!1}return!0},x.some=x.any=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(e(t[s],s,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,n,i){return A(t)||(t=x.values(t)),("number"!=typeof n||i)&&(n=0),x.indexOf(t,e,n)>=0},x.invoke=function(t,e){var n=m.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){var o=i?e:t[e];return null==o?o:o.apply(t,n)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,n){var i,o,r=-(1/0),s=-(1/0);if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,c=t.length;a<c;a++)i=t[a],i>r&&(r=i)}else e=S(e,n),x.each(t,function(t,n,i){o=e(t,n,i),(o>s||o===-(1/0)&&r===-(1/0))&&(r=t,s=o)});return r},x.min=function(t,e,n){var i,o,r=1/0,s=1/0;if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,c=t.length;a<c;a++)i=t[a],i<r&&(r=i)}else e=S(e,n),x.each(t,function(t,n,i){o=e(t,n,i),(o<s||o===1/0&&r===1/0)&&(r=t,s=o)});return r},x.shuffle=function(t){for(var e,n=A(t)?t:x.values(t),i=n.length,o=Array(i),r=0;r<i;r++)e=x.random(0,r),e!==r&&(o[r]=o[e]),o[e]=n[r];return o},x.sample=function(t,e,n){return null==e||n?(A(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,n){return e=S(e,n),x.pluck(x.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,i){var o={};return n=S(n,i),x.each(e,function(i,r){var s=n(i,r,e);t(o,i,s)}),o}};x.groupBy=D(function(t,e,n){x.has(t,n)?t[n].push(e):t[n]=[e]}),x.indexBy=D(function(t,e,n){t[n]=e}),x.countBy=D(function(t,e,n){x.has(t,n)?t[n]++:t[n]=1}),x.toArray=function(t){return t?x.isArray(t)?m.call(t):A(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:A(t)?t.length:x.keys(t).length},x.partition=function(t,e,n){e=S(e,n);var i=[],o=[];return x.each(t,function(t,n,r){(e(t,n,r)?i:o).push(t)}),[i,o]},x.first=x.head=x.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,n){return m.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},x.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,n){return m.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var N=function t(e,n,i,o){for(var r=[],s=0,a=o||0,c=M(e);a<c;a++){var u=e[a];if(A(u)&&(x.isArray(u)||x.isArguments(u))){n||(u=t(u,n,i));var l=0,h=u.length;for(r.length+=h;l<h;)r[s++]=u[l++]}else i||(r[s++]=u)}return r};x.flatten=function(t,e){return N(t,e,!1)},x.without=function(t){return x.difference(t,m.call(arguments,1))},x.uniq=x.unique=function(t,e,n,i){x.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=S(n,i));for(var o=[],r=[],s=0,a=M(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e?(s&&r===u||o.push(c),r=u):n?x.contains(r,u)||(r.push(u),o.push(c)):x.contains(o,c)||o.push(c)}return o},x.union=function(){return x.uniq(N(arguments,!0,!0))},x.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=M(t);i<o;i++){var r=t[i];if(!x.contains(e,r)){for(var s=1;s<n&&x.contains(arguments[s],r);s++);s===n&&e.push(r)}}return e},x.difference=function(t){var e=N(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,M).length||0,n=Array(e),i=0;i<e;i++)n[i]=x.pluck(t,i);return n},x.object=function(t,e){for(var n={},i=0,o=M(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},x.findIndex=s(1),x.findLastIndex=s(-1),x.sortedIndex=function(t,e,n,i){n=S(n,i,1);for(var o=n(e),r=0,s=M(t);r<s;){var a=Math.floor((r+s)/2);n(t[a])<o?r=a+1:s=a}return r},x.indexOf=a(1,x.findIndex,x.sortedIndex),x.lastIndexOf=a(-1,x.findLastIndex),x.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;r<i;r++,t+=n)o[r]=t;return o};var O=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var r=P(t.prototype),s=t.apply(r,o);return x.isObject(s)?s:r};x.bind=function(t,e){if(w&&t.bind===w)return w.apply(t,m.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var n=m.call(arguments,2),i=function i(){return O(t,i,e,this,n.concat(m.call(arguments)))};return i},x.partial=function(t){var e=m.call(arguments,1),n=function n(){for(var i=0,o=e.length,r=Array(o),s=0;s<o;s++)r[s]=e[s]===x?arguments[i++]:e[s];for(;i<arguments.length;)r.push(arguments[i++]);return O(t,n,this,this,r)};return n},x.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=x.bind(t[n],t);return t},x.memoize=function(t,e){var n=function n(i){var o=n.cache,r=""+(e?e.apply(this,arguments):i);return x.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},x.delay=function(t,e){var n=m.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:x.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var u=x.now();a||n.leading!==!1||(a=u);var l=e-(u-a);return i=this,o=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),a=u,r=t.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(c,l)),r}},x.debounce=function(t,e,n){var i,o,r,s,a,c=function c(){var u=x.now()-s;u<e&&u>=0?i=setTimeout(c,e-u):(i=null,n||(a=t.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=x.now();var u=n&&!i;return i||(i=setTimeout(c,e)),u&&(a=t.apply(r,o),r=o=null),a}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},x.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},x.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},x.once=x.partial(x.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)x.has(t,n)&&e.push(n);return j&&c(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var n in t)e.push(n);return j&&c(t,e),e},x.values=function(t){for(var e=x.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},x.mapObject=function(t,e,n){e=S(e,n);for(var i,o=x.keys(t),r=o.length,s={},a=0;a<r;a++)i=o[a],s[i]=e(t[i],i,t);return s},x.pairs=function(t){for(var e=x.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},x.invert=function(t){for(var e={},n=x.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=E(x.allKeys),x.extendOwn=x.assign=E(x.keys),x.findKey=function(t,e,n){e=S(e,n);for(var i,o=x.keys(t),r=0,s=o.length;r<s;r++)if(i=o[r],e(t[i],i,t))return i},x.pick=function(t,e,n){var i,o,r={},s=t;if(null==s)return r;x.isFunction(e)?(o=x.allKeys(s),i=T(e,n)):(o=N(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,c=o.length;a<c;a++){var u=o[a],l=s[u];i(l,u,s)&&(r[u]=l)}return r},x.omit=function(t,e,n){if(x.isFunction(e))e=x.negate(e);else{var i=x.map(N(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(i,e)}}return x.pick(t,e,n)},x.defaults=E(x.allKeys,!0),x.create=function(t,e){var n=P(t);return e&&x.extendOwn(n,e),n},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var n=x.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),r=0;r<i;r++){var s=n[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var z=function t(e,n,i,o){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof x&&(e=e._wrapped),n instanceof x&&(n=n._wrapped);var s=v.call(e);if(s!==v.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var a="[object Array]"===s;if(!a){if("object"!=("undefined"==typeof e?"undefined":r(e))||"object"!=("undefined"==typeof n?"undefined":r(n)))return!1;var c=e.constructor,u=n.constructor;if(c!==u&&!(x.isFunction(c)&&c instanceof c&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}i=i||[],o=o||[];for(var l=i.length;l--;)if(i[l]===e)return o[l]===n;if(i.push(e),o.push(n),a){if(l=e.length,l!==n.length)return!1;for(;l--;)if(!t(e[l],n[l],i,o))return!1}else{var h,d=x.keys(e);if(l=d.length,x.keys(n).length!==l)return!1;for(;l--;)if(h=d[l],!x.has(n,h)||!t(e[h],n[h],i,o))return!1}return i.pop(),o.pop(),!0};x.isEqual=function(t,e){return z(t,e)},x.isEmpty=function(t){return null==t||(A(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length)},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=y||function(t){return"[object Array]"===v.call(t)},x.isObject=function(t){var e="undefined"==typeof t?"undefined":r(t);return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return v.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":r(Int8Array))&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===v.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&g.call(t,e)},x.noConflict=function(){return u._=l,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=C,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,n){var i=Array(Math.max(0,t));e=T(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=x.invert(B),R=function(t){var e=function(e){return t[e]},n="(?:"+x.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};x.escape=R(B),x.unescape=R(q),x.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),x.isFunction(i)?i.call(t):i};var H=0;x.uniqueId=function(t){var e=++H+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+X[t]};x.template=function(t,e,n){!e&&n&&(e=n),e=x.defaults({},e,x.templateSettings);var i=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(i,function(e,n,i,s,a){return r+=t.slice(o,a).replace(Y,$),o=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var a=function(t){return s.call(this,t,x)},c=e.variable||"obj";return a.source="function("+c+"){\n"+r+"}",a},x.chain=function(t){var e=x(t);return e._chain=!0,e};var J=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),J(this,n.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],J(this,n)}}),x.each(["concat","join","slice"],function(t){var e=h[t];x.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},i=[],o=function(){return x}.apply(e,i),!(void 0!==o&&(t.exports=o))}).call(this)},function(t,e,n){var i,o;(function(r){var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){var c="object"==("undefined"==typeof self?"undefined":s(self))&&self.self===self&&self||"object"==("undefined"==typeof r?"undefined":s(r))&&r.global===r&&r;i=[n(30),n(29),e],o=function(t,e,n){c.Backbone=a(c,n,t,e)}.apply(e,i),!(void 0!==o&&(t.exports=o))}(function(t,e,n,i){var o=t.Backbone,r=Array.prototype.slice;e.VERSION="1.2.3",e.$=i,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,o){return n[e](this[i],u(t,this),o)};case 4:return function(t,o,r){return n[e](this[i],u(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},c=function(t,e,i){n.each(e,function(e,o){n[o]&&(t.prototype[o]=a(e,o,i))})},u=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},d=/\s+/,p=function t(e,i,o,r,a){var c,u=0;if(o&&"object"===("undefined"==typeof o?"undefined":s(o))){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(c=n.keys(o);u<c.length;u++)i=t(e,i,c[u],o[c[u]],a)}else if(o&&d.test(o))for(c=o.split(d);u<c.length;u++)i=e(i,c[u],r,a);else i=e(i,o,r,a);return i};h.on=function(t,e,n){return f(this,t,e,n)};var f=function(t,e,n,i,o){if(t._events=p(m,t._events||{},e,n,{context:i,ctx:t,listening:o}),o){var r=t._listeners||(t._listeners={});r[o.id]=o}return t};h.listenTo=function(t,e,i){if(!t)return this;var o=t._listenId||(t._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[o];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=r[o]={obj:t,objId:o,id:a,listeningTo:r,count:0}}return f(t,e,i,this,s),this};var m=function(t,e,n,i){if(n){var o=t[e]||(t[e]=[]),r=i.context,s=i.ctx,a=i.listening;a&&a.count++,o.push({callback:n,context:r,ctx:r||s,listening:a})}return t};h.off=function(t,e,n){return this._events?(this._events=p(v,this._events,t,e,{context:n,listeners:this._listeners}),this):this},h.stopListening=function(t,e,i){var o=this._listeningTo;if(!o)return this;for(var r=t?[t._listenId]:n.keys(o),s=0;s<r.length;s++){var a=o[r[s]];if(!a)break;a.obj.off(e,i,this)}return this};var v=function(t,e,i,o){if(t){var r,s=0,a=o.context,c=o.listeners;if(e||i||a){for(var u=e?[e]:n.keys(t);s<u.length;s++){e=u[s];var l=t[e];if(!l)break;for(var h=[],d=0;d<l.length;d++){var p=l[d];i&&i!==p.callback&&i!==p.callback._callback||a&&a!==p.context?h.push(p):(r=p.listening,r&&0===--r.count&&(delete c[r.id],delete r.listeningTo[r.objId]))}h.length?t[e]=h:delete t[e]}return t}for(var f=n.keys(c);s<f.length;s++)r=c[f[s]],delete c[r.id],delete r.listeningTo[r.objId]}};h.once=function(t,e,i){var o=p(g,{},t,e,n.bind(this.off,this));return this.on(o,e,i)},h.listenToOnce=function(t,e,i){var o=p(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,o)};var g=function(t,e,i,o){if(i){var r=t[e]=n.once(function(){o(e,r),i.apply(this,arguments)});r._callback=i}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return p(y,this._events,t,void 0,n),this};var y=function(t,e,n,i){if(t){var o=t[e],r=t.all;o&&r&&(r=r.slice()),o&&b(o,i),r&&b(r,[e].concat(i))}return t},b=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};h.bind=h.on,h.unbind=h.off,n.extend(e,h);var w=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var o=n.result(this,"defaults");i=n.defaults(n.extend({},o,i),o),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(w.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var o;if("object"===("undefined"==typeof t?"undefined":s(t))?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;var r=i.unset,a=i.silent,c=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,h=this.changed,d=this._previousAttributes;for(var p in o)e=o[p],n.isEqual(l[p],e)||c.push(p),n.isEqual(d[p],e)?delete h[p]:h[p]=e,r?delete l[p]:l[p]=e;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!a){c.length&&(this._pending=i);for(var f=0;f<c.length;f++)this.trigger("change:"+c[f],this,l[c[f]],i)}if(u)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var r=t[o];n.isEqual(e[o],r)||(i[o]=r)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var o=t.parse?e.parse(n,t):n;return!!e.set(o,t)&&(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t))},F(this,t),this.sync("read",this,t)},save:function(t,e,i){var o;null==t||"object"===("undefined"==typeof t?"undefined":s(t))?(o=t,i=e):(o={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var r=i.wait;if(o&&!r){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var a=this,c=i.success,u=this.attributes;i.success=function(t){a.attributes=u;var e=i.parse?a.parse(t,i):t;return r&&(e=n.extend({},o,e)),!(e&&!a.set(e,i))&&(c&&c.call(i.context,a,t,i),void a.trigger("sync",a,t,i))},F(this,i),o&&r&&(this.attributes=n.extend({},u,o));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=o);var h=this.sync(l,this,i);return this.attributes=u,h},destroy:function t(e){e=e?n.clone(e):{};var i=this,o=e.success,r=e.wait,t=function(){i.stopListening(),i.trigger("destroy",i,i.collection,e)};e.success=function(n){r&&t(),o&&o.call(e.context,i,n,e),i.isNew()||i.trigger("sync",i,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(F(this,e),s=this.sync("delete",this,e)),r||t(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};c(w,_,"attributes");var k=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},T={add:!0,remove:!1},S=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,o=Array(t.length-n),r=e.length;for(i=0;i<o.length;i++)o[i]=t[i+n];for(i=0;i<r;i++)t[i+n]=e[i];for(i=0;i<o.length;i++)t[i+r+n]=o[i]};n.extend(k.prototype,h,{model:w,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,T))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var o=this._removeModels(t,e);return!e.silent&&o.length&&(e.changes={added:[],merged:[],removed:o},this.trigger("update",this,e)),i?o[0]:o},set:function t(e,i){if(null!=e){i=n.extend({},x,i),i.parse&&!this._isModel(e)&&(e=this.parse(e,i)||[]);var o=!n.isArray(e);e=o?[e]:e.slice();var r=i.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var s,a,t=[],c=[],u=[],l=[],h={},d=i.add,p=i.merge,f=i.remove,m=!1,v=this.comparator&&null==r&&i.sort!==!1,g=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){s=e[a];var y=this.get(s);if(y){if(p&&s!==y){var b=this._isModel(s)?s.attributes:s;i.parse&&(b=y.parse(b,i)),y.set(b,i),u.push(y),v&&!m&&(m=y.hasChanged(g))}h[y.cid]||(h[y.cid]=!0,t.push(y)),e[a]=y}else d&&(s=e[a]=this._prepareModel(s,i),s&&(c.push(s),this._addReference(s,i),h[s.cid]=!0,t.push(s)))}if(f){for(a=0;a<this.length;a++)s=this.models[a],h[s.cid]||l.push(s);l.length&&this._removeModels(l,i)}var w=!1,_=!v&&d&&f;if(t.length&&_?(w=this.length!==t.length||n.some(this.models,function(e,n){return e!==t[n]}),this.models.length=0,S(this.models,t,0),this.length=this.models.length):c.length&&(v&&(m=!0),S(this.models,c,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!i.silent){for(a=0;a<c.length;a++)null!=r&&(i.index=r+a),s=c[a],s.trigger("add",s,this,i);(m||w)&&this.trigger("sort",this,i),(c.length||l.length||u.length)&&(i.changes={added:c,removed:l,merged:u},this.trigger("update",this,i))}return o?e[0]:e}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var o=this,r=e.success;return e.success=function(t,e,n){i&&o.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var o=this.get(t[i]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,delete this._byId[o.cid];var s=this.modelId(o.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=r,o.trigger("remove",o,this,e)),n.push(o),this._removeReference(o,e)}}return n},_isModel:function(t){return t instanceof w},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var o=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=e))}}this.trigger.apply(this,arguments)}});var E={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,
partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};c(k,E,"models");var P=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];n.extend(P.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var o=e.match(C);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,o){var r=M[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||H()),null!=o.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var c=o.error;o.error=function(t,e,n){o.textStatus=e,o.errorThrown=n,c&&c.call(o.context,t,e,n)};var u=o.xhr=e.ajax(n.extend(s,o));return i.trigger("request",i,u,o),u};var M={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,O=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(A.prototype,h,{initialize:function(){},route:function(t,i,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return e.history.route(t,function(n){var s=r._extractParameters(t,n);r.execute(o,s,i)!==!1&&(r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),e.history.trigger("route",r,i,s))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(D,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,q=/#.*$/;L.started=!1,n.extend(L.prototype,h,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(z,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(B,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(q,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new L;var R=function(t,e){var i,o=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,e),i.prototype=n.create(o.prototype,t),i.prototype.constructor=i,i.__super__=o.prototype,i};w.extend=k.extend=A.extend=P.extend=L.extend=R;var H=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e})}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(){var t=o("#go-top"),e=document.body.scrollTop||document.documentElement.scrollTop,n=document.documentElement.clientHeight;e>n?t.show():t.hide()}var o=n(29);t.exports=function(){i(),o(window).on("scroll",i),o("#go-top").on("touchend",function(t){t.preventDefault(),window.scroll(0,1)}),o("#page-nav-back").on("click",function(t){t.preventDefault(),history.length?window.history.back():window.location.href="//mall.meizu.com/"})}},function(t,e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r){"use strict";function s(t,e){arguments.length<1?t=r:u.isPlainObject(t)&&(e=t,t=r);var n="string"==typeof t?c.querySelector(t):t;if(n){this.container=n;var i={bufferHeight:400,bufferWidth:0,lazyOnce:!0,clazz:"be-lazy",visualWindow:r};e=e||{},this.options=u.extend(i,e),this.init()}}var a=r.navigator.userAgent,c=r.document,u={getElemRect:function(t,e){if(t){e||(e={x:0,y:0});var n,i,o,s;if(t!=r){var a=t.getBoundingClientRect();s=a.left,n=a.top,i=a.right,o=a.bottom}else s=0,n=0,i=s+t.innerWidth,o=n+t.innerHeight,u.isIE()&&u.lteIE(8)&&(i=s+c.documentElement.clientWidth,o=n+c.documentElement.clientHeight);return{left:s,top:n,right:i+e.x,bottom:o+e.y}}},addEvent:function(t,e,n){window.addEventListener?t.addEventListener(e,n,!1):"object"==("undefined"==typeof n?"undefined":o(n))&&n.handleEvent?t.attachEvent("on"+e,function(){n.handleEvent.call(n)}):t.attachEvent("on"+e,n)},removeEvent:function(t,e,n){window.addEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},removeClass:function(t,e){var n,i=t.className;n=i.indexOf(" "+e)>=0?new RegExp(" "+e):i.indexOf(e+" ")>=0?new RegExp(e+" "):new RegExp(e),t.className=i.replace(n,"")},isOverlap:function(t,e){var n=e.right>t.left&&e.left<t.right,i=e.bottom>t.top&&e.top<t.bottom;return n&&i},filter:function(t){if(Array.prototype.filter)return t.filter(function(t){return!!t});for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t},isPlainObject:function(t){return"object"===("undefined"==typeof t?"undefined":o(t))&&Object.getPrototypeOf(t)===Object.prototype},isMobile:function(){navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),navigator.appVersion.match(/(Android)\s([\d\.]+)/);return!!/iPhone|iPad|Android/.test(navigator.appVersion)},isIE:function t(e){var n=/Trident/;if(void 0!==e){var t=this.isIE,i=document.documentMode;return t&&(void 0===i||i===e)}return n.test(a)},lteIE:function(t){var e=this.isIE,n=document.documentMode;return e&&(void 0===n||n<=t)}};u.extend(s.prototype,{init:function(){this.getLazyItems(),this.bindEvent(),this.careItems()},handleEvent:function(t){t=t||window.event;var e=t.type;"scroll"!==e&&"touchend"!==e||this.careItems()},getOption:function(t){return t?this.options[t]:null},getLazyItems:function(){var t=this.container;t=t===r?c:t;for(var e=t.querySelectorAll("."+this.getOption("clazz")),n=[],i=0,o=e.length;i<o;i++)n.push(e[i]);this.lazyItems=n},bindEvent:function(){var t=this.getOption("visualWindow");u.addEvent(t,"scroll",this),u.isMobile&&(u.addEvent(t,"touchstart",this),u.addEvent(t,"touchend",this))},destroy:function(){u.removeEvent(this.getOption("visualWindow"),"scroll",this)},careItems:function(){var t=this,e=(this.container,this.lazyItems),n={x:this.getOption("bufferWidth"),y:this.getOption("bufferHeight")},i=e.length,o=u.getElemRect,r=u.filter(this.lazyItems);if(r&&r.length)for(var s=0;s<i;s++){var a=e[s];a&&u.isOverlap(o(t.getOption("visualWindow"),n),o(a))&&t.fetchItem(a,s)}else t.getOption("lazyOnce")&&t.destroy()},fetchItem:function(t,e){var n=this,i=t.getAttribute("data-src");i&&""!==i&&(t.src=i,n.removeLazyItem(t,e),t.onload||(t.onload=function(){n.getOption("loadComplete")&&n.getOption("loadComplete").call(t)},t.onerror=function(){n.getOption("loadError")&&n.getOption("loadError").call(t)}))},removeLazyItem:function(t,e){u.removeClass(t,this.getOption("clazz")),t.removeAttribute("data-src"),t.onload=t.onerror=null,this.lazyItems[e]=null}}),r.Lazyload=s,"undefined"!=typeof t&&t.exports?t.exports=s:(n(34).cmd||n(35))&&(i=function(t,e,n){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}(window)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";var i=n(29),o=n(37),r={insetBefore:"#header",expire:86400},s={init:function(t){var e=i.extend({},r,t||{});this.options=e,this.$insetBefore=i(e.insetBefore),void 0===o.getCookie("appbnr_invisible")&&this.getData()},getData:function(){var t=this;i.ajax({url:"//mall.meizu.com/app/download/url",dataType:"jsonp"}).done(function(e){e.success&&t.renderBnr(e.data)})},renderBnr:function(t){var e=this.options,n=this.$insetBefore,r=i('<div id="topbnr-dl-app" class="topbnr-dl-app"/>');r.html('<a class="bnr-close"></a><a data-mtype="download" class="bnr-link" href="'+t.downloadUrl+'"><img src="'+t.imgUrl+'"/></a>'),n.length?n.before(r):i("body").prepend(r),"function"==typeof e.show&&e.show(),r.find(".bnr-close").on("click",function(t){"function"==typeof e.remove&&e.remove(),r.remove(),o.setCookie("appbnr_invisible",+new Date,e.expire)})}};window._AppDownload=s,t.exports={init:function(t){s.init(t)}}},function(t,e){"use strict";function n(t){if(t){var e=t.find("[name]"),n={};return e.each(function(t,e){""!==e.name&&(n[e.name]=e.value)}),n}}function i(t){for(var e,n=document.cookie?document.cookie.split(/;[ ]*/):[],i=0,o=n.length;i<o;i++){var r=n[i].split("=");if(t&&t==decodeURIComponent(r[0])){e=decodeURIComponent(r[1]);break}}return e}function o(t,e,n){if(t){var i=e;"object"===("undefined"==typeof e?"undefined":f(e))&&(i=JSON.stringify(e));var o=new Date,n=n||86400;o.setTime(o.getTime()+1e3*n),document.cookie=t+"="+encodeURI(i)+"; expires="+o.toGMTString()}}function r(t,e,n){if(t){var i=e;"object"===("undefined"==typeof e?"undefined":f(e))&&(i=JSON.stringify(e));var o=new Date,n=n||86400;o.setTime(o.getTime()+1e3*n),document.cookie=t+"="+encodeURI(i)+"; expires="+o.toGMTString()+"; path=/"}}function s(t){var e=new Date;e.setTime(e.getTime()-1e3);var n=i(t);null!==n&&(document.cookie=t+"="+encodeURI(n)+"; expires="+e.toGMTString())}function a(t){var e=new Date;e.setTime(e.getTime()-1e3);var n=i(t);null!==n&&(document.cookie=t+"="+encodeURI(n)+"; expires="+e.toGMTString()+"; path=/")}function c(t){var e=window.location.search;e=e.slice(1);var n,i=e.split("&");return $.each(i,function(e,i){var o=i.split("=");if(o[0]===t)return void(n=o[1])}),n}function u(t){var e,n={};return""===t?n:(e=t.split("&"),$.each(e,function(t,e){var i=e.split("=");n[i[0]]=decodeURIComponent(i[1])}),n)}function l(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")}function h(t){var e=navigator.userAgent,n=new RegExp(t);return!!n.test(e)}function d(t){var e;for(e in t)return!1;return!0}function p(t){$.ajax({url:"/independent",type:"get",dataType:"json",cache:!1,success:function(e,n,i){var o=i.getResponseHeader("X-CSRF-TOKEN");t&&t(o)}})}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(){var t=$(['<div id="loading" class="loading"><div class="inner">','<div class="panel">','<div class="tick-tock">','<span class="t1"></span><span class="t2"></span>','<span class="t3"></span><span class="t4"></span>','<span class="t5"></span><span class="t6"></span>','<span class="t7"></span><span class="t8"></span>','<span class="t9"></span><span class="t10"></span>','<span class="t11"></span><span class="t12"></span>',"</div>",'<div class="txt">璇风◢鍊�...</div>',"</div>","</div></div>"].join("")),e=function(){t.appendTo("body")},n=function(){t.remove()};return{start:e,stop:n}}();t.exports={load:m,uaTester:h,formDateToMap:n,getCookie:i,setCookie:o,setCookiePath:r,delCookie:s,delCookiePaht:a,getUrlQuery:c,queryToMap:u,mapToQuery:l,isEmptyObj:d,getcsrf:p}},function(t,e){function n(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")}function i(t,e){var i=navigator.userAgent,o=!!i.match(/Android/),r=!!i.match(/MzmApp/),s=!!i.match(/MicroMessenger/i),t=(i.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i),t||"main"),a="",c="",u="";void 0!==e&&(c=e.adfrom||"",u=e.from||"");var l={adfrom:c,from:u};switch(t){case"detail":e.skuId?(l.type=2,l.id=e.itemNumber,l.skuid=e.skuId):(l.type=1,l.id=e.itemId);break;case"activity":l.url=encodeURIComponent(e.url),e.refresh&&(l.refresh=e.refresh)}var a="mzstore://mall/"+t+"?"+n(l);if(o&&!s&&!r){var h=document.createElement("iframe");h.src=a,h.style.display="none",document.body.appendChild(h),setTimeout(function(){document.body.removeChild(h)},2e3)}}t.exports=i},function(t,e,n){function i(t){var e=navigator.userAgent,n=new RegExp(t,"i"),i=e.match(n);return!!i}function o(t,e){r.ajax({url:"//mall.meizu.com/member/mplus_login",type:"get",data:{token:t,source:"h5_media"},dataType:"jsonp"}).done(function(t){e&&e(t)})}var r=n(29),s=n(40);t.exports=function(t){i("com.meizu.media.music")&&s(function(e){e&&o(e,t)})}},function(t,e){window.FlymeJS={callback:{},invokeWeb:function(t,e){e=JSON.parse(e),this.callback[e.res_sn](e.value)}};var n="cb_getusertoken",i=function(t){var e=document.createElement("iframe"),i={force:!1};e.setAttribute("src","flyme://com.meizu.compaign.hybrid.handler.AccountUrlHandler/requestToken?value="+JSON.stringify(i)+"&req_sn="+n),setTimeout(function(){e.parentNode.removeChild(e)},100),document.body.appendChild(e),window.FlymeJS.callback[n]=t};t.exports=i},function(t,e,n){var i;!function(){"use strict";/**
      * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
      *
      * @codingstandard ftlabs-jsv2
      * @copyright The Financial Times Limited [All Rights Reserved]
      * @license MIT License (see LICENSE.txt)
      */
function o(t,e){function n(t,e){return function(){return t.apply(e,arguments)}}var i;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!o.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,u=r.length;c<u;c++)a[r[c]]=n(a[r[c]],a);s&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(t){i(t)},!1),t.onclick=null)}}var r=navigator.userAgent.indexOf("Windows Phone")>=0,s=navigator.userAgent.indexOf("Android")>0&&!r,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,c=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),u=a&&/OS [6-7]_\d/.test(navigator.userAgent),l=navigator.userAgent.indexOf("BB10")>0;o.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(a&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},o.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},o.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},o.prototype.determineEventType=function(t){return s&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},o.prototype.focus=function(t){var e;a&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},o.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},o.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},o.prototype.onTouchStart=function(t){var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],a){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},o.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},o.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},o.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},o.prototype.onTouchEnd=function(t){var e,n,i,o,r,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(r=t.changedTouches[0],l=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=l.tagName.toLowerCase(),"label"===i){if(e=this.findControl(l)){if(this.focus(l),s)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-n>100||a&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),a&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return!(!a||c||(o=l.fastClickScrollParent,!o||o.fastClickLastScrollTop===o.scrollTop))||(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},o.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},o.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},o.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},o.prototype.destroy=function(){var t=this.layer;s&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},o.notNeeded=function(t){var e,n,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(e=document.querySelector("meta[name=viewport]")){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(l&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(e.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},o.attach=function(t,e){return new o(t,e)},window.FastClick=o,"undefined"!=typeof t&&t.exports?t.exports=o:(n(34).cmd||n(35))&&(i=function(t,e,n){return o}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}()},function(t,e,n){function i(t,e){return this.$container=t,this.options=e,this.firstTouch={},this.touch={x1:0,x2:0,y1:0,y2:0},this.distance={w:0,h:0},this.threshold=10,this.additionalEvent="",this.init(),this.$container}function o(){c.init()}/*!
     * touch-layout.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var r=n(29),s=n(43),a={win:r(window),body:r("body"),main:r("#main"),header:r("#header"),headerOpacity:r("#headerOpacity"),content:r("#content"),tab:r("#contentNav"),prod:r("#prod"),contentInner:r("#contentInner"),description:r("#description"),standard:r("#standard"),question:r("#question")};i.prototype={init:function(){var t=this;t.$container[0].addEventListener("touchstart",t.touchStartHandle.bind(t),!1),t.$container[0].addEventListener("touchmove",t.touchMoveHandle.bind(t),!1),t.$container[0].addEventListener("touchend",t.touchEndHandle.bind(t),!1),t.$container[0].addEventListener("touchcancel",t.touchEndHandle.bind(t),!1)},touchStartHandle:function(t){var e,n=this;n.touch={},n.distance={},n.firstTouch=t.touches[0],t.touches&&1===t.touches.length&&n.touch.y2&&(n.touch.x2=void 0,n.touch.y2=void 0),n.touch.x1=n.firstTouch.pageX,n.touch.y1=n.firstTouch.pageY,e=r.Event("swipeStart",{coord:n.touch}),n.$container.trigger(e)},touchMoveHandle:function(t){var e=this;e.firstTouch=t.touches[0],e.touch.x2=e.firstTouch.pageX,e.touch.y2=e.firstTouch.pageY,e.distance.w=e.touch.x2-e.touch.x1,e.distance.h=e.touch.y2-e.touch.y1,e.recognizer(t)},touchEndHandle:function(t){var e,n=this;n.distance.w=n.touch.x2-n.touch.x1,n.distance.h=n.touch.y2-n.touch.y1,e=r.Event("swipeEnd",{coord:n.touch,distance:Math.abs(n.distance.h),deltaX:n.distance.w,deltaY:n.distance.h,additionalEvent:n.additionalEvent,angle:n.getAngle(n.touch)}),n.$container.trigger(e)},getAngle:function(t){var e,n=t.x2-t.x1,i=t.y2-t.y1,o=Math.sqrt(Math.abs(n*n)+Math.abs(i*i));return e=Math.round(Math.asin(i/o)/Math.PI*180)},isScrollBottom:function(){var t=!1,e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,n=window.innerHeight||document.body.clientHeight,i=document.body.scrollHeight||document.documentElement.scrollHeight;return i-n===e&&(t=!0),t},recognizer:function t(e){var n=this,t=n.options.recognizer,i=/UCBrowser/.test(navigator.userAgent),o={up:function(){if(n.isScrollBottom()&&n.distance.h<-n.threshold&&(i||Math.abs(n.distance.h/n.distance.w)>1.5)){var t=r.Event("swipeUp",{coord:n.touch,distance:Math.abs(n.distance.h),deltaX:n.distance.w,deltaY:n.distance.h,angle:n.getAngle(n.touch)});n.$container.trigger(t),n.additionalEvent="swipeUp",e.stopPropagation()}},down:function(){if(!((window.pageYOffset||window.scrollY)>1)&&n.distance.h>n.threshold&&(i||Math.abs(n.distance.h/n.distance.w)>1.5)){var t=r.Event("swipeDown",{coord:n.touch,distance:Math.abs(n.distance.h),deltaX:n.distance.w,deltaY:n.distance.h,angle:n.getAngle(n.touch)});n.$container.trigger(t),n.additionalEvent="swipeDown",e.stopPropagation()}}};t.forEach(function(t){o[t]&&o[t]()})}};var c={prop:{isUC:/UCBrowser/.test(navigator.userAgent.toLowerCase()),isWeixin:/micromessenger/.test(navigator.userAgent.toLowerCase()),isMZ:/mz\-/.test(navigator.userAgent.toLowerCase())},state:{count:0},init:function(t){var e=this;e.state.count=a.contentInner.children().length,a.contentInner.children().eq(0).addClass("active").css("height","auto").siblings().removeClass("active"),e.bindEvent(),e.headerOpacityCtrl(),e.fixedContentNav(),e.activePanel(0,!0)},headerOpacityCtrl:function(){var t=a.prod.position().top;a.headerOpacity.height();a.win.on("scroll.opacity",function(){var e=a.win.scrollTop(),n=r("#topbnr-dl-app");e>=10?(n.hide(),a.body.css("padding-top",0)):e<5&&n.length&&(n.show(),a.body.css("padding-top",a.headerOpacity.height())),a.headerOpacity.css("opacity",Math.min(e/t,1))})},fixedContentNav:function(){var t=r("#contentNav").height();r("#headerOpacityTitle");a.win.on("scroll.contentNav",function(){var e=a.win.scrollTop()+t,n=a.content.position().top;e>=n?a.tab.addClass("fixed"):a.tab.removeClass("fixed")})},bindEvent:function(){var t=this,e=a.contentInner.width();a.tab.children("a").on("click",function(n){n.preventDefault();var i=r(n.currentTarget),o=i.index(),s=-(o*e);a.contentInner.css({transform:"translateX("+s+"px)","-webkit-transform":"translateX("+s+"px)"}),t.activePanel(o)}),a.contentInner.children().each(function(e){t.panHandler(new s(this,{threshold:30}),e)})},activePanel:function(t,e){var n,i=a.header.height(),o=window.innerHeight-a.header.height();a.tab.children().eq(t).addClass("active").siblings().removeClass("active"),a.contentInner.children().eq(t).addClass("active").css("height","auto").siblings().removeClass("active").css("height",o-2*i),e||(n=a.content.position().top-i+10,window.scrollTo(0,Math.floor(n)))},panHandler:function(t,e){var n=this,i=a.contentInner.width(),o=-(e*i);t.on("panleft",function(t){e!==n.state.count-1&&(Math.abs(t.deltaX/t.deltaY)<1.5||a.contentInner.css({transform:"translateX("+(o-t.distance)+"px)","-webkit-transform":"translateX("+(o-t.distance)+"px)"}))}).on("panright",function(t){0!==e&&(Math.abs(t.deltaX/t.deltaY)<1.5||a.contentInner.css({transform:"translateX("+(o+t.distance)+"px)","-webkit-transform":"translateX("+(o+t.distance)+"px)"}))}).on("panend pancancel",function(t){var r,s,c=Math.abs(t.deltaX/t.deltaY)>1.5,u=Math.abs(t.angle)>90;if(Math.abs(t.distance)>=70&&c){if(!u&&0===e)return;if(u&&e===n.state.count-1)return;r=u?e+1:e-1,s=u?o-i:o+i,a.contentInner.css({transform:"translateX("+s+"px)","-webkit-transform":"translateX("+s+"px)"}),n.activePanel(r)}else a.contentInner.css({transform:"translateX("+o+"px)","-webkit-transform":"translateX("+o+"px)"});return!0})}};t.exports=o},function(t,e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*! Hammer.JS - v2.0.6 - 2015-12-23
     * http://hammerjs.github.io/
     *
     * Copyright (c) 2015 Jorik Tangelder;
     * Licensed under the  license */
!function(r,s,a,c){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==c)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function d(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}function p(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&dt(i,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function m(t,e){return("undefined"==typeof t?"undefined":o(t))==mt?t.apply(e?e[0]||c:c,e):t}function v(t,e){return t===c?e:t}function g(t,e,n){h(_(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){h(_(e),function(e){t.removeEventListener(e,n,!1)})}function b(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function w(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function x(t){return Array.prototype.slice.call(t,0)}function T(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];k(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function S(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<pt.length;){if(n=pt[r],i=n?n+o:e,i in t)return i;r++}return c}function E(){return _t++}function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){m(t.options.enable,[t])&&n.handler(e)},this.init()}function I(t){var e,n=t.options.inputClass;return new(e=n?n:Tt?X:St?J:xt?W:F)(t,M)}function M(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&At&&i-o===0,s=e&(Nt|Ot)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,A(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function A(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=O(e)),o>1&&!n.firstMultiple?n.firstMultiple=O(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,c=e.center=j(i);e.timeStamp=yt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=q(a,c),e.distance=B(a,c),D(n,e),e.offsetDirection=z(e.deltaX,e.deltaY);var u=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=gt(u.x)>gt(u.y)?u.x:u.y,e.scale=s?H(s.pointers,i):1,e.rotation=s?R(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,N(n,e);var l=t.element;b(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function D(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};(e.eventType===At||r.eventType===Nt)&&(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function N(t,e){var n,i,o,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=Ot&&(a>Mt||s.velocity===c)){var u=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=L(a,u,l);i=h.x,o=h.y,n=gt(h.x)>gt(h.y)?h.x:h.y,r=z(u,l),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}function O(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:vt(t.pointers[n].clientX),clientY:vt(t.pointers[n].clientY)},n++;return{timeStamp:yt(),pointers:e,center:j(e),deltaX:t.deltaX,deltaY:t.deltaY}}function j(t){var e=t.length;if(1===e)return{x:vt(t[0].clientX),y:vt(t[0].clientY)};for(var n=0,i=0,o=0;e>o;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:vt(n/e),y:vt(i/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function z(t,e){return t===e?jt:gt(t)>=gt(e)?0>t?Lt:zt:0>e?Bt:qt}function B(t,e,n){n||(n=Xt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function q(t,e,n){n||(n=Xt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function R(t,e){return q(e[1],e[0],Yt)+q(t[1],t[0],Yt)}function H(t,e){return B(e[0],e[1],Yt)/B(t[0],t[1],Yt)}function F(){this.evEl=Jt,this.evWin=Ut,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function X(){this.evEl=Zt,this.evWin=Kt,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Y(){this.evTarget=Gt,this.evWin=te,this.started=!1,C.apply(this,arguments)}function $(t,e){var n=x(t.touches),i=x(t.changedTouches);return e&(Nt|Ot)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function J(){this.evTarget=ne,this.targetIds={},C.apply(this,arguments)}function U(t,e){var n=x(t.touches),i=this.targetIds;if(e&(At|Dt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=x(t.changedTouches),a=[],c=this.target;if(r=n.filter(function(t){return b(t.target,c)}),e===At)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(Nt|Ot)&&delete i[s[o].identifier],o++;return a.length?[T(r.concat(a),"identifier",!0),a]:void 0}function W(){C.apply(this,arguments);var t=f(this.handler,this);this.touch=new J(this.manager,t),this.mouse=new F(this.manager,t)}function V(t,e){this.manager=t,this.set(e)}function Z(t){if(w(t,ce))return ce;var e=w(t,ue),n=w(t,le);return e&&n?ce:e||n?e?ue:le:w(t,ae)?ae:se}function K(t){this.options=dt({},this.defaults,t||{}),this.id=E(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function Q(t){return t&ve?"cancel":t&fe?"end":t&pe?"move":t&de?"start":""}function G(t){return t==qt?"down":t==Bt?"up":t==Lt?"left":t==zt?"right":""}function tt(t,e){var n=e.manager;return n?n.get(t):t}function et(){K.apply(this,arguments)}function nt(){et.apply(this,arguments),this.pX=null,this.pY=null}function it(){et.apply(this,arguments)}function ot(){K.apply(this,arguments),this._timer=null,this._input=null}function rt(){et.apply(this,arguments)}function st(){et.apply(this,arguments)}function at(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=v(e.recognizers,ct.defaults.preset),new ut(t,e)}function ut(t,e){this.options=dt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=I(this),this.touchAction=new V(this,this.options.touchAction),lt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var n=t.element;n.style&&h(t.options.cssProps,function(t,i){n.style[S(n.style,i)]=e?t:""})}function ht(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var dt,pt=["","webkit","Moz","MS","ms","o"],ft=s.createElement("div"),mt="function",vt=Math.round,gt=Math.abs,yt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===c||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==c&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var bt=d(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===c)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),wt=d(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),_t=1,kt=/mobile|tablet|ip(ad|hone|od)|android/i,xt="ontouchstart"in r,Tt=S(r,"PointerEvent")!==c,St=xt&&kt.test(navigator.userAgent),Et="touch",Pt="pen",Ct="mouse",It="kinect",Mt=25,At=1,Dt=2,Nt=4,Ot=8,jt=1,Lt=2,zt=4,Bt=8,qt=16,Rt=Lt|zt,Ht=Bt|qt,Ft=Rt|Ht,Xt=["x","y"],Yt=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(P(this.element),this.evWin,this.domHandler)}};var $t={mousedown:At,mousemove:Dt,mouseup:Nt},Jt="mousedown",Ut="mousemove mouseup";p(F,C,{handler:function(t){var e=$t[t.type];e&At&&0===t.button&&(this.pressed=!0),e&Dt&&1!==t.which&&(e=Nt),this.pressed&&this.allow&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ct,srcEvent:t}))}});var Wt={pointerdown:At,pointermove:Dt,pointerup:Nt,pointercancel:Ot,pointerout:Ot},Vt={2:Et,3:Pt,4:Ct,5:It},Zt="pointerdown",Kt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Zt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),p(X,C,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Wt[i],r=Vt[t.pointerType]||t.pointerType,s=r==Et,a=k(e,t.pointerId,"pointerId");o&At&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):o&(Nt|Ot)&&(n=!0),0>a||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var Qt={touchstart:At,touchmove:Dt,touchend:Nt,touchcancel:Ot},Gt="touchstart",te="touchstart touchmove touchend touchcancel";p(Y,C,{handler:function(t){var e=Qt[t.type];if(e===At&&(this.started=!0),this.started){var n=$.call(this,t,e);e&(Nt|Ot)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}}});var ee={touchstart:At,touchmove:Dt,touchend:Nt,touchcancel:Ot},ne="touchstart touchmove touchend touchcancel";p(J,C,{handler:function(t){var e=ee[t.type],n=U.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}}),p(W,C,{handler:function(t,e,n){var i=n.pointerType==Et,o=n.pointerType==Ct;if(i)this.mouse.allow=!1;else if(o&&!this.mouse.allow)return;e&(Nt|Ot)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=S(ft.style,"touchAction"),oe=ie!==c,re="compute",se="auto",ae="manipulation",ce="none",ue="pan-x",le="pan-y";V.prototype={set:function(t){t==re&&(t=this.compute()),oe&&this.manager.element.style&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){m(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){if(!oe){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=w(i,ce),r=w(i,le),s=w(i,ue);if(o){var a=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(a&&c&&u)return}if(!s||!r)return o||r&&n&Rt||s&&n&Ht?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,de=2,pe=4,fe=8,me=fe,ve=16,ge=32;K.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=tt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=tt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=tt(t,this),-1===k(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=tt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;fe>i&&e(n.options.event+Q(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=fe&&e(n.options.event+Q(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ge)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ge|he)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);return m(this.options.enable,[this,e])?(this.state&(me|ve|ge)&&(this.state=he),this.state=this.process(e),void(this.state&(de|pe|fe|ve)&&this.tryEmit(e))):(this.reset(),void(this.state=ge))},process:function(){},getTouchAction:function(){},reset:function(){}},p(et,K,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(de|pe),o=this.attrTest(t);return i&&(n&Ot||!o)?e|ve:i||o?n&Nt?e|fe:e&de?e|pe:de:ge}}),p(nt,et,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ft},getTouchAction:function(){var t=this.options.direction,e=[];return t&Rt&&e.push(le),t&Ht&&e.push(ue),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Rt?(o=0===r?jt:0>r?Lt:zt,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?jt:0>s?Bt:qt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return et.prototype.attrTest.call(this,t)&&(this.state&de||!(this.state&de)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(it,et,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&de)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(ot,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Nt|Ot)&&!o)this.reset();else if(t.eventType&At)this.reset(),this._timer=u(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return me;return ge},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=yt(),this.manager.emit(this.options.event,this._input)))}}),p(rt,et,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&de)}}),p(st,et,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|Ht,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Rt|Ht)?e=t.overallVelocity:n&Rt?e=t.overallVelocityX:n&Ht&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=G(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(at,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=Nt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||B(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=u(function(){this.state=me,this.tryEmit()},e.interval,this),de):me}return ge},failTimeout:function(){return this._timer=u(function(){this.state=ge},this.options.interval,this),ge},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.6",ct.defaults={domEvents:!1,touchAction:re,enable:!0,inputTarget:null,inputClass:null,preset:[[rt,{enable:!1}],[it,{enable:!1},["rotate"]],[st,{direction:Rt}],[nt,{direction:Rt},["swipe"]],[at],[at,{event:"doubletap",taps:2},["tap"]],[ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ye=1,be=2;ut.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?be:ye},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&me)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],e.stopped===be||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(de|pe|fe)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof K)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){var n=this.handlers;return h(_(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return h(_(t),function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&ht(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(ct,{INPUT_START:At,INPUT_MOVE:Dt,INPUT_END:Nt,INPUT_CANCEL:Ot,STATE_POSSIBLE:he,STATE_BEGAN:de,STATE_CHANGED:pe,STATE_ENDED:fe,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:ge,DIRECTION_NONE:jt,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:zt,DIRECTION_UP:Bt,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:Ht,DIRECTION_ALL:Ft,Manager:ut,Input:C,TouchAction:V,TouchInput:J,MouseInput:F,PointerEventInput:X,TouchMouseInput:W,SingleTouchInput:Y,Recognizer:K,AttrRecognizer:et,Tap:at,Pan:nt,Swipe:st,Pinch:it,Rotate:rt,Press:ot,on:g,off:y,each:h,merge:wt,extend:bt,assign:dt,inherit:p,bindFn:f,prefixed:S});var we="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};we.Hammer=ct,i=function(){return ct}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(window,document,"Hammer")},function(t,e,n){function i(){c.init()}/*!
     * favorite.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=n(45),s=n(46),a=new s,c=({promoInner:o("#J_promoInner"),discountCouponList:o("#J_discountCouponList")},{remoteURL:{addFavorite:"//me.m.meizu.com/vip/favorite"},init:function(){var t=this;t.bindEvent()},bindEvent:function(){var t=this;o("#J_favorite").on("tap",function(e){var n=(o(e.currentTarget),MZ.modelData.itemId);r.ajax(t.remoteURL.addFavorite,{itemId:n}).done(function(t){1===t?a.open("鏀惰棌鎴愬姛"):a.open("鎮ㄥ凡鏀惰棌杩囪鍟嗗搧")}).fail(function(t,e){401===e.code?(a.open("璇峰厛鐧诲綍!"),setTimeout(function(){r.login("mall")},1e3)):a.open(t)}),e.preventDefault(),e.stopPropagation()})}});t.exports=i},function(t,e,n){/*!
     * detail-common.js
     * @date 2016.8.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var i,o,r,s,a,c=n(29);c.fn.slideDown||(c.fn.slideDown=function(t){var e=this.css("position");t=t||200,this.show(),this.css({position:"absolute",visibility:"hidden"});var n=this.height();this.css({position:e,visibility:"visible",overflow:"hidden",height:0}),this.animate({height:n},t)}),o=function(t,e,n,i){var o=Math.floor((e-t)/1e3)-1,r=setInterval(function(){o<=0?(i&&i(),clearInterval(r)):n&&n(o),o--},1e3);return r},i=function(t){var e,n,i={store:"http://store.meizu.com/",mall:"http://mall.meizu.com/"},o="https://login.flyme.cn/vCodeLogin?";n=t?i[t]:location.host.match("mall.meizu.com")?i.mall:i.store,e={useruri:n+"member/login.html?useruri="+location.href,service:"store",sid:"unionlogin",autodirct:!0},location.href=o+c.param(e)},r=function(t,e,n,i){var o=c.Deferred();return c.ajax({url:t,data:e?e:null,type:n?n:"get",dataType:i?i:"jsonp",timeout:4e3,cache:!1}).done(function(t){t.success?o.resolve(t.data,t):o.reject(t.message||t.msg,t)}).fail(function(){o.reject("缃戠粶寮傚父锛岃绋嶅悗鍐嶈瘯!")}),o.promise()},s=function(t,e,n){var i;return n=n||".jpg",i=/^\/\/openfile/.test(t)?t+e+"x"+e+n:t+"@"+e+"x"+e+n},a=function(){var t=function(t){for(var e,n=document.cookie?document.cookie.split(/;[ ]*/):[],i=0,o=n.length;i<o;i++){var r=n[i].split("=");if(t&&t==decodeURIComponent(r[0])){e=decodeURIComponent(r[1]);break}}return e},e=t("MEIZUSTORESESSIONVAL");return!!e},t.exports={ajax:r,login:i,countDown:o,imageUrlProcess:s,isLogin:a}},function(t,e,n){var i;!function(o,r){"use strict";function s(t){}s.prototype.open=function(t,e,n){if(t&&"string"==typeof t){n=n||1500;var i=this,o='<div class="popup popmsg"><div class="wrap"><div class="cell">';o+='<div class="content">'+t+"</div>",o+="</div></div></div>";var s=r("body"),a=r(o);s.hasClass("popup-open")||(s.addClass("popup-open"),a.appendTo(s).fadeIn(200)),setTimeout(function(){a.fadeOut(200,function(){s.removeClass("popup-open"),a.remove()}),e&&r.isFunction(e)&&e.call(i,arguments)},n)}},"undefined"!=typeof t&&t.exports?t.exports=s:n(34).cmd||n(35)?(i=function(t,e,n){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))):window.Message=s}(window,window.jQuery||window.Zepto)},function(t,e,n){function i(t){l.init(t)}/*!
     * coupon.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=n(45),s=(n(30),n(46)),a=n(48),c=new s,u={promoInner:o("#J_promoInner"),discountCouponList:o("#J_discountCouponList")},l={remoteURL:{getCouponList:"//promotion.meizu.com/coupon/item/list/",getCoupon:"//promotion.meizu.com/coupon/acquire/"},init:function(t){var e=this;e.getCoupon(t),e.bindEvent()},bindEvent:function(){var t=this;o("#J_discountCouponList").on("tap",".vm-btn",function(e){var n=o(e.currentTarget),i=n.data("key");r.ajax(t.remoteURL.getCoupon+i,null).done(function(t){c.open("棰嗗彇鎴愬姛")}).fail(function(t,e){401===e.code?(c.open("璇峰厛鐧诲綍!"),setTimeout(function(){r.login("mall")},1e3)):c.open(t)}),e.preventDefault(),e.stopPropagation()})},getCoupon:function(t){var e=this,n=e.remoteURL.getCouponList+t;r.ajax(n,{scope:3},"get","jsonp").done(function(t){t&&t.length&&(t=e.formatData(t),e.renderCoupon(t))})},formatData:function(t){var e=function(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),r=e.getHours()<10?"0"+e.getHours():e.getHours(),s=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return n+"."+i+"."+o+" "+r+":"+s};return o.each(t,function(t,n){n.start=e(n.start),n.end=e(n.end)}),t},renderCoupon:function(t){var e="";t&&(o.each(t,function(t,n){e+=1===n.couponType?'<span class="vm-tag"><em>婊�'+n.consumptionQuota+"鍑�"+n.reductionQuota+"</em></span>":'<span class="vm-tag multiple"><em>婊�'+n.consumptionQuota+"鍑�"+n.reductionQuota+"</em></span>"}),couponListLayer=a({listData:t}),u.promoInner.append(e).parent().slideDown(600),u.discountCouponList.append(couponListLayer))}};t.exports=i},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";for(var i=0,length=listData.length;i<length;i++)__p+='\n    <dd class="discount-coupon-item clearfix ',2===listData[i].couponType&&(__p+="multiple"),__p+='">\n        <div class="mod-btn">\n            <a class="vm-btn" data-key="'+(null==(__t=listData[i].couponKey)?"":__t)+'"></a>\n        </div>\n       \t<div class="mod-bd">\n            <p class="mod-bd-value">\n                <span class="vm-amount"><sup>楼</sup>'+(null==(__t=listData[i].reductionQuota)?"":__t)+"</span>\n                <em>\n                ",__p+=1===listData[i].couponType?"\n                (鍗曞搧鍒�)\n                ":"\n                (澶氬搧鍒�)\n                ",__p+='\n                </em>\n            </p>\n            <p class="mod-bd-name">\n                <span class="vm-name">'+(null==(__t=listData[i].couponName)?"":__t)+'浼樻儬鍒�</span>\n                <span class="vm-claim">婊�'+(null==(__t=listData[i].consumptionQuota)?"":__t)+'鍙敤</span>\n            </p>\n            <p class="mod-bd-info">\n                <span>'+(null==(__t=listData[i].start)?"":__t)+"锛�"+(null==(__t=listData[i].end)?"":__t)+'</span>\n                <span class="vm-range ellipsis">閫傜敤鑼冨洿锛�'+(null==(__t=listData[i].appliableDesc)?"":__t)+"</span>\n            </p>\n        </div>\n    </dd>\n";__p+=""}return __p}},function(t,e,n){function i(t,e){this.liveView=t,this.model=t.model,this.itemId=e,this.init()}/*!
     * gift.js
     * @date 2018.8.30
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=n(45),s={prodGift:o("#J_gift"),prodParty:o("#J_prodParty")},a={getGift:"//promotion.m.meizu.com/present/get"};i.prototype.init=function(){var t=this;t.getGift()},i.prototype.getGift=function(){var t=this;r.ajax(a.getGift,{itemId:t.itemId},"get","jsonp").done(function(e){e&&e.length&&t.giftHandler(e)})},i.prototype.giftHandler=function(t){var e=t.some(function(t){return 1===t.type});e&&this.model.set("hasGiftCard",!0);var n=t.reduce(function(t,e){return t.push(e.showName),t},[]);s.prodGift.html('<span class="vm-name">璧犲搧</span><span class="vm-text">'+n.join("銆�")+"</span>").show(),s.prodParty.show()},t.exports=window._Gift=i},function(t,e,n){function i(t,e){this.liveView=t,this.model=t.model,this.itemId=e,this.data={},this.init()}/*!
     * coupon.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=n(45),s=(n(30),{morebuy:o("#J_morebuy"),prodParty:o("#J_prodParty")}),a={getMorebuy:"//detail.meizu.com/addprice/get",theBinder:"//cart.mall.meizu.com/the_binder/index"};i.prototype.init=function(){var t=this;t.bindEvent(),t.getMorebuy()},i.prototype.bindEvent=function(){var t=this,e=t.model,n={itemId:t.itemId,refer:"detail"};s.morebuy.on("click",function(t){n.skuId=e.get("skuId"),n.quantity=e.get("quantity"),n.binderSkuId="",(e.get("activePackage")||0===e.get("activePackage"))&&(n.packageId=e.get("activePackage")),e.get("packageSkuIds")&&(n.packageSkuIds=e.get("packageSkuIds").join(",")),location.href=a.theBinder+"?"+o.param(n)})},i.prototype.getMorebuy=function(t){var e=this;r.ajax(a.getMorebuy,{skuId:e.model.get("skuId")},"get","jsonp").done(function(t){t&&t.length&&e.renderMorebuy(t)})},i.prototype.renderMorebuy=function(t){var e,n="";e=t.reduce(function(t,e){return t.minPrice<e.minPrice?t:e}),n='<span class="vm-name">鍔犱环璐�</span>\n                <span class="vm-text">璇ュ晢鍝佸姞浠�'+e.minPrice+'鍏冭捣锛屽彲鎹㈣喘瓒呭€煎晢鍝�</span>\n                <i class="icon icon-enter"></i>',s.morebuy.html(n).show(),s.prodParty.show()},t.exports=window._Morebuy=i},function(t,e,n){/*!
     * kefu.js
     * @date 2017.8.25
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(45),r={erp:"//ordercenter.meizu.com/xiaoneng/erp/param"},s=window.MZ.modelData,a=function(t){var e=0;if(0==t.length)return e;for(i=0;i<t.length;i++)char=t.charCodeAt(i),e=(e<<5)-e+char,e&=e;return"娓稿"+(e+"").slice(-5)||"娓稿"};t.exports=function(){var t=window.NTKF_PARAM;s.showXiaoNeng&&$("#J_kefu").show().on("tap",function(e){e.preventDefault(),o.ajax(r.erp,{supplier_id:s.merchantId}).done(function(e){t.erpparam=e.erpparam,t.uid=e.uid,t.uname=e.uname,e.tjcoid&&(t.uid=e.tjcoid),e.uname||(t.uname=a(e.tjcoid))}).always(function(){NTKF.im_openInPageChat(s.receptionTeamId||t.settingid)})})}},function(t,e){e.conversionSkuKeyToObj=function(t){var e,n={},i=t.split("+")[0];return i.split(";").forEach(function(t){e=t.split(":"),n[e[0]]=t}),n},e.queryString=function(t){var e=location.search.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));return e?e[1]:""},e.parseSku=function(t){var e,n,i=[];return $.each(t,function(t,o){e=t.split("+")[0],$.each(e.split(";"),function(t,e){n=e.split(":"),o[n[0]]=n[1]}),o.id=t,o.pvs=e,i.push(o)}),i},e.getRecommend=function(t,e){var n;return n=t&&e.skuMap[t]?e.skuMap[t]:e.recommend},e.lockButton=function(t,e){e=e||3e3,t.addClass("locked").prop("disabled",!0),window.setTimeout(function(){t.removeClass("locked").prop("disabled",!1)},e)}},function(t,e,n){/*!
     * snapup-timing.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var i=(n(30),n(31)),o=i.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:0,stock:0,attributes:"",type:1,shelveTime:0,activeStatus:0,isSupportCart:!1}}),r=i.Collection.extend({model:o}),s=i.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:"",stock:"",attributes:"",propItem:null,propSet:null,total:0,quantity:1,activePackage:"",packageSet:null,packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0,packageMap:null,packageItems:null,mainPriceCent:0,costPriceCent:0,hasGiftCard:!1,panicToken:"",type:1,shelveTime:0,activeStatus:1,isSupportCart:!1,periods:""}});t.exports={ProModel:s,SkuCollection:r}},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o,r=n(29),s=n(30),a=n(31),c=n(55),u=n(56);window.Decimal=u;var l=(n(38),n(46)),h=new l,d=n(45),p=n(57),f=n(52),m=n(58),v=n(59),g=n(60),y=n(62),b=window.MZ.modelData,w={orderAdd:"//ordercenter.mall.meizu.com/order/mall/add.html",getStock:"//detail.mall.meizu.com/api/sku/stock"},_=a.View.extend((o={events:{"tap #headerBack":m.goBack,"tap #J_prodPromo":"ctrlHandler","tap #J_prodService":"ctrlHandler","tap #J_prodSelected":"handlerOpenProps","tap #J_prodSuda":"ctrlHandler","tap .J_btnClose":"ctrlHandler","tap .property-sibling a":m.goSibling,"tap .property-sale a":"setProp","tap .property-package a":"setPackage","tap #J_huabeiBody a":"setHuabei","tap .vm-minus":m.quantityMinus,"tap .vm-plus":m.quantityPlus,"tap #J_packageTab a":"setPackage","tap .mod-prop a":"activePackageItem","tap #J_packageEnter":"ctrlHandler","tap #J_btnBuyNow":"distributeSubmit","tap #J_btnBuyPropsEnter":"distributeSubmit","tap .layer-cover":"quickClose","tap #J_propExclusive":"goToDown"},templatePackageItem:'<%for(var i=0,length=packages.length;i<length;i++){%><%if(packages[i].available) {%><a data-value="<%= packages[i].id %>" class="prop" data-mtype="mall_de_pa_set_<%=(i+1) %>"><%=packages[i].name%></a><%} else {%><a data-value="<%= packages[i].id %>" class="prop disabled" data-mtype="mall_de_pa_set_<%=(i+1) %>"><%=packages[i].name%></a><%}%><%}%>',imgLoaded:[],propEnsure:!1,openPropType:"full",initialize:function(){var t=this;t.listenTo(t.model,"change:pvs",t.updatePvs),t.listenTo(t.model,"change:propSet",t.mergeSkuModel),t.listenTo(t.model,"change:activePackage",t.activePackage),t.listenTo(t.model,"change:packageIds",t.handlerPackage),t.listenTo(t.model,"change:stock",t.updateStock),t.listenTo(t.model,"change:buyButton",t.updateButton),t.listenTo(t.model,"change:packageName",t.updateSummaryInfo),t.listenTo(t.model,"change:attributes",t.updateSummaryInfo),t.listenTo(t.model,"change:mainPriceCent",t.updatePrice),t.listenTo(t.model,"change:packageTotalPriceCent",t.setTotalPrice),t.listenTo(t.model,"change:total",t.updateTotal),t.listenTo(t.model,"change:quantity",t.updateQuantity),t.listenTo(t.model,"change:skuId",t.handlerSkuChange),t.listenTo(t.model,"change:costPriceCent",t.updateCostPrice),t.listenTo(t.model,"change:appPrice",t.updateAppPrice),v.on("QUEUE_SALE_STATUS",t.panicBuyingStockStatus.bind(t)),t.initSku()},initSku:function(){var t=this,e=t.model,n=(t.collection,e.get("recommend")),i=n.split("+")[0],o=n.split("+")[1],s=i.split(";"),a=[],c=[],u={};r.each(s,function(e,n){c=n.split(":"),u[c[0]]=n,a.push(c[0]),t.$el.find('[data-value="'+n+'"]').addClass("selected")}),void 0!==o&&t.model.set("initPvs",n),e.set({propItem:a,propSet:u}),t.analysis(),t.initPageContent(),location.hash.match("sibling")&&t.openProps()},initPageContent:function(){var t=this,e=Number(p.serverTime.val()),n=b.discount&&b.discount.endTime;b.discount&&e<n&&d.countDown(p.serverTime.val(),b.discount.endTime,t.getDiscountTime,t.closeDiscountCountDown),p.quantity.val(1)},getDiscountTime:function(t){var e=!1;t>=86400?e=Math.floor(t/86400)+"澶�"+Math.floor(t%86400/3600)+"鏃�":t>0&&(e=Math.floor(t%86400/3600)+"鏃�"+Math.floor(t%3600/60)+"鍒�"+Math.floor(t%60)+"绉�"),e&&p.discountCountDown.add(p.summaryDiscountCountDown).html("( 鍓╀綑<em>"+e+"</em> )")},closeDiscountCountDown:function(t){location.reload()},setProp:function(t){t.preventDefault();var e,n=this,i=r(t.currentTarget),o=i.data("value");i.hasClass("disabled")||i.hasClass("selected")||(e=n.automaticImprovement(o),n.model.set({propSet:e}),n.activeSales(),n.analysis())},mergeSkuModel:function(t,e){var n=this,i=t.get("propItem"),o=t.get("isPackage"),r="",s=i.every(function(t,n){return r+=0===n?e[t]:";"+e[t],""!==e[t]});s&&(n.showSelectedInfo(),o?n.packageMerge(r):n.generalMerge(r))},generalMerge:function(t){var e,n=this,i=n.model.get("skus");e=i[t+"+0"]?n.getSkuModel(t+"+0"):n.getSkuModel(t),n.model.set("pvs",e.pvs,{silent:!0}),delete e.pvs,n.model.set(e)},packageMerge:function(t){var e,n,i,o=this,a=o.model,c=a.get("packageIds"),u=a.get("packageMap"),l=["cspuId","price","originPrice","names","itemName","attributes","images","packageIds","priceCent","huabei","appPrice"];e=o.getSkuModel(t+"+",!0),n=r.extend(!0,{},e);for(var h in e)l.indexOf(h)===-1&&delete e[h];i=n.packageIds.some(function(t){return u[t]&&u[t].available}),i?s.isEqual(n.packageIds,c)?(o.model.set(e),o.model.set("pvs",n.pvs)):(o.model.set("pvs",n.pvs,{silent:!0}),o.model.set(e)):(o.model.set(n),o.updatePvs(a,n.pvs,!0))},getSkuModel:function(t,e){var n,i=this;if(n=e?i.collection.find(function(e){return e.get("id").match(t)}):i.collection.get(t))return n=n.toJSON(),n.id.split(";").forEach(function(t){delete n[t.split(":")[0]]}),delete n.id,n},updatePvs:function(t,e,n){var i,o=this,s=t.get("isPackage"),a=t.get("skus"),c=t.get("activePackage"),u=e+"+"+c;i=c||0===c?o.getSkuModel(u):o.getSkuModel(e,!0),n===!0?t.set({buyButton:"鍞絼",stock:0}):s&&a[u]&&t.set(r.extend(t.toJSON(),i))},handlerSkuChange:function(t,e){var n=this;n.handlerPriceOrDiscount(),n.dataStatistics(e),n.setInitQuantity(1),MZ.modelData.isSupportHuabei&&(n.huabei(),n.huabeiRender()),n.preSaleIcon()},handlerPriceOrDiscount:function(){var t,e,n,i=this,o=i.model,r=o.get("discountKeys"),s=o.get("priceCent"),a=o.get("pvs");t=o.get("isPackage")&&o.get("activePackage")?a+"+"+o.get("activePackage"):r&&r.indexOf(a+"+0")!==-1?a+"+0":a,r&&r.indexOf(t)!==-1?(e=MZ.modelData.discount.cspuMap[t].priceCent,n=s):(e=s,n=0),o.set({mainPriceCent:e,costPriceCent:n})},dataStatistics:function(t){var e=MZ.modelData.itemId+"_"+t;p.btnBuy.data("mtype","mall_de_buy1_"+e),p.btnBuyProp.data("mtype","mall_de_buy2_"+e)},huabei:function(){var t,e=this,n=e.model.get("huabei").reduce(function(t,e){return t.period>e.period?t:e});b.huabei.forEach(function(e){e.period===n.period&&(t=e.rate)}),p.installment.css("display","block").find(".vm-price").text(n.eachPriceCent.toFixed(2)),p.installment.find(".vm-period").text(n.period),p.installment.find(".vm-rate").text(""),12===n.period&&0==t&&p.installment.find(".vm-rate").text("锛�0鎵嬬画璐癸級")},huabeiRender:function(){var t,e,n,i,o=this,s=o.model,a=s.get("quantity")||1,c=new u(o.model.get("mainPriceCent")+o.model.get("packageTotalPriceCent")),l=c.times(a),h=[];b.huabei.forEach(function(o){u.rounding=u.ROUND_HALF_EVEN,t=l.times(o.rate).round(),u.rounding=u.ROUND_DOWN,e=l.div(o.period).round(),n=t.div(o.period).round(),i=e.plus(n),h.push({eachPrice:i.div(100).valueOf(),period:o.period,rate:o.rate,eachRatePrice:n.div(100).valueOf()})}),p.huabeiBd.children().each(function(t){var e,n,i=r(this);h[t]&&(e="楼"+h[t].eachPrice+"脳"+h[t].period+"鏈�",n=0==h[t].rate?"(鍏嶆墜缁垂)":"(鍚墜缁垂"+h[t].eachRatePrice+"/鏈�)",i.find(".vm-periods").text(e).next().text(n))})},preSaleIcon:function(){var t=this,e=t.model.get("isPreSale"),n='<span class="s-pre-sale">棰勫敭</span>',i=r("#prd-sliders");e?i.find(".item").append(n):i.find(".s-pre-sale").remove()},showSelectedInfo:function(){var t,e,n=this,i=n.model,o=i.get("propItem"),s=i.get("propSet"),a=i.get("isPackage"),c=!1,u=!a||""!==n.model.get("activePackage"),l=[],h="";c=o.every(function(t,e){return!!s[t]}),t=p.property.find(".property-sale").map(function(){return r(this).data("property")}).get(),r.each(o,function(t,n){e=p.property.find('[data-value="'+s[n]+'"]').text(),e&&l.push(e)}),c&&u?(a&&l.push(n.model.get("packageName")),h=l.join(","),p.selectedProps.html(h).addClass("s-selected"),p.selectedQuantity.show().parents(".prod-selected").find("label").text("宸查€�")):(a&&t.push("濂楅"),h=t.join("/"),p.selectedProps.html(h).removeClass("s-selected"),p.selectedQuantity.hide().parents(".prod-selected").find("label").text("閫夋嫨"))},activePackage:function(t,e){var n=this,i=t.get("packageMap"),o=t.get("pvs")+"+"+e,r=n.getSkuModel(o);(e||0===e)&&i[e]?(n.renderPackageContent(i[e]),n.packageCalculate("activePackage"),n.model.set(r)):n.model.set({packageSet:null,packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0}),n.showSelectedInfo(),n.updateCostPrice()},renderPackageContent:function(t){var e,n,i=this,o=i.model.get("pvs"),s=i.model.get("packageMap"),a=i.model.get("packageItems"),c=i.model.get("packageIds"),u=i.model.get("activePackage"),l=[],h="";c&&c.length&&(r.each(c,function(t,e){var i="";n=s[e],n.id=e,0!==e&&n.available&&(u===e&&(i+="selected"),h+='<a class="'+i+'" data-value="'+e+'">'+n.name+"</a>")}),p.packageTab.html(h)),t.items&&r.isArray(t.items)?(r.each(t.items,function(t,n){e=r.extend({},a[n]),e.id=n,l.push(e)}),p.packageBody.html(y({skuData:i.model.toJSON(),quantity:i.model.get("quantity"),items:l}))):p.packageBody.html(y({skuData:i.getSkuModel(o,!0),quantity:i.model.get("quantity"),items:[]}))},packageCalculate:function(t){var e,n=this,i=n.model,o=i.get("packageItems"),s=[],a=[],c={},u=0,l=0;p.packageBody.find(".selected").each(function(){var t=r(this),n=t.data("sku"),i=t.data("sid"),c=t.data("key");s.push(n),i&&c&&(e=o[i].cells[c],e.fullName=o[i].name+"&nbsp;"+e.names,a.push(e))}),r.each(a,function(t,e){c[e.skuId]=e.fullName,u+=e.priceCent,l+=e.originPriceCent-e.priceCent}),"activePackage"==t?(n.model.set("packageSkuIds",s,{silent:!0}),n.model.set({packageSet:c,packageTotalPriceCent:u,packageTotalProfitsCent:l})):n.model.set({packageSkuIds:s,packageSet:c,packageTotalPriceCent:u,packageTotalProfitsCent:l})},syncQuantityStatus:function(t){var e=2===this.model.get("type")?1:e=p.quantity.data("max");e&&t>=e?p.quantity.next().addClass("disabled"):p.quantity.next().removeClass("disabled"),1===t?p.quantity.prev().addClass("disabled"):p.quantity.prev().removeClass("disabled"),p.limit.text("锛堥檺璐� "+e+" 浠讹級")},setInitQuantity:function(t){var e=this,n=e.model;n.set("quantity",t),e.syncQuantityStatus(t)},updateQuantity:function(t,e){var n=this;n.syncQuantityStatus(e),p.quantity.text(e).data("value",e),p.selectedQuantity.text("脳"+e),p.packageBody.find(".sku-item .mod-prop em").text("脳"+e),p.packageBody.find(".package-item .mod-prop em").text("脳"+e),n.updateTotal(t)},automaticImprovement:function(t){var e,n,i,o,s,a=this,c=a.model.get("propItem"),u=r.extend({},a.model.get("propSet")),l=t.split(":")[0],h=c.indexOf(l),d=a.collection,p={};u[l]=t;for(var v in u)u[v]&&(e=u[v].split(":"),p[e[0]]=e[1]);return(n=d.findWhere(p))?u:(i=m.lineRecommendPvs.call(a,h,p),i.done?s=i.stockPvs:(o=m.pointRecommendPvs.call(a,l,p),s=o.stockPvs||i.noStockPvs||o.noStockPvs),s?f.conversionSkuKeyToObj(s):void 0)},activeSales:function(){var t=this,e=t.model.get("propSet");for(var n in e)t.$el.find('.property-sale a[data-value="'+e[n]+'"]').addClass("selected").siblings().removeClass("selected")},analysis:function(){var t,e,n=this,i=n.model.get("propItem"),o=r.extend({},n.model.get("propSet")),s=n.collection,a={};for(var c in o)o[c]&&(t=o[c].split(":"),a[t[0]]=t[1]);i.forEach(function(t,i,o){if(i>0){var c=r.extend({},a),u=n.$el.find('.property-sale a[data-value^="'+t+'"]'),l=[],h=o.slice(i);h.forEach(function(t){delete c[t]}),e=s.where(c),e.forEach(function(e){var n=e.get(t);l.indexOf(n)===-1&&l.push(n)}),u.removeClass("disabled").filter(function(){var t=r(this).data("value"),e=t.split(":")[1];return r.inArray(e,l)===-1}).addClass("disabled")}})}},i(o,"activeSales",function(){var t=this,e=t.model.get("propSet");for(var n in e)t.$el.find('.property-sale a[data-value="'+e[n]+'"]').addClass("selected").siblings().removeClass("selected")}),i(o,"ctrlHandler",function(t){t.preventDefault();var e=this,n=r(t.currentTarget),i=n.data("ctrl");e.toggleLayer(i)}),i(o,"handlerOpenProps",function(){var t=this;t.openProps()}),i(o,"toggleLayer",function(t,e){var n=this,i=r("#"+t);i.length&&(i.is(":visible")&&!e?(i.hide().removeClass("open"),"J_layerPackage"!==t&&p.body.removeClass("lock"),"J_layerProps"===t&&"#sibling"===location.hash&&history.replaceState({},"",location.href.slice(0,location.href.indexOf("#sibling")))):(i.css("display","").addClass("open"),p.body.addClass("lock"),n.contentIscroll(t)))}),i(o,"quickClose",function(t){t.preventDefault();var e=this,n=r(t.currentTarget),i=n.parent().attr("id");e.toggleLayer(i)}),i(o,"contentIscroll",function(t){var e=this;switch(t){case"J_layerPromo":e.promoIscroll||(e.promoIscroll=new c("#J_layerPromo .layer-inner-bd"),document.querySelector("#J_layerPromo").addEventListener("touchmove",function(t){t.preventDefault()},!1));break;case"J_layerService":e.serviceIscroll||(e.serviceIscroll=new c("#J_layerService .layer-inner-bd"),document.querySelector("#J_layerService").addEventListener("touchmove",function(t){t.preventDefault()},!1));break;case"J_layerProps":e.propertyIscroll?e.propertyIscroll.refresh():(e.propertyIscroll=new c("#property",{click:!0}),document.querySelector("#J_layerProps").addEventListener("touchmove",function(t){t.preventDefault()},!1),e.propEnsure=!0);break;case"J_layerPackage":e.packageIscroll||(e.packageIscroll=new c("#J_packageContent"),document.querySelector("#J_layerPackage").addEventListener("touchmove",function(t){t.preventDefault()},!1))}}),i(o,"closeProps",function(){r("#J_layerProps").hide().removeClass("open"),p.body.removeClass("lock")}),i(o,"openProps",function(t){var e=this;switch(e.openPropType=t||"full",t){case"cart":p.btnBuyPropsEnter.hide();break;case"buy":p.btnAddCartProps.hide()}e.toggleLayer("J_layerProps",!0)}),i(o,"setPackage",function(t,e){t.preventDefault();var n=this,i=n.model,o=r(t.currentTarget),s=o.data("value"),a=o.text();o.hasClass("disabled")||(o.hasClass("selected")||(o.addClass("selected").siblings().removeClass("selected"),o.parent().hasClass("mod-tab")&&p.packageLists.find('[data-value="'+s+'"]').addClass("selected").siblings().removeClass("selected"),n.model.set({activePackage:""},{silent:!0}),i.set({activePackage:s,packageName:a})),e||0===s||n.toggleLayer("J_layerPackage",!0))}),i(o,"setHuabei",function(t){t.preventDefault();var e=this,n=e.model,i=r(t.currentTarget),o=i.data("value");i.hasClass("selected")?(i.removeClass("selected"),n.set("periods","")):(i.addClass("selected").siblings().removeClass("selected"),n.set("periods",o))}),i(o,"handlerPackage",function(t,e){var n,i,o=this,a=t.get("packageMap"),c=[];e&&e.length?(r.each(e,function(t,e){i=a[e],i.id=e,c.push(i)}),n=s.template(o.templatePackageItem),p.packageLists.html(n({packages:c})),packageStatusResult=o.getPackageStatus(c),packageStatusResult.avaiSkus.length?p.packageLists.find('[data-value="'+packageStatusResult.avaiSkus[0]+'"]').trigger("tap",[!0]):packageStatusResult.avaiPackages.length?p.packageLists.find('[data-value="'+packageStatusResult.avaiPackages[0]+'"]').trigger("tap",[!0]):t.set({activePackage:"",stock:0,buyButton:"鍞絼"})):(t.set("activePackage","",{silent:!0}),t.set({packageSkuIds:null,packageTotalPriceCent:0}))}),i(o,"getPackageStatus",function(t){var e,n,i=this,o=i.model,r=o.get("pvs"),s={avaiSkus:[],avaiPackages:[]},a=o.get("initPvs");return t.forEach(function(t){e=r+"+"+t.id,n=i.getSkuModel(e),a==e&&t.available?s.avaiSkus.unshift(t.id):t.available&&n&&1===n.stock?s.avaiSkus.push(t.id):t.available&&s.avaiPackages.push(t.id)}),s}),i(o,"updateSummaryInfo",function(){var t=this.model,e=t.get("attributes"),n=t.get("packageName"),i=e;n&&(i+=" "+n),p.summaryName.text(i)}),i(o,"updateAppPrice",function(){var t=navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);0===this.model.get("appPrice")||e?p.propExclusive.hide():(p.propExclusive.show(),p.textExclusive.text(this.model.get("appPrice")))}),i(o,"goToDown",function(){location.href="https://hd.mall.meizu.com/activity/download.html"}),i(o,"updatePrice",function(t,e){var n=(e/100).toFixed(2);p.price.text(n),p.packageBody.find(".sku-item .mod-tit em").text(n),this.setTotalPrice()}),i(o,"setTotalPrice",function(){var t=this,e=t.model,n=e.get("packageTotalPriceCent"),i=e.get("mainPriceCent");e.set("total",n+i)}),i(o,"updateCostPrice",function(){var t=this,e=t.model.get("costPriceCent"),n=t.model.get("mainPriceCent"),i=t.model.get("packageTotalPriceCent"),o=t.model.get("packageTotalProfitsCent");e>0&&n<e?(i&&(e=e+i+o),p.originalPrice.text("楼 "+(e/100).toFixed(2)).show(),p.discountTag.show(),p.discountCountDown.show(),p.summaryDiscountCountDown.show()):(p.originalPrice.empty().hide(),p.discountTag.hide(),p.discountCountDown.hide(),p.summaryDiscountCountDown.hide())}),i(o,"updateTotal",function(t,e){var n,i=this,o=t.get("quantity");e=e||t.get("total"),n=e/100*o,p.price.text((e/100).toFixed(2)),p.totalPrice.text(n.toFixed(2)),p.totalPricePackage.text(n.toFixed(2)),p.summaryPrice.text(n.toFixed(2)),MZ.modelData.isSupportHuabei&&i.huabeiRender()}),i(o,"activePackageItem",function(t){var e=this,n=r(t.currentTarget);n.addClass("selected").siblings().removeClass("selected"),e.switchPackageItem(t.currentTarget),e.packageCalculate("activePackageItem"),e.updateCostPrice()}),i(o,"switchPackageItem",function(t){var e,n=r(t),i=this,o=i.model,s=o.get("packageItems"),a=(n.data("sku"),n.data("sid")),c=n.data("key");a&&c&&(e=s[a].cells[c],n.parents(".package-item").find(".package-item-pic img").attr({src:d.imageUrlProcess(e.images,240),alt:e.names}))}),i(o,"ensurePackage",function(){var t=this;t.packageCalculate(),t.closePackage()}),i(o,"initDiscount",function(){var t,e=new Date;return t=e.getMonth()+1+"鏈�"+e.getDate()+"鏃� "+(e.getHours()>=10?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes())+" 鍑嗘椂寮€鍞�"}),i(o,"isComingSale",function(){var t=this,e=t.model,n=!1;return 1===e.get("type")&&2===e.get("activeStatus")&&(n=!0),n}),i(o,"distributeSubmit",function(t){var e,n=this,i=2===n.model.get("type"),o=r(t.currentTarget);if(!o.hasClass("disabled")&&!o.hasClass("locked")){if(o.hasClass("notlogin")||MZ.environment.checkL&&!d.isLogin())return void d.login();if(e=n.validate(),!e.isValid)return n.openProps("buy"),void h.open(e.message);if(!n.propEnsure)return void n.openProps("buy");n.closeProps(),i?n.panicBuyingSubmit():n.submit(),f.lockButton(o),t.preventDefault(),t.stopPropagation()}}),i(o,"panicBuyingSubmit",function(){var t=this;g.getToken().done(function(){t.panicBuyingStockStatus("buying")}),g._stockWhenOrderTimer=setInterval(function(){t.panicBuyingStockStatus("ordering")},3e4)}),i(o,"panicBuyingStockStatus",function(t){var e=this,n=e.model;m.getSkuSaleStatus(n).done(function(n){if(p.message.empty(),1===n.activeStatus)switch(n.stockStatus){case 1:p.btnBuyAll.text("绔嬪嵆鎶㈣喘").removeClass("disabled"),"buying"===t&&g.orderToken&&e.buyNow(g.orderToken);break;case 2:p.btnBuyAll.text("杩樻湁鏈轰細").addClass("disabled"),p.message.html("璇ュ晢鍝佹湁鐢ㄦ埛涓嬪崟鍚庢湭浠樻锛岃繕鏈夋満浼氭姠鍒�");break;case 3:p.btnBuyAll.text("宸插敭缃�").addClass("disabled")}else 3===n.activeStatus&&(p.btnBuyAll.text("娲诲姩宸茬粨鏉�").addClass("disabled"),e.model.set("activeStatus",3));(n.activeStatus>1||1==n.activeStatus&&n.stockStatus>1)&&(g.state.isStackEmpty=!0,g.closeOrderModal())})}),i(o,"submit",function(t){var e=this;return window.MZ&&window.MZ.mcode?e.buyNow():void e.validateRemote().done(function(){e.buyNow()}).fail(function(t){"login first"==t?d.login():t&&h.open(t)})}),i(o,"validate",function(){var t=this,e=t.model,n=t.$el.find(".property-sale"),i=e.get("propSet"),o=e.get("propItem"),a=e.get("quantity"),c=e.get("packageMap"),u=e.get("activePackage"),l=[],h=!0,d="",p=!1;return p=i&&o.every(function(t){return""!==i[t]}),r.each(o,function(t,e){var o;i[e]||(o=n.eq(t).data("property"),l.push(o))}),s.isEmpty(c)||""!==u||l.push("濂楅"),l.length&&(d="璇烽€夋嫨锛�"+l.join("銆�"),h=!1),isNaN(parseInt(a,10))&&(d="璇风‘璁よ緭鍏ヤ簡姝ｇ‘鐨勫晢鍝佹暟閲�",h=!1),{isValid:h,message:d}}),i(o,"validateRemote",function(){function t(t){var e,n=[],s=!0;r.each(t,function(t,e){e||(n.push(t),s=!1)}),s?h.resolve():(e=n[0]==i?"鍟嗗搧"+o+" 宸插敭缃�":"濂楅涓殑 "+u[n[0]]+" 宸插敭缃�",h.reject(e))}var e=this,n=e.model,i=n.get("skuId"),o=n.get("names"),s=n.get("packageMap"),a=n.get("activePackage"),c=n.get("packageSkuIds"),u=n.get("packageSet"),l=[],h=r.Deferred();return l.push(i),a&&c&&c.length&&(l=l.concat(c)),""!==a&&s[a]&&(o=o+" "+s[a].name),r.ajax({url:w.getStock,type:"get",data:{skuId:l.join(",")},dataType:"json"}).done(function(e){e.success?t(e.data):h.reject(e.error)}).fail(function(t){}),h.promise()}),i(o,"buyNow",function(t){var e=this,n=e.model.toJSON(),i=n.packageSkuIds?n.packageSkuIds.join(","):"",o=r("<form>"),s=['<input type="hidden" name="sku_id" value="'+n.skuId+'" />','<input type="hidden" name="numbers" value="'+n.quantity+'"/>','<input type="hidden" name="package_id" value="'+n.activePackage+'" />','<input type="hidden" name="package_list" value="'+i+'"/>'];window.MZ&&window.MZ.mcode&&s.push('<input type="hidden" name="mcode" value="'+window.MZ.mcode+'"/>'),t&&s.push('<input type="hidden" name="token" value="'+t+'"/>'),b.isSupportHuabei&&n.periods&&s.push('<input type="hidden" name="periods" value="'+n.periods+'"/>'),n.hasGiftCard&&s.push('<input type="hidden" name="present_mark" value="1"/>'),o.attr({action:w.orderAdd,method:"GET"}).html(s.join("")).appendTo("body").submit()}),o));t.exports=_},function(t,e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
!function(r,s,a){function c(t,e){this.wrapper="string"==typeof t?s.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={disablePointer:!l.hasPointer,disableTouch:l.hasPointer||!l.hasTouch,disableMouse:l.hasPointer||l.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof r.onmousedown};for(var n in e)this.options[n]=e[n];this.translateZ=this.options.HWCompositing&&l.hasPerspective?" translateZ(0)":"",this.options.useTransition=l.hasTransition&&this.options.useTransition,this.options.useTransform=l.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?l.ease[this.options.bounceEasing]||l.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var u=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){r.setTimeout(t,1e3/60)},l=function(){function t(t){return i!==!1&&(""===i?t:i+t.charAt(0).toUpperCase()+t.substr(1))}var e={},n=s.createElement("div").style,i=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,o=e.length;i<o;i++)if(t=e[i]+"ransform",t in n)return e[i].substr(0,e[i].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(t,e){for(var n in e)t[n]=e[n]},e.addEvent=function(t,e,n,i){t.addEventListener(e,n,!!i)},e.removeEvent=function(t,e,n,i){t.removeEventListener(e,n,!!i)},e.prefixPointerEvent=function(t){return r.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},e.momentum=function(t,e,n,i,o,r){var s,c,u=t-e,l=a.abs(u)/n;return r=void 0===r?6e-4:r,s=t+l*l/(2*r)*(u<0?-1:1),c=l/r,s<i?(s=o?i-o/2.5*(l/8):i,u=a.abs(s-t),c=u/l):s>0&&(s=o?o/2.5*(l/8):0,u=a.abs(t)+s,c=u/l),{destination:a.round(s),duration:c}};var c=t("transform");return e.extend(e,{hasTransform:c!==!1,hasPerspective:t("perspective")in n,hasTouch:"ontouchstart"in r,hasPointer:!(!r.PointerEvent&&!r.MSPointerEvent),hasTransition:t("transition")in n}),e.isBadAndroid=function(){var t=r.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var e=t.match(/Safari\/(\d+.\d)/);return!(e&&"object"===("undefined"==typeof e?"undefined":o(e))&&e.length>=2)||parseFloat(e[1])<535.19}return!1}(),e.extend(e.style={},{transform:c,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),e.hasClass=function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return n.test(t.className)},e.addClass=function(t,n){if(!e.hasClass(t,n)){var i=t.className.split(" ");i.push(n),t.className=i.join(" ")}},e.removeClass=function(t,n){if(e.hasClass(t,n)){var i=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(i," ")}},e.offset=function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return{left:e,top:n}},e.preventDefaultException=function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return a.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*a.pow(2,-10*t)*a.sin((t-e/4)*(2*a.PI)/e)+1}}}),e.tap=function(t,e){var n=s.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},e.click=function(t){var e,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(e=s.createEvent(r.MouseEvent?"MouseEvents":"Event"),e.initEvent("click",!0,!0),e.view=t.view||r,e.detail=1,e.screenX=n.screenX||0,e.screenY=n.screenY||0,e.clientX=n.clientX||0,e.clientY=n.clientY||0,e.ctrlKey=!!t.ctrlKey,e.altKey=!!t.altKey,e.shiftKey=!!t.shiftKey,e.metaKey=!!t.metaKey,e.button=0,e.relatedTarget=null,e._constructed=!0,n.dispatchEvent(e))},e}();c.prototype={version:"5.2.0",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(1!=l.eventType[t.type]){var e;if(e=t.which?t.button:t.button<2?0:4==t.button?1:2,0!==e)return}if(this.enabled&&(!this.initiated||l.eventType[t.type]===this.initiated)){!this.options.preventDefault||l.isBadAndroid||l.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var n,i=t.touches?t.touches[0]:t;this.initiated=l.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=l.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,n=this.getComputedPosition(),this._translate(a.round(n.x),a.round(n.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&l.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,i,o,r=t.touches?t.touches[0]:t,s=r.pageX-this.pointX,c=r.pageY-this.pointY,u=l.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=s,this.distY+=c,i=a.abs(this.distX),o=a.abs(this.distY),!(u-this.endTime>300&&i<10&&o<10)){if(this.directionLocked||this.options.freeScroll||(i>o+this.options.directionLockThreshold?this.directionLocked="h":o>=i+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,c=this.hasVerticalScroll?c:0,e=this.x+s,n=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+s/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:n>0?0:this.maxScrollY),this.directionX=s>0?-1:s<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&l.eventType[t.type]===this.initiated){this.options.preventDefault&&!l.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,i=(t.changedTouches?t.changedTouches[0]:t,l.getTime()-this.startTime),o=a.round(this.x),r=a.round(this.y),s=a.abs(o-this.startX),c=a.abs(r-this.startY),u=0,h="";if(this.isInTransition=0,this.initiated=0,this.endTime=l.getTime(),!this.resetPosition(this.options.bounceTime))return this.scrollTo(o,r),this.moved?this._events.flick&&i<200&&s<100&&c<100?void this._execEvent("flick"):(this.options.momentum&&i<300&&(e=this.hasHorizontalScroll?l.momentum(this.x,this.startX,i,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},n=this.hasVerticalScroll?l.momentum(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},o=e.destination,r=n.destination,u=a.max(e.duration,n.duration),this.isInTransition=1),o!=this.x||r!=this.y?((o>0||o<this.maxScrollX||r>0||r<this.maxScrollY)&&(h=l.ease.quadratic),void this.scrollTo(o,r,u,h)):void this._execEvent("scrollEnd")):(this.options.tap&&l.tap(t,this.options.tap),this.options.click&&l.click(t),void this._execEvent("scrollCancel"))}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,n=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),(e!=this.x||n!=this.y)&&(this.scrollTo(e,n,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=l.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;e<n;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,n,i){t=this.x+t,e=this.y+e,n=n||0,this.scrollTo(t,e,n,i)},scrollTo:function(t,e,n,i){i=i||l.ease.circular,this.isInTransition=this.options.useTransition&&n>0;var o=this.options.useTransition&&i.style;!n||o?(o&&(this._transitionTimingFunction(i.style),this._transitionTime(n)),this._translate(t,e)):this._animate(t,e,n,i.fn)},scrollToElement:function(t,e,n,i,o){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=l.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,n===!0&&(n=a.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),i===!0&&(i=a.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=n||0,r.top-=i||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?a.max(a.abs(this.x-r.left),a.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,o)}},_transitionTime:function(t){if(this.options.useTransition){t=t||0;var e=l.style.transitionDuration;if(e&&(this.scrollerStyle[e]=t+"ms",!t&&l.isBadAndroid)){this.scrollerStyle[e]="0.0001ms";var n=this;u(function(){"0.0001ms"===n.scrollerStyle[e]&&(n.scrollerStyle[e]="0s")})}}},_transitionTimingFunction:function(t){this.scrollerStyle[l.style.transitionTimingFunction]=t},_translate:function(t,e){this.options.useTransform?this.scrollerStyle[l.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=a.round(t),e=a.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e},_initEvents:function(t){var e=t?l.removeEvent:l.addEvent,n=this.options.bindToWrapper?this.wrapper:r;e(r,"orientationchange",this),e(r,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(n,"mousemove",this),e(n,"mousecancel",this),e(n,"mouseup",this)),l.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,l.prefixPointerEvent("pointerdown"),this),e(n,l.prefixPointerEvent("pointermove"),this),e(n,l.prefixPointerEvent("pointercancel"),this),e(n,l.prefixPointerEvent("pointerup"),this)),l.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(n,"touchmove",this),e(n,"touchcancel",this),e(n,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,e,n=r.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[l.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),e=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),e=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:e}},_animate:function(t,e,n,i){function o(){var d,p,f,m=l.getTime();return m>=h?(r.isAnimating=!1,r._translate(t,e),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(m=(m-c)/n,f=i(m),d=(t-s)*f+s,p=(e-a)*f+a,r._translate(d,p),void(r.isAnimating&&u(o)))}var r=this,s=this.x,a=this.y,c=l.getTime(),h=c+n;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":this.enabled&&!t._constructed&&(t.preventDefault(),t.stopPropagation())}}},c.utils=l,"undefined"!=typeof t&&t.exports?t.exports=c:(i=function(){return c}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}(window,document,Math)},function(t,e,n){var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r){"use strict";function s(t){var e,n,i,o=t.length-1,r="",s=t[0];if(o>0){for(r+=s,e=1;e<o;e++)i=t[e]+"",n=zt-i.length,n&&(r+=g(n)),r+=i;s=t[e],i=s+"",n=zt-i.length,n&&(r+=g(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return r+s}function a(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Pt+t)}function c(t,e,n,i){var o,r,s,a;for(r=t[0];r>=10;r/=10)--e;return--e<0?(e+=zt,o=0):(o=Math.ceil((e+1)/zt),e%=zt),r=At(10,zt-e),a=t[o]%r|0,null==i?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),s=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):s=(n<4&&a+1==r||n>3&&a+1==r/2)&&(t[o+1]/r/100|0)==At(10,e-2)-1||(a==r/2||0==a)&&0==(t[o+1]/r/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),s=(i||n<4)&&9999==a||!i&&n>3&&4999==a):s=((i||n<4)&&a+1==r||!i&&n>3&&a+1==r/2)&&(t[o+1]/r/1e3|0)==At(10,e-3)-1,s}function u(t,e,n){for(var i,o,r=[0],s=0,a=t.length;s<a;){for(o=r.length;o--;)r[o]*=e;for(r[0]+=_t.indexOf(t.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(void 0===r[i+1]&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function l(t,e){var n,i,o=e.d.length;o<32?(n=Math.ceil(o/3),i=Math.pow(4,-n).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=P(t,1,e.times(i),new t(1));for(var r=n;r--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}function h(t,e,n,i){var o,r,s,a,c,u,l,h,d,p=t.constructor;t:if(null!=e){if(h=t.d,!h)return t;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=zt,s=e,l=h[d=0],c=l/At(10,o-s-1)%10|0;else if(d=Math.ceil((r+1)/zt),a=h.length,d>=a){if(!i)break t;for(;a++<=d;)h.push(0);l=c=0,o=1,r%=zt,s=r-zt+1}else{for(l=a=h[d],o=1;a>=10;a/=10)o++;r%=zt,s=r-zt+o,c=s<0?0:l/At(10,o-s-1)%10|0}if(i=i||e<0||void 0!==h[d+1]||(s<0?l:l%At(10,o-s-1)),u=n<4?(c||i)&&(0==n||n==(t.s<0?3:2)):c>5||5==c&&(4==n||i||6==n&&(r>0?s>0?l/At(10,o-s):0:h[d-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=t.e+1,h[0]=At(10,(zt-e%zt)%zt),t.e=-e||0):h[0]=t.e=0,t;if(0==r?(h.length=d,a=1,d--):(h.length=d+1,a=At(10,zt-r),h[d]=s>0?(l/At(10,o-s)%At(10,s)|0)*a:0),u)for(;;){if(0==d){for(r=1,s=h[0];s>=10;s/=10)r++;for(s=h[0]+=a,a=1;s>=10;s/=10)a++;r!=a&&(t.e++,h[0]==Lt&&(h[0]=1));break}if(h[d]+=a,h[d]!=Lt)break;h[d--]=0,a=1}for(r=h.length;0===h[--r];)h.pop()}return St&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function d(t,e,n){if(!t.isFinite())return x(t);var i,o=t.e,r=s(t.d),a=r.length;return e?(n&&(i=n-a)>0?r=r.charAt(0)+"."+r.slice(1)+g(i):a>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(t.e<0?"e":"e+")+t.e):o<0?(r="0."+g(-o-1)+r,n&&(i=n-a)>0&&(r+=g(i))):o>=a?(r+=g(o+1-a),n&&(i=n-o-1)>0&&(r=r+"."+g(i))):((i=o+1)<a&&(r=r.slice(0,i)+"."+r.slice(i)),n&&(i=n-a)>0&&(o+1===a&&(r+="."),r+=g(i))),r}function p(t,e){var n=t[0];for(e*=zt;n>=10;n/=10)e++;return e}function f(t,e,n){if(e>qt)throw St=!0,n&&(t.precision=n),Error(Ct);return h(new t(kt),e,1,!0)}function m(t,e,n){if(e>Rt)throw Error(Ct);return h(new t(xt),e,n,!0)}function v(t){var e=t.length-1,n=e*zt+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function g(t){for(var e="";t--;)e+="0";return e}function y(t,e,n,i){var o,r=new t(1),s=Math.ceil(i/zt+4);for(St=!1;;){if(n%2&&(r=r.times(e),M(r.d,s)&&(o=!0)),n=Mt(n/2),0===n){n=r.d.length-1,o&&0===r.d[n]&&++r.d[n];break}e=e.times(e),M(e.d,s)}return St=!0,r}function b(t){return 1&t.d[t.d.length-1]}function w(t,e,n){for(var i,o=new t(e[0]),r=0;++r<e.length;){if(i=new t(e[r]),!i.s){o=i;break}o[n](i)&&(o=i)}return o}function _(t,e){var n,i,o,r,a,u,l,d=0,p=0,f=0,m=t.constructor,v=m.rounding,g=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(St=!1,l=g):l=e,u=new m(.03125);t.e>-2;)t=t.times(u),f+=5;for(i=Math.log(At(2,f))/Math.LN10*2+5|0,l+=i,n=r=a=new m(1),m.precision=l;;){if(r=h(r.times(t),l,1),n=n.times(++p),u=a.plus(Ft(r,n,l,1)),s(u.d).slice(0,l)===s(a.d).slice(0,l)){for(o=f;o--;)a=h(a.times(a),l,1);if(null!=e)return m.precision=g,a;if(!(d<3&&c(a.d,l-i,v,d)))return h(a,m.precision=g,v,St=!0);m.precision=l+=10,n=r=u=new m(1),p=0,d++}a=u}}function k(t,e){var n,i,o,r,a,u,l,d,p,m,v,g=1,y=10,b=t,w=b.d,_=b.constructor,x=_.rounding,T=_.precision;if(b.s<0||!w||!w[0]||!b.e&&1==w[0]&&1==w.length)return new _(w&&!w[0]?-1/0:1!=b.s?NaN:w?0:b);if(null==e?(St=!1,p=T):p=e,_.precision=p+=y,n=s(w),i=n.charAt(0),!(Math.abs(r=b.e)<15e14))return d=f(_,p+2,T).times(r+""),b=k(new _(i+"."+n.slice(1)),p-y).plus(d),_.precision=T,null==e?h(b,T,x,St=!0):b;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)b=b.times(t),n=s(b.d),i=n.charAt(0),g++;for(r=b.e,i>1?(b=new _("0."+n),r++):b=new _(i+"."+n.slice(1)),m=b,l=a=b=Ft(b.minus(1),b.plus(1),p,1),v=h(b.times(b),p,1),o=3;;){if(a=h(a.times(v),p,1),d=l.plus(Ft(a,new _(o),p,1)),s(d.d).slice(0,p)===s(l.d).slice(0,p)){if(l=l.times(2),0!==r&&(l=l.plus(f(_,p+2,T).times(r+""))),l=Ft(l,new _(g),p,1),null!=e)return _.precision=T,l;if(!c(l.d,p-y,x,u))return h(l,_.precision=T,x,St=!0);_.precision=p+=y,d=a=b=Ft(m.minus(1),m.plus(1),p,1),v=h(b.times(b),p,1),o=u=1}l=d,o+=2}}function x(t){return String(t.s*t.s/0)}function T(t,e){var n,i,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(o=e.length;48===e.charCodeAt(o-1);--o);if(e=e.slice(i,o)){if(o-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%zt,n<0&&(i+=zt),i<o){for(i&&t.d.push(+e.slice(0,i)),o-=zt;i<o;)t.d.push(+e.slice(i,i+=zt));e=e.slice(i),i=zt-e.length}else i-=o;for(;i--;)e+="0";t.d.push(+e),St&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function S(t,e){var n,i,o,r,s,a,c,l,h;if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Nt.test(e))n=16,e=e.toLowerCase();else if(Dt.test(e))n=2;else{if(!Ot.test(e))throw Error(Pt+e);n=8}for(r=e.search(/p/i),r>0?(c=+e.slice(r+1),e=e.substring(2,r)):e=e.slice(2),r=e.indexOf("."),s=r>=0,i=t.constructor,s&&(e=e.replace(".",""),a=e.length,r=a-r,o=y(i,new i(n),r,2*r)),l=u(e,n,Lt),h=l.length-1,r=h;0===l[r];--r)l.pop();return r<0?new i(0*t.s):(t.e=p(l,h),t.d=l,St=!1,s&&(t=Ft(t,o,4*a)),c&&(t=t.times(Math.abs(c)<54?Math.pow(2,c):vt.pow(2,c))),St=!0,t)}function E(t,e){var n,i=e.d.length;if(i<3)return P(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:0|n,e=e.times(Math.pow(5,-n)),e=P(t,2,e,e);for(var o,r=new t(5),s=new t(16),a=new t(20);n--;)o=e.times(e),e=e.times(r.plus(o.times(s.times(o).minus(a))));return e}function P(t,e,n,i,o){var r,s,a,c,u=1,l=t.precision,h=Math.ceil(l/zt);for(St=!1,c=n.times(n),a=new t(i);;){if(s=Ft(a.times(c),new t(e++*e++),l,1),a=o?i.plus(s):i.minus(s),i=Ft(s.times(c),new t(e++*e++),l,1),s=a.plus(i),void 0!==s.d[h]){for(r=h;s.d[r]===a.d[r]&&r--;);if(r==-1)break}r=a,a=i,i=s,s=r,u++}return St=!0,s.d.length=h+1,s}function C(t,e){var n,i=e.s<0,o=m(t,t.precision,1),r=o.times(.5);if(e=e.abs(),e.lte(r))return yt=i?4:1,e;if(n=e.divToInt(o),n.isZero())yt=i?3:2;else{if(e=e.minus(n.times(o)),e.lte(r))return yt=b(n)?i?2:3:i?4:1,e;yt=b(n)?i?1:4:i?3:2}return e.minus(o).abs()}function I(t,e,n,i){var o,r,s,c,l,h,p,f,m,v=t.constructor,g=void 0!==n;if(g?(a(n,1,wt),void 0===i?i=v.rounding:a(i,0,8)):(n=v.precision,i=v.rounding),t.isFinite()){for(p=d(t),s=p.indexOf("."),g?(o=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):o=e,s>=0&&(p=p.replace(".",""),m=new v(1),m.e=p.length-s,m.d=u(d(m),10,o),m.e=m.d.length),f=u(p,10,o),r=l=f.length;0==f[--l];)f.pop();if(f[0]){if(s<0?r--:(t=new v(t),t.d=f,t.e=r,t=Ft(t,m,n,i,0,o),f=t.d,r=t.e,h=gt),s=f[n],c=o/2,h=h||void 0!==f[n+1],h=i<4?(void 0!==s||h)&&(0===i||i===(t.s<0?3:2)):s>c||s===c&&(4===i||h||6===i&&1&f[n-1]||i===(t.s<0?8:7)),f.length=n,h)for(;++f[--n]>o-1;)f[n]=0,n||(++r,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,p="";s<l;s++)p+=_t.charAt(f[s]);if(g){if(l>1)if(16==e||8==e){for(s=16==e?4:3,--l;l%s;l++)p+="0";for(f=u(p,o,e),l=f.length;!f[l-1];--l);for(s=1,p="1.";s<l;s++)p+=_t.charAt(f[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(r<0?"p":"p+")+r}else if(r<0){for(;++r;)p="0"+p;p="0."+p}else if(++r>l)for(r-=l;r--;)p+="0";else r<l&&(p=p.slice(0,r)+"."+p.slice(r))}else p=g?"0p+0":"0";p=(16==e?"0x":2==e?"0b":8==e?"0o":"")+p}else p=x(t);return t.s<0?"-"+p:p}function M(t,e){if(t.length>e)return t.length=e,!0}function A(t){return new this(t).abs()}function D(t){return new this(t).acos()}function N(t){return new this(t).acosh()}function O(t,e){return new this(t).plus(e)}function j(t){return new this(t).asin()}function L(t){return new this(t).asinh()}function z(t){return new this(t).atan()}function B(t){return new this(t).atanh()}function q(t,e){t=new this(t),e=new this(e);var n,i=this.precision,o=this.rounding,r=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?m(this,i,o):new this(0),n.s=t.s):!t.d||e.isZero()?(n=m(this,r,1).times(.5),n.s=t.s):e.s<0?(this.precision=r,this.rounding=1,n=this.atan(Ft(t,e,r,1)),e=m(this,r,1),this.precision=i,this.rounding=o,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Ft(t,e,r,1)):(n=m(this,r,1).times(e.s>0?.25:.75),n.s=t.s):n=new this(NaN),n}function R(t){return new this(t).cbrt()}function H(t){return h(t=new this(t),t.e+1,2)}function F(t){if(!t||"object"!==("undefined"==typeof t?"undefined":o(t)))throw Error(Et+"Object expected");var e,n,i,r=t.defaults===!0,s=["precision",1,wt,"rounding",0,8,"toExpNeg",-bt,0,"toExpPos",0,bt,"maxE",0,bt,"minE",-bt,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],r&&(this[n]=Tt[n]),void 0!==(i=t[n])){if(!(Mt(i)===i&&i>=s[e+1]&&i<=s[e+2]))throw Error(Pt+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=Tt[n]),void 0!==(i=t[n])){if(i!==!0&&i!==!1&&0!==i&&1!==i)throw Error(Pt+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(It);this[n]=!0}else this[n]=!1}return this}function X(t){return new this(t).cos()}function Y(t){return new this(t).cosh()}function $(t){function e(t){var n,i,r,s=this;if(!(s instanceof e))return new e(t);if(s.constructor=e,t instanceof e)return s.s=t.s,s.e=t.e,void(s.d=(t=t.d)?t.slice():t);if(r="undefined"==typeof t?"undefined":o(t),"number"===r){if(0===t)return s.s=1/t<0?-1:1,s.e=0,void(s.d=[0]);if(t<0?(t=-t,s.s=-1):s.s=1,t===~~t&&t<1e7){for(n=0,i=t;i>=10;i/=10)n++;return s.e=n,void(s.d=[t])}return 0*t!==0?(t||(s.s=NaN),s.e=NaN,void(s.d=null)):T(s,t.toString())}if("string"!==r)throw Error(Pt+t);return 45===t.charCodeAt(0)?(t=t.slice(1),s.s=-1):s.s=1,jt.test(t)?T(s,t):S(s,t)}var n,i,r;if(e.prototype=Ht,e.ROUND_UP=0,e.ROUND_DOWN=1,e.ROUND_CEIL=2,e.ROUND_FLOOR=3,e.ROUND_HALF_UP=4,e.ROUND_HALF_DOWN=5,e.ROUND_HALF_EVEN=6,e.ROUND_HALF_CEIL=7,e.ROUND_HALF_FLOOR=8,e.EUCLID=9,e.config=e.set=F,e.clone=$,e.isDecimal=Z,e.abs=A,e.acos=D,e.acosh=N,e.add=O,e.asin=j,e.asinh=L,e.atan=z,e.atanh=B,e.atan2=q,e.cbrt=R,e.ceil=H,e.cos=X,e.cosh=Y,e.div=J,e.exp=U,e.floor=W,e.hypot=V,e.ln=K,e.log=Q,e.log10=tt,e.log2=G,e.max=et,e.min=nt,e.mod=it,e.mul=ot,e.pow=rt,e.random=st,e.round=at,e.sign=ct,e.sin=ut,e.sinh=lt,e.sqrt=ht,e.sub=dt,e.tan=pt,e.tanh=ft,e.trunc=mt,void 0===t&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)t.hasOwnProperty(i=r[n++])||(t[i]=this[i]);return e.config(t),e}function J(t,e){return new this(t).div(e)}function U(t){return new this(t).exp()}function W(t){return h(t=new this(t),t.e+1,3)}function V(){var t,e,n=new this(0);for(St=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return St=!0,new this(1/0);n=e}return St=!0,n.sqrt()}function Z(t){return t instanceof vt||t&&"[object Decimal]"===t.name||!1}function K(t){return new this(t).ln()}function Q(t,e){return new this(t).log(e)}function G(t){return new this(t).log(2)}function tt(t){return new this(t).log(10)}function et(){return w(this,arguments,"lt")}function nt(){return w(this,arguments,"gt")}function it(t,e){return new this(t).mod(e)}function ot(t,e){return new this(t).mul(e)}function rt(t,e){return new this(t).pow(e)}function st(t){var e,n,i,o,r=0,s=new this(1),c=[];if(void 0===t?t=this.precision:a(t,1,wt),i=Math.ceil(t/zt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));r<i;)o=e[r],o>=429e7?e[r]=crypto.getRandomValues(new Uint32Array(1))[0]:c[r++]=o%1e7;else{if(!crypto.randomBytes)throw Error(It);for(e=crypto.randomBytes(i*=4);r<i;)o=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+((127&e[r+3])<<24),o>=214e7?crypto.randomBytes(4).copy(e,r):(c.push(o%1e7),r+=4);r=i/4}else for(;r<i;)c[r++]=1e7*Math.random()|0;for(i=c[--r],t%=zt,i&&t&&(o=At(10,zt-t),c[r]=(i/o|0)*o);0===c[r];r--)c.pop();if(r<0)n=0,c=[0];else{for(n=-1;0===c[0];n-=zt)c.shift();for(i=1,o=c[0];o>=10;o/=10)i++;i<zt&&(n-=zt-i)}return s.e=n,s.d=c,s}function at(t){return h(t=new this(t),t.e+1,this.rounding)}function ct(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function ut(t){return new this(t).sin()}function lt(t){return new this(t).sinh()}function ht(t){return new this(t).sqrt()}function dt(t,e){return new this(t).sub(e)}function pt(t){return new this(t).tan()}function ft(t){return new this(t).tanh()}function mt(t){return h(t=new this(t),t.e+1,1)}var vt,gt,yt,bt=9e15,wt=1e9,_t="0123456789abcdef",kt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",xt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Tt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-bt,maxE:bt,crypto:!1},St=!0,Et="[DecimalError] ",Pt=Et+"Invalid argument: ",Ct=Et+"Precision limit exceeded",It=Et+"crypto unavailable",Mt=Math.floor,At=Math.pow,Dt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Nt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ot=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,jt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Lt=1e7,zt=7,Bt=9007199254740991,qt=kt.length-1,Rt=xt.length-1,Ht={name:"[object Decimal]"};Ht.absoluteValue=Ht.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),h(t)},Ht.ceil=function(){return h(new this.constructor(this),this.e+1,2)},Ht.comparedTo=Ht.cmp=function(t){var e,n,i,o,r=this,s=r.d,a=(t=new r.constructor(t)).d,c=r.s,u=t.s;if(!s||!a)return c&&u?c!==u?c:s===a?0:!s^c<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(r.e!==t.e)return r.e>t.e^c<0?1:-1;for(i=s.length,o=a.length,e=0,n=i<o?i:o;e<n;++e)if(s[e]!==a[e])return s[e]>a[e]^c<0?1:-1;return i===o?0:i>o^c<0?1:-1},Ht.cosine=Ht.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+zt,i.rounding=1,n=l(i,C(i,n)),i.precision=t,i.rounding=e,h(2==yt||3==yt?n.neg():n,t,e,!0)):new i(1):new i(NaN)},Ht.cubeRoot=Ht.cbrt=function(){var t,e,n,i,o,r,a,c,u,l,d=this,p=d.constructor;if(!d.isFinite()||d.isZero())return new p(d);
for(St=!1,r=d.s*Math.pow(d.s*d,1/3),r&&Math.abs(r)!=1/0?i=new p(r.toString()):(n=s(d.d),t=d.e,(r=(t-n.length+1)%3)&&(n+=1==r||r==-2?"0":"00"),r=Math.pow(n,1/3),t=Mt((t+1)/3)-(t%3==(t<0?-1:2)),r==1/0?n="5e"+t:(n=r.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new p(n),i.s=d.s),a=(t=p.precision)+3;;)if(c=i,u=c.times(c).times(c),l=u.plus(d),i=Ft(l.plus(d).times(c),l.plus(u),a+2,1),s(c.d).slice(0,a)===(n=s(i.d)).slice(0,a)){if(n=n.slice(a-3,a+1),"9999"!=n&&(o||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(h(i,t+1,1),e=!i.times(i).times(i).eq(d));break}if(!o&&(h(c,t+1,0),c.times(c).times(c).eq(d))){i=c;break}a+=4,o=1}return St=!0,h(i,t,p.rounding,e)},Ht.decimalPlaces=Ht.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Mt(this.e/zt))*zt,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},Ht.dividedBy=Ht.div=function(t){return Ft(this,new this.constructor(t))},Ht.dividedToIntegerBy=Ht.divToInt=function(t){var e=this,n=e.constructor;return h(Ft(e,new n(t),0,1,1),n.precision,n.rounding)},Ht.equals=Ht.eq=function(t){return 0===this.cmp(t)},Ht.floor=function(){return h(new this.constructor(this),this.e+1,3)},Ht.greaterThan=Ht.gt=function(t){return this.cmp(t)>0},Ht.greaterThanOrEqualTo=Ht.gte=function(t){var e=this.cmp(t);return 1==e||0===e},Ht.hyperbolicCosine=Ht.cosh=function(){var t,e,n,i,o,r=this,s=r.constructor,a=new s(1);if(!r.isFinite())return new s(r.s?1/0:NaN);if(r.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(r.e,r.sd())+4,s.rounding=1,o=r.d.length,o<32?(t=Math.ceil(o/3),e=Math.pow(4,-t).toString()):(t=16,e="2.3283064365386962890625e-10"),r=P(s,1,r.times(e),new s(1),!0);for(var c,u=t,l=new s(8);u--;)c=r.times(r),r=a.minus(c.times(l.minus(c.times(l))));return h(r,s.precision=n,s.rounding=i,!0)},Ht.hyperbolicSine=Ht.sinh=function(){var t,e,n,i,o=this,r=o.constructor;if(!o.isFinite()||o.isZero())return new r(o);if(e=r.precision,n=r.rounding,r.precision=e+Math.max(o.e,o.sd())+4,r.rounding=1,i=o.d.length,i<3)o=P(r,2,o,o,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:0|t,o=o.times(Math.pow(5,-t)),o=P(r,2,o,o,!0);for(var s,a=new r(5),c=new r(16),u=new r(20);t--;)s=o.times(o),o=o.times(a.plus(s.times(c.times(s).plus(u))))}return r.precision=e,r.rounding=n,h(o,e,n,!0)},Ht.hyperbolicTangent=Ht.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,Ft(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},Ht.inverseCosine=Ht.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),o=n.precision,r=n.rounding;return i!==-1?0===i?e.isNeg()?m(n,o,r):new n(0):new n(NaN):e.isZero()?m(n,o+4,r).times(.5):(n.precision=o+6,n.rounding=1,e=e.asin(),t=m(n,o+4,r).times(.5),n.precision=o,n.rounding=r,t.minus(e))},Ht.inverseHyperbolicCosine=Ht.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,St=!1,n=n.times(n).minus(1).sqrt().plus(n),St=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},Ht.inverseHyperbolicSine=Ht.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,St=!1,n=n.times(n).plus(1).sqrt().plus(n),St=!0,i.precision=t,i.rounding=e,n.ln())},Ht.inverseHyperbolicTangent=Ht.atanh=function(){var t,e,n,i,o=this,r=o.constructor;return o.isFinite()?o.e>=0?new r(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(t=r.precision,e=r.rounding,i=o.sd(),Math.max(i,t)<2*-o.e-1?h(new r(o),t,e,!0):(r.precision=n=i-o.e,o=Ft(o.plus(1),new r(1).minus(o),n+t,1),r.precision=t+4,r.rounding=1,o=o.ln(),r.precision=t,r.rounding=e,o.times(.5))):new r(NaN)},Ht.inverseSine=Ht.asin=function(){var t,e,n,i,o=this,r=o.constructor;return o.isZero()?new r(o):(e=o.abs().cmp(1),n=r.precision,i=r.rounding,e!==-1?0===e?(t=m(r,n+4,i).times(.5),t.s=o.s,t):new r(NaN):(r.precision=n+6,r.rounding=1,o=o.div(new r(1).minus(o.times(o)).sqrt().plus(1)).atan(),r.precision=n,r.rounding=i,o.times(2)))},Ht.inverseTangent=Ht.atan=function(){var t,e,n,i,o,r,s,a,c,u=this,l=u.constructor,d=l.precision,p=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&d+4<=Rt)return s=m(l,d+4,p).times(.25),s.s=u.s,s}else{if(!u.s)return new l(NaN);if(d+4<=Rt)return s=m(l,d+4,p).times(.5),s.s=u.s,s}for(l.precision=a=d+10,l.rounding=1,n=Math.min(28,a/zt+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(St=!1,e=Math.ceil(a/zt),i=1,c=u.times(u),s=new l(u),o=u;t!==-1;)if(o=o.times(c),r=s.minus(o.div(i+=2)),o=o.times(c),s=r.plus(o.div(i+=2)),void 0!==s.d[e])for(t=e;s.d[t]===r.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),St=!0,h(s,l.precision=d,l.rounding=p,!0)},Ht.isFinite=function(){return!!this.d},Ht.isInteger=Ht.isInt=function(){return!!this.d&&Mt(this.e/zt)>this.d.length-2},Ht.isNaN=function(){return!this.s},Ht.isNegative=Ht.isNeg=function(){return this.s<0},Ht.isPositive=Ht.isPos=function(){return this.s>0},Ht.isZero=function(){return!!this.d&&0===this.d[0]},Ht.lessThan=Ht.lt=function(t){return this.cmp(t)<0},Ht.lessThanOrEqualTo=Ht.lte=function(t){return this.cmp(t)<1},Ht.logarithm=Ht.log=function(t){var e,n,i,o,r,a,u,l,d=this,p=d.constructor,m=p.precision,v=p.rounding,g=5;if(null==t)t=new p(10),e=!0;else{if(t=new p(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new p(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new p(n&&!n[0]?-1/0:1!=d.s?NaN:n?0:1/0);if(e)if(n.length>1)r=!0;else{for(o=n[0];o%10===0;)o/=10;r=1!==o}if(St=!1,u=m+g,a=k(d,u),i=e?f(p,u+10):k(t,u),l=Ft(a,i,u,1),c(l.d,o=m,v))do if(u+=10,a=k(d,u),i=e?f(p,u+10):k(t,u),l=Ft(a,i,u,1),!r){+s(l.d).slice(o+1,o+15)+1==1e14&&(l=h(l,m+1,0));break}while(c(l.d,o+=10,v));return St=!0,h(l,m,v)},Ht.minus=Ht.sub=function(t){var e,n,i,o,r,s,a,c,u,l,d,f,m=this,v=m.constructor;if(t=new v(t),!m.d||!t.d)return m.s&&t.s?m.d?t.s=-t.s:t=new v(t.d||m.s!==t.s?m:NaN):t=new v(NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(u=m.d,f=t.d,a=v.precision,c=v.rounding,!u[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!u[0])return new v(3===c?-0:0);t=new v(m)}return St?h(t,a,c):t}if(n=Mt(t.e/zt),l=Mt(m.e/zt),u=u.slice(),r=l-n){for(d=r<0,d?(e=u,r=-r,s=f.length):(e=f,n=l,s=u.length),i=Math.max(Math.ceil(a/zt),s)+2,r>i&&(r=i,e.length=1),e.reverse(),i=r;i--;)e.push(0);e.reverse()}else{for(i=u.length,s=f.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}r=0}for(d&&(e=u,u=f,f=e,t.s=-t.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>r;){if(u[--i]<f[i]){for(o=i;o&&0===u[--o];)u[o]=Lt-1;--u[o],u[i]+=Lt}u[i]-=f[i]}for(;0===u[--s];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=p(u,n),St?h(t,a,c):t):new v(3===c?-0:0)},Ht.modulo=Ht.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?h(new i(n),i.precision,i.rounding):(St=!1,9==i.modulo?(e=Ft(n,t.abs(),0,3,1),e.s*=t.s):e=Ft(n,t,0,i.modulo,1),e=e.times(t),St=!0,n.minus(e))},Ht.naturalExponential=Ht.exp=function(){return _(this)},Ht.naturalLogarithm=Ht.ln=function(){return k(this)},Ht.negated=Ht.neg=function(){var t=new this.constructor(this);return t.s=-t.s,h(t)},Ht.plus=Ht.add=function(t){var e,n,i,o,r,s,a,c,u,l,d=this,f=d.constructor;if(t=new f(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new f(t.d||d.s===t.s?d:NaN)):t=new f(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(u=d.d,l=t.d,a=f.precision,c=f.rounding,!u[0]||!l[0])return l[0]||(t=new f(d)),St?h(t,a,c):t;if(r=Mt(d.e/zt),i=Mt(t.e/zt),u=u.slice(),o=r-i){for(o<0?(n=u,o=-o,s=l.length):(n=l,i=r,s=u.length),r=Math.ceil(a/zt),s=r>s?r+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=u.length,o=l.length,s-o<0&&(o=s,n=l,l=u,u=n),e=0;o;)e=(u[--o]=u[o]+l[o]+e)/Lt|0,u[o]%=Lt;for(e&&(u.unshift(e),++i),s=u.length;0==u[--s];)u.pop();return t.d=u,t.e=p(u,i),St?h(t,a,c):t},Ht.precision=Ht.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(Pt+t);return n.d?(e=v(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},Ht.round=function(){var t=this,e=t.constructor;return h(new e(t),t.e+1,e.rounding)},Ht.sine=Ht.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+zt,i.rounding=1,n=E(i,C(i,n)),i.precision=t,i.rounding=e,h(yt>2?n.neg():n,t,e,!0)):new i(NaN)},Ht.squareRoot=Ht.sqrt=function(){var t,e,n,i,o,r,a=this,c=a.d,u=a.e,l=a.s,d=a.constructor;if(1!==l||!c||!c[0])return new d(!l||l<0&&(!c||c[0])?NaN:c?a:1/0);for(St=!1,l=Math.sqrt(+a),0==l||l==1/0?(e=s(c),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Mt((u+1)/2)-(u<0||u%2),l==1/0?e="1e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),i=new d(e)):i=new d(l.toString()),n=(u=d.precision)+3;;)if(r=i,i=r.plus(Ft(a,r,n+2,1)).times(.5),s(r.d).slice(0,n)===(e=s(i.d)).slice(0,n)){if(e=e.slice(n-3,n+1),"9999"!=e&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(h(i,u+1,1),t=!i.times(i).eq(a));break}if(!o&&(h(r,u+1,0),r.times(r).eq(a))){i=r;break}n+=4,o=1}return St=!0,h(i,u,d.rounding,t)},Ht.tangent=Ht.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=Ft(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,h(2==yt||4==yt?n.neg():n,t,e,!0)):new i(NaN)},Ht.times=Ht.mul=function(t){var e,n,i,o,r,s,a,c,u,l=this,d=l.constructor,f=l.d,m=(t=new d(t)).d;if(t.s*=l.s,!(f&&f[0]&&m&&m[0]))return new d(!t.s||f&&!f[0]&&!m||m&&!m[0]&&!f?NaN:f&&m?0*t.s:t.s/0);for(n=Mt(l.e/zt)+Mt(t.e/zt),c=f.length,u=m.length,c<u&&(r=f,f=m,m=r,s=c,c=u,u=s),r=[],s=c+u,i=s;i--;)r.push(0);for(i=u;--i>=0;){for(e=0,o=c+i;o>i;)a=r[o]+m[i]*f[o-i-1]+e,r[o--]=a%Lt|0,e=a/Lt|0;r[o]=(r[o]+e)%Lt|0}for(;!r[--s];)r.pop();return e?++n:r.shift(),t.d=r,t.e=p(r,n),St?h(t,d.precision,d.rounding):t},Ht.toBinary=function(t,e){return I(this,2,t,e)},Ht.toDecimalPlaces=Ht.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(a(t,0,wt),void 0===e?e=i.rounding:a(e,0,8),h(n,t+n.e+1,e))},Ht.toExponential=function(t,e){var n,i=this,o=i.constructor;return void 0===t?n=d(i,!0):(a(t,0,wt),void 0===e?e=o.rounding:a(e,0,8),i=h(new o(i),t+1,e),n=d(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},Ht.toFixed=function(t,e){var n,i,o=this,r=o.constructor;return void 0===t?n=d(o):(a(t,0,wt),void 0===e?e=r.rounding:a(e,0,8),i=h(new r(o),t+o.e+1,e),n=d(i,!1,t+i.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n},Ht.toFraction=function(t){var e,n,i,o,r,a,c,u,l,h,d,p,f=this,m=f.d,g=f.constructor;if(!m)return new g(f);if(l=n=new g(1),i=u=new g(0),e=new g(i),r=e.e=v(m)-f.e-1,a=r%zt,e.d[0]=At(10,a<0?zt+a:a),null==t)t=r>0?e:l;else{if(c=new g(t),!c.isInt()||c.lt(l))throw Error(Pt+c);t=c.gt(e)?r>0?e:l:c}for(St=!1,c=new g(s(m)),h=g.precision,g.precision=r=m.length*zt*2;d=Ft(c,e,0,1,1),o=n.plus(d.times(i)),1!=o.cmp(t);)n=i,i=o,o=l,l=u.plus(d.times(o)),u=o,o=e,e=c.minus(d.times(o)),c=o;return o=Ft(t.minus(n),i,0,1,1),u=u.plus(o.times(l)),n=n.plus(o.times(i)),u.s=l.s=f.s,p=Ft(l,i,r,1).minus(f).abs().cmp(Ft(u,n,r,1).minus(f).abs())<1?[l,i]:[u,n],g.precision=h,St=!0,p},Ht.toHexadecimal=Ht.toHex=function(t,e){return I(this,16,t,e)},Ht.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:a(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(St=!1,n=Ft(n,t,0,e,1).times(t),St=!0,h(n)):(t.s=n.s,n=t),n},Ht.toNumber=function(){return+this},Ht.toOctal=function(t,e){return I(this,8,t,e)},Ht.toPower=Ht.pow=function(t){var e,n,i,o,r,a,u=this,l=u.constructor,d=+(t=new l(t));if(!(u.d&&t.d&&u.d[0]&&t.d[0]))return new l(At(+u,d));if(u=new l(u),u.eq(1))return u;if(i=l.precision,r=l.rounding,t.eq(1))return h(u,i,r);if(e=Mt(t.e/zt),e>=t.d.length-1&&(n=d<0?-d:d)<=Bt)return o=y(l,u,n,i),t.s<0?new l(1).div(o):h(o,i,r);if(a=u.s,a<0){if(e<t.d.length-1)return new l(NaN);if(0==(1&t.d[e])&&(a=1),0==u.e&&1==u.d[0]&&1==u.d.length)return u.s=a,u}return n=At(+u,d),e=0!=n&&isFinite(n)?new l(n+"").e:Mt(d*(Math.log("0."+s(u.d))/Math.LN10+u.e+1)),e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(St=!1,l.rounding=u.s=1,n=Math.min(12,(e+"").length),o=_(t.times(k(u,i+n)),i),o.d&&(o=h(o,i+5,1),c(o.d,i,r)&&(e=i+10,o=h(_(t.times(k(u,e+n)),e),e+5,1),+s(o.d).slice(i+1,i+15)+1==1e14&&(o=h(o,i+1,0)))),o.s=a,St=!0,l.rounding=r,h(o,i,r))},Ht.toPrecision=function(t,e){var n,i=this,o=i.constructor;return void 0===t?n=d(i,i.e<=o.toExpNeg||i.e>=o.toExpPos):(a(t,1,wt),void 0===e?e=o.rounding:a(e,0,8),i=h(new o(i),t,e),n=d(i,t<=i.e||i.e<=o.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},Ht.toSignificantDigits=Ht.toSD=function(t,e){var n=this,i=n.constructor;return void 0===t?(t=i.precision,e=i.rounding):(a(t,1,wt),void 0===e?e=i.rounding:a(e,0,8)),h(new i(n),t,e)},Ht.toString=function(){var t=this,e=t.constructor,n=d(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},Ht.truncated=Ht.trunc=function(){return h(new this.constructor(this),this.e+1,1)},Ht.valueOf=Ht.toJSON=function(){var t=this,e=t.constructor,n=d(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var Ft=function(){function t(t,e,n){var i,o=0,r=t.length;for(t=t.slice();r--;)i=t[r]*e+o,t[r]=i%n|0,o=i/n|0;return o&&t.unshift(o),t}function e(t,e,n,i){var o,r;if(n!=i)r=n>i?1:-1;else for(o=r=0;o<n;o++)if(t[o]!=e[o]){r=t[o]>e[o]?1:-1;break}return r}function n(t,e,n,i){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(i,o,r,s,a,c){var u,l,d,p,f,m,v,g,y,b,w,_,k,x,T,S,E,P,C,I,M=i.constructor,A=i.s==o.s?1:-1,D=i.d,N=o.d;if(!(D&&D[0]&&N&&N[0]))return new M(i.s&&o.s&&(D?!N||D[0]!=N[0]:N)?D&&0==D[0]||!N?0*A:A/0:NaN);for(c?(f=1,l=i.e-o.e):(c=Lt,f=zt,l=Mt(i.e/f)-Mt(o.e/f)),C=N.length,E=D.length,y=new M(A),b=y.d=[],d=0;N[d]==(D[d]||0);d++);if(N[d]>(D[d]||0)&&l--,null==r?(x=r=M.precision,s=M.rounding):x=a?r+(i.e-o.e)+1:r,x<0)b.push(1),m=!0;else{if(x=x/f+2|0,d=0,1==C){for(p=0,N=N[0],x++;(d<E||p)&&x--;d++)T=p*c+(D[d]||0),b[d]=T/N|0,p=T%N|0;m=p||d<E}else{for(p=c/(N[0]+1)|0,p>1&&(N=t(N,p,c),D=t(D,p,c),C=N.length,E=D.length),S=C,w=D.slice(0,C),_=w.length;_<C;)w[_++]=0;I=N.slice(),I.unshift(0),P=N[0],N[1]>=c/2&&++P;do p=0,u=e(N,w,C,_),u<0?(k=w[0],C!=_&&(k=k*c+(w[1]||0)),p=k/P|0,p>1?(p>=c&&(p=c-1),v=t(N,p,c),g=v.length,_=w.length,u=e(v,w,g,_),1==u&&(p--,n(v,C<g?I:N,g,c))):(0==p&&(u=p=1),v=N.slice()),g=v.length,g<_&&v.unshift(0),n(w,v,_,c),u==-1&&(_=w.length,u=e(N,w,C,_),u<1&&(p++,n(w,C<_?I:N,_,c))),_=w.length):0===u&&(p++,w=[0]),b[d++]=p,u&&w[0]?w[_++]=D[S]||0:(w=[D[S]],_=1);while((S++<E||void 0!==w[0])&&x--);m=void 0!==w[0]}b[0]||b.shift()}if(1==f)y.e=l,gt=m;else{for(d=1,p=b[0];p>=10;p/=10)d++;y.e=d+l*f-1,h(y,a?r+y.e+1:r,s,m)}return y}}();vt=$(Tt),vt.default=vt.Decimal=vt,kt=new vt(kt),xt=new vt(xt),i=function(){return vt}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)},function(t,e){var n={body:$(document.body),price:$("#J_price"),totalPrice:$("#J_totalPrice"),totalPricePackage:$("#J_totalPricePackage"),packageLists:$("#J_packageLists"),packageTab:$("#J_packageTab"),packageContent:$("#J_packageContent"),packageBody:$("#J_packageBody"),imgBooth:$("#J_imgBooth"),previewThumb:$("#J_previewThumb"),propertyPackage:$("#propertyPackage"),quantity:$("#J_quantity"),selectedProps:$("#J_selectedProps"),selectedQuantity:$("#J_selectedQuantity"),property:$("#property"),serverTime:$("#servertime"),message:$("#J_sanpUp"),btnBuyPropsEnter:$("#J_btnBuyPropsEnter"),summaryPrice:$("#J_summaryPrice"),summaryName:$("#J_summaryName"),discountTag:$("#J_discountTag"),originalPrice:$("#J_originalPrice"),discountCountDown:$("#J_discountCountDown"),summaryDiscountCountDown:$("#J_summaryDiscountCountDown"),installment:$("#J_prodInstallment"),btnAddCart:$("#J_btnAddCart"),btnAddCartProps:$("#J_btnAddCartProps"),btnCartAll:$("#J_btnAddCart").add("#J_btnAddCartProps"),btnBuy:$("#J_btnBuyNow"),btnBuyProp:$("#J_btnBuyPropsEnter"),btnBuyAll:$("#J_btnBuyNow").add("#J_btnBuyPropsEnter"),limit:$("#J_Stock"),huabeiBd:$("#J_huabeiBody"),propExclusive:$("#J_propExclusive"),textExclusive:$("#J_textExclusive")};t.exports=n},function(t,e,n){function i(t){if(t&&t.length)return t=t.sort(function(t,e){return t.id<e.id?-1:t.id>e.id?1:0})}/*!
     * view-extra.js
     * @date 2017.7.25
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=(n(37),n(45)),s={getSkuSaleStatus:"//detail.mall.meizu.com/api/sku/sale_status"};e.quantityMinus=function(t){t.preventDefault();var e=o(t.currentTarget),n=e.siblings("span"),i=n.data("value");e.hasClass("disabled")||(i=isNaN(parseInt(i,10))?1:parseInt(i,10)-1,i<=0&&(i=1),this.model.set("quantity",i))},e.quantityPlus=function(t){t.preventDefault();var e=o(t.currentTarget),n=e.siblings("span"),i=n.data("max"),r=n.data("value");e.hasClass("disabled")||(r=isNaN(parseInt(r,10))?1:parseInt(r,10)+1,i&&r>=i?r=i:r>500&&(r=500),this.model.set("quantity",r))},e.goSibling=function(t){t.preventDefault(),location.href=t.currentTarget.href},e.goBack=function(){var t=function(){var t=["ordercenter.mall.meizu.com"];return t.some(function(t){return document.referrer.match(t)})};try{!document.referrer||t()?location.href="//mall.meizu.com/":document.referrer&&history.back()}catch(t){location.href="//mall.meizu.com/"}},e.lineRecommendPvs=function(t,e){var n=this,r=n.model.get("propItem"),s=n.collection,a={done:!1,stockPvs:"",noStockPvs:""};return a.done=r.some(function(n,r){if(r>t){var c,u=o.extend({},e);if(delete u[n],c=s.where(u),c&&c.length)return c=i(c),c.some(function(t){var e=t.get("stock");return a.noStockPvs||(a.noStockPvs=t.id),e&&(a.done=!0,a.stockPvs=t.id),1===e})}return!1}),a},e.pointRecommendPvs=function(t,e){var n,o=this,r=o.model.get("propItem"),s=o.collection,a={done:!1,stockPvs:"",noStockPvs:""};return r.reduce(function(e,n){return n!=t&&delete e[n],e},e),n=s.where(e),n&&n.length&&(n=i(n),a.done=n.some(function(t){var e=t.get("stock");return a.noStockPvs||(a.noStockPvs=t.id),e&&(a.done=!0,a.stockPvs=t.id),1===e})),a},e.getSkuSaleStatus=function(t){var e=2===t.get("type"),n=t.get("skuId"),i=t.get("activePackage"),o=t.get("packageSkuIds"),a={skuId:n};return e&&(a.packageId=i?i:"",a.packageSkuIdList=o?o.join(","):""),r.ajax(s.getSkuSaleStatus,a,"get","json")}},function(t,e,n){var i=n(30),o=n(31),r={};i.extend(r,o.Events),t.exports=window._PageEvents=r},function(t,e,n){var i=n(29),o=n(59),r=n(45);n(61);var s=n(57),a=window.MZ.modelData,c={getToken:"//pyramid.mall.meizu.com/queue/token"},u={orderToken:0,state:{isStackEmpty:!1},startOrderModal:function(){var t=this,e='<div class="bi-dialog" id="J_dialogOrder"><div class="bi-dialog-inner"><div class="bi-dialog-hd"></div><div class="bi-dialog-bd tcenter"><img class="dialog-cont-pic" src="//mall.res.meizu.com/detail/img/lineup.gif"></div><p class="dialog-cont-text">鍙傚姞娲诲姩鐨勪汉鏁拌緝澶氾紝姝ｅ湪涓烘偍鎺掗槦锛岃绋嶅€欙紒<br/>鏃犻渶鍒锋柊椤甸潰锛屾帓闃熻嚜鍔ㄨ繘琛屼腑鈥︹€�</p><div class="bi-dialog-ft"></div></div><a class="bi-close" id="J_DialogClose" href="javascript:;"><i class="icon icon-close"></i></a></div>';t.state.isStackEmpty||(window.scrollTo(0,0),t.orderDialog=dialog({width:280,height:210,content:e,zIndex:1e5,onshow:function(){i("#J_DialogClose").on("click.dialog",function(){t.closeOrderModal()}),s.body.addClass("lock")},onclose:function(){i("#J_DialogClose").off("click.dialog"),t.closeOrderModal()},backdropOpacity:.4}).showModal())},closeOrderModal:function(){var t=this;t._modalTimer&&window.clearTimeout(t._modalTimer),t._tokenTimer&&window.clearInterval(t._tokenTimer),t._stockWhenOrderTimer&&window.clearInterval(t._stockWhenOrderTimer),t.orderDialog&&(t.orderDialog.remove(),t.orderDialog=!1,s.body.removeClass("lock"))},getToken:function t(){function t(){i.ajax({url:c.getToken,type:"get",data:{itemId:a.itemId},dataType:"jsonp"}).done(function(t){t.success?(e.orderToken=t.data,n.resolve(t.data,t),e.closeOrderModal()):e.executeTokenException(t.errorCode||t.code)})}var e=this,n=i.Deferred();e.orderToken&&n.resolve(e.orderToken);try{t(),e._modalTimer=setTimeout(function(){e.orderDialog||e.startOrderModal()},1e3),e._tokenTimer=setInterval(function(){e.orderDialog||e.startOrderModal(),t()},2e3)}catch(t){e.closeOrderModal()}return n.promise()},executeTokenException:function(t){var e=this;switch(t){case 401:e.closeOrderModal(),r.login();break;case 5002:e.closeOrderModal(),o.trigger("QUEUE_SALE_STATUS")}}};t.exports=window._Queue=u},function(t,e,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(29);!function(){function t(e){var o=n[e],r="exports";return"object"===("undefined"==typeof o?"undefined":i(o))?o:(o[r]||(o[r]={},o[r]=o.call(o[r],t,o[r],o)||o[r]),o[r])}function e(t,e){n[t]=e}var n={};e("jquery",function(){return o}),/*!
         * PopupJS
         * Date: 2014-11-09
         * https://github.com/aui/popupjs
         * (c) 2009-2014 TangBin, http://www.planeArt.cn
         *
         * This is licensed under the GNU LGPL, version 2.1 or later.
         * For details, see: http://www.gnu.org/licenses/lgpl-2.1.html
         */
e("popup",function(t){function e(){this.destroyed=!1,this.__popup=n("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=n("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],i++}var n=t("jquery"),i=0,o=!("minWidth"in n("html")[0].style),r=!o;return n.extend(e.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed)return this;var i=this.__popup,s=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=t||this.follow,!this.__ready){if(i.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),o||n(window).on("resize",n.proxy(this.reset,this)),this.modal){var a={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||e.zIndex};i.addClass(this.className+"-modal"),r||n.extend(a,{position:"absolute",width:n(window).width()+"px",height:n(document).height()+"px"}),s.css(a).attr({tabindex:"0"}).on("focus",n.proxy(this.focus,this)),this.__mask=s.clone(!0).attr("style","").insertAfter(i),s.addClass(this.className+"-backdrop").insertBefore(i),this.__ready=!0}i.html()||i.html(this.innerHTML)}return i.addClass(this.className+"-show").show(),s.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return!this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),e.current===this&&(e.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),o||n(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var t in this)delete this[t];return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var t=this.node,i=this.__popup,o=e.current,r=this.zIndex=e.zIndex++;if(o&&o!==this&&o.blur(!1),!n.contains(t,this.__getActive())){var s=i.find("[autofocus]")[0];!this._autofocus&&s?this._autofocus=!0:s=t,this.__focus(s)}return i.css("zIndex",r),e.current=this,i.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var n=this.__getEventListener(t),i=0;i<n.length;i++)e===n[i]&&n.splice(i--,1);return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var n=0;n<e.length;n++)e[n].call(this)},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(t){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,n=e&&e.activeElement||t;return n}catch(t){}},__center:function(){var t=this.__popup,e=n(window),i=(n(document),this.fixed,0),o=0,r=e.width(),s=e.height(),a=t.width(),c=t.height(),u=(r-a)/2+i,l=382*(s-c)/1e3+o,h=t[0].style;h.left=Math.max(parseInt(u),i)+"px",h.top=Math.max(parseInt(l),o)+"px"},__follow:function(t){var e=t.parentNode&&n(t),i=this.__popup;if(this.__followSkin&&i.removeClass(this.__followSkin),e){var o=e.offset();if(o.left*o.top<0)return this.__center()}var r=this,s=this.fixed,a=n(window),c=n(document),u=a.width(),l=a.height(),h=c.scrollLeft(),d=c.scrollTop(),p=i.width(),f=i.height(),m=e?e.outerWidth():0,v=e?e.outerHeight():0,g=this.__offset(t),y=g.left,b=g.top,w=s?y-h:y,_=s?b-d:b,k=s?0:h,x=s?0:d,T=k+u-p,S=x+l-f,E={},P=this.align.split(" "),C=this.className+"-",I={top:"bottom",bottom:"top",left:"right",right:"left"},M={top:"top",bottom:"top",left:"left",right:"left"},A=[{top:_-f,bottom:_+v,left:w-p,right:w+m},{top:_,bottom:_-f+v,left:w,right:w-p+m}],D={left:w+m/2-p/2,top:_+v/2-f/2},N={left:[k,T],top:[x,S]};n.each(P,function(t,e){A[t][e]>N[M[e]][1]&&(e=P[t]=I[e]),A[t][e]<N[M[e]][0]&&(P[t]=I[e])}),P[1]||(M[P[1]]="left"===M[P[0]]?"top":"left",A[1][P[1]]=D[M[P[1]]]),C+=P.join("-")+" "+this.className+"-follow",r.__followSkin=C,e&&i.addClass(C),E[M[P[0]]]=parseInt(A[0][P[0]]),E[M[P[1]]]=parseInt(A[1][P[1]]),i.css(E)},__offset:function(t){var e=t.parentNode,i=e?n(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var o=t.ownerDocument,r=o.defaultView||o.parentWindow;if(r==window)return i;var s=r.frameElement,a=n(o),c=a.scrollLeft(),u=a.scrollTop(),l=n(s).offset(),h=l.left,d=l.top;return{left:i.left+h-c,top:i.top+d-u}}}),e.zIndex=1024,e.current=null,e}),e("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}),/*!
         * artDialog
         * Date: 2014-11-09
         * https://github.com/aui/artDialog
         * (c) 2009-2014 TangBin, http://www.planeArt.cn
         *
         * This is licensed under the GNU LGPL, version 2.1 or later.
         * For details, see: http://www.gnu.org/licenses/lgpl-2.1.html
         */
e("dialog",function(t){var e=t("jquery"),n=t("popup"),o=t("dialog-config"),r=o.cssUri;if(r){var s=t[t.toUrl?"toUrl":"resolve"];s&&(r=s(r),r='<link rel="stylesheet" href="'+r+'" />',e("base")[0]?e("base").before(r):e("head").append(r))}var a=0,c=new Date-0,u=!("minWidth"in e("html")[0].style),l="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),h=!u&&!l,d=function t(n,i,o){var r=n=n||{};"string"!=typeof n&&1!==n.nodeType||(n={content:n,fixed:!l}),n=e.extend(!0,{},t.defaults,n),n.original=r;var s=n.id=n.id||c+a,u=t.get(s);return u?u.focus():(h||(n.fixed=!1),n.quickClose&&(n.modal=!0,n.backdropOpacity=0),e.isArray(n.button)||(n.button=[]),void 0!==o&&(n.cancel=o),n.cancel&&n.button.push({id:"cancel",value:n.cancelValue,callback:n.cancel,display:n.cancelDisplay}),void 0!==i&&(n.ok=i),n.ok&&n.button.push({id:"ok",value:n.okValue,callback:n.ok,autofocus:!0}),t.list[s]=new t.create(n))},p=function(){};p.prototype=n.prototype;var f=d.prototype=new p;return d.create=function(t){var i=this;e.extend(this,new n);var o=(t.original,e(this.node).html(t.innerHTML)),r=e(this.backdrop);return this.options=t,this._popup=o,e.each(t,function(t,e){"function"==typeof i[t]?i[t](e):i[t]=e}),t.zIndex&&(n.zIndex=t.zIndex),o.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(t){i._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&r.on("onmousedown"in document?"mousedown":"click",function(){return i._trigger("cancel"),!1}),this.addEventListener("show",function(){r.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var e=t.target,o=e.nodeName,r=/^input|textarea$/i,s=n.current===i,a=t.keyCode;!s||r.test(o)&&"button"!==e.type||27===a&&i._trigger("cancel")},e(document).on("keydown",this._esc),this.addEventListener("remove",function(){e(document).off("keydown",this._esc),delete d.list[this.id]}),a++,this},d.create.prototype=f,e.extend(f,{content:function(t){var n=this._$("content");return"object"===("undefined"==typeof t?"undefined":i(t))?(t=e(t),n.empty("").append(t.show()),this.addEventListener("beforeremove",function(){e("body").append(t.hide())})):n.html(t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var n=this,i="",o=0;return this.callbacks={},"string"==typeof t?(i=t,o++):e.each(t,function(t,r){var s=r.id=r.id||r.value,a="";n.callbacks[s]=r.callback,r.display===!1?a=' style="display:none"':o++,i+='<button type="button" i-id="'+s+'"'+a+(r.disabled?" disabled":"")+(r.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+r.value+"</button>",n._$("button").on("click","[i-id="+s+"]",function(t){var i=e(this);i.attr("disabled")||n._trigger(s),t.preventDefault()})}),this._$("button").html(i),this._$("footer")[o?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),d.oncreate=e.noop,d.getCurrent=function(){return n.current},d.get=function(t){return void 0===t?d.list:d.list[t]},d.list={},d.defaults=o,d}),window.dialog=t("dialog")}()},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<ul>\n    <li class="sku-item clearfix">\n        <figure class="package-item-pic">\n            <img src="'+(null==(__t=skuData.images[0]+"@240x240.jpg")?"":__t)+'" alt="'+(null==(__t=skuData.itemName)?"":__t)+'"/>\n        </figure>\n        <div class="package-item-info">\n            <div class="mod-tit">\n                <h3 class="vm-title ellipsis">'+(null==(__t=skuData.itemName)?"":__t)+"</h3>\n                <span>\n                    <small>楼</small>\n                    <em>"+(null==(__t=(skuData.mainPriceCent/100).toFixed(2))?"":__t)+'</em>\n                </span>\n            </div>\n            <div class="mod-prop">\n                <p>\n                    <a class="vm-text">\n                        <span>'+(null==(__t=skuData.attributes)?"":__t)+"</span>\n                    </a>\n                </p>\n                <em>    \n                    脳"+(null==(__t=quantity)?"":__t)+"\n                </em>\n            </div>\n        </div>\n    </li>\n    ";for(var i=0,length=items.length;i<length;i++){__p+='\n    <li class="package-item clearfix">\n        <figure class="package-item-pic">\n            <img src="'+(null==(__t=items[i].cells[items[i].recommend].images+"@240x240.jpg")?"":__t)+'"  alt="'+(null==(__t=items[i].cells[items[i].recommend].names)?"":__t)+'"/>\n        </figure>\n        <div class="package-item-info">\n            <div class="mod-tit">\n                <h3 class="vm-title ellipsis">'+(null==(__t=items[i].name)?"":__t)+"</h3>\n                <span>\n                    <small>楼</small>\n                    "+(null==(__t=(items[i].cells[items[i].recommend].priceCent/100).toFixed(2))?"":__t)+'\n                </span>\n            </div>\n            <div class="mod-prop">\n                    ';for(var p in items[i].saleAttrs){__p+="\n                    <p>\n                        ";for(var j=0,length2=items[i].saleAttrs[p].length;j<length2;j++)__p+='\n                                <a class="vm-img ',items[i].recommend===p+":"+items[i].saleAttrs[p][j].id&&(__p+="selected"),__p+='" href="javascript:;" data-sku="'+(null==(__t=items[i].cells[p+":"+items[i].saleAttrs[p][j].id].skuId)?"":__t)+'" data-sid="'+(null==(__t=items[i].id)?"":__t)+'" data-key="'+(null==(__t=p+":"+items[i].saleAttrs[p][j].id)?"":__t)+'" title="'+(null==(__t=items[i].saleAttrs[p][j].name)?"":__t)+'">\n                                    <span>'+(null==(__t=items[i].saleAttrs[p][j].name)?"":__t)+"</span>\n                               </a>\n                        ";__p+="\n                    </p>\n                    "}__p+="\n                <em>\n                    脳"+(null==(__t=quantity)?"":__t)+"\n                </em>\n            </div>\n        </div>\n    </li>\n    "}__p+="\n</ul>"}return __p}},function(t,e,n){/*!
     * cart.js
     * @date 2017.4.11
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var i=n(29),o=n(64),r=n(45),s={add:"//cart.mall.meizu.com/add"},a={btnAddCart:i("#J_btnAddCart"),btnAddCartProps:i("#J_btnAddCartProps"),btnBuyPropsEnter:i("#J_btnBuyPropsEnter"),btnCartAll:i("#J_btnAddCart").add("#J_btnAddCartProps")},c=function(t){var e=this;e.liveView=t,e.model=t.model,t.listenTo(e.model,"change:skuId",e.syncShow.bind(e)),e.syncShow(),e.bindEvent()};c.prototype.syncShow=function(){var t=this,e=t.model,n=e.get("isSupportCart"),i=e.get("stock"),o=e.get("activeStatus"),r=1===e.get("type")&&1===e.get("activeStatus");return r&&n?void(1===o&&i>0?a.btnCartAll.show():a.btnCartAll.hide()):void a.btnCartAll.hide()},c.prototype.bindEvent=function(){var t=this,e=t.liveView;a.btnAddCart.add(a.btnAddCartProps).on("tap",function(n){n.preventDefault();var i=t.model.toJSON(),o={skuId:i.skuId,quantity:i.quantity,packageId:i.activePackage,packageSkuIds:i.packageSkuIds?i.packageSkuIds.join(","):""};return e.propEnsure?(r.ajax(s.add,o).done(function(e,n){t.addCartSuccess(e,n)}).fail(function(e,n){t.addCartrror(e,n)}),n.preventDefault(),void n.stopPropagation()):void e.openProps("cart")})},c.prototype.addCartSuccess=function(t,e){var n="success",i="";e.data.reachHalf&&(n="confirm",i="鎻愮ず锛氭偍璐墿杞︿腑鐨勫晢鍝佸凡婊�50绉嶏紝褰撹喘鐗╄溅瓒呭嚭涓婇檺鏃讹紝鎮ㄦ渶鏃╁姞鍏ョ殑鍟嗗搧灏嗕細琚竻闄わ紝寤鸿鎮ㄥ厛鍘荤粨绠楀摝~"),new o({id:"alertCart",type:n,tips:i,message:"宸叉垚鍔熷姞鍏ヨ喘鐗╄溅"})},c.prototype.addCartrror=function(t,e){var n={type:"",message:"",tips:""};if(e)switch(e.code){case 1003:n.type="warning",n.message="璐墿杞﹀凡婊★紝璇峰厛缁撶畻鎴栨暣鐞�";break;case 1007:n.type="warning",n.message="鏉ユ櫄浜嗭紒宸茬粡娌¤揣浜唦";break;default:n.type="error",n.message=t}else n.type="error",n.message="鍔犲叆澶辫触";n.id="alertCart",new o(n),!e||1006!==e.code&&1007!==e.code||setTimeout(function(){location.reload()},2e3)},t.exports=window._Cart=c},function(t,e,n){var i=n(29),o=(n(65),n(66)),r={type:"success",message:"",tips:"",addLink:"",addLinkText:"",onshow:i.noop,delay:3e3,width:"auto",id:""},s=function(t){this.opts=i.extend({},r,t),"number"==typeof this.opts.width&&(this.opts.width=this.opts.width+"px"),"confirm"===t.type&&(this.opts.width="81%"),this.tmplCompiled=o,this.render(),this.show(),this.bindEvent()};s.prototype.render=function(t){var e=this,t=this.opts,n=this.tmplCompiled(t),o=i("body");e.$node=i('<div class="alert" style="display:none;"></div'),t.id&&(i("#"+t.id).length&&i("#"+t.id).remove(),e.$node.attr("id",t.id)),e.$node.css({position:"fixed",top:0,right:0,bottom:0,left:0}),e.$node.append(n).appendTo(o)},s.prototype.bindEvent=function(){var t=this;t.opts;t.$node.on("click",".bi-backdrop,.bi-alert-close",function(){t.remove()}),t.$node[0].addEventListener("touchmove",function(t){t.preventDefault()},!1)},s.prototype.show=function(){var t=this,e=t.opts;t.$node.show(),"confirm"!==e.type&&setTimeout(function(){t.$node.remove()},e.delay)},s.prototype.remove=function(){this.$node.remove()},t.exports=window._Alert=s},function(t,e,n){var i,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function n(t){function e(e,n,i,o,r,s){for(;r>=0&&r<s;r+=t){var a=o?o[r]:r;i=n(i,e[a],a,e)}return i}return function(n,i,o,r){i=T(i,r,4);var s=!A(n)&&x.keys(n),a=(s||n).length,c=t>0?0:a-1;return arguments.length<3&&(o=n[s?s[c]:c],c+=t),e(n,i,o,s,c,a)}}function s(t){return function(e,n,i){n=S(n,i);for(var o=M(e),r=t>0?0:o-1;r>=0&&r<o;r+=t)if(n(e[r],r,e))return r;return-1}}function a(t,e,n){return function(i,o,r){var s=0,a=M(i);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=e(m.call(i,s,a),x.isNaN),r>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(i[r]===o)return r;return-1}}function c(t,e){var n=L.length,i=t.constructor,o=x.isFunction(i)&&i.prototype||d,r="constructor";for(x.has(t,r)&&!x.contains(e,r)&&e.push(r);n--;)r=L[n],r in t&&t[r]!==o[r]&&!x.contains(e,r)&&e.push(r)}var u=this,l=u._,h=Array.prototype,d=Object.prototype,p=Function.prototype,f=h.push,m=h.slice,v=d.toString,g=d.hasOwnProperty,y=Array.isArray,b=Object.keys,w=p.bind,_=Object.create,k=function(){},x=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};"undefined"!=typeof t&&t.exports&&(e=t.exports=x),e._=x,x.VERSION="1.8.3";var T=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}},S=function(t,e,n){return null==t?x.identity:x.isFunction(t)?T(t,e,n):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return S(t,e,1/0)};var E=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=t(r),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=r[u])}return n}},P=function(t){if(!x.isObject(t))return{};if(_)return _(t);k.prototype=t;var e=new k;return k.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},I=Math.pow(2,53)-1,M=C("length"),A=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=I};x.each=x.forEach=function(t,e,n){e=T(e,n);var i,o;if(A(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var r=x.keys(t);for(i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t)}return t},x.map=x.collect=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=Array(o),s=0;s<o;s++){var a=i?i[s]:s;r[s]=e(t[a],a,t)}return r},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(t,e,n){var i;if(i=A(t)?x.findIndex(t,e,n):x.findKey(t,e,n),void 0!==i&&i!==-1)return t[i]},x.filter=x.select=function(t,e,n){var i=[];return e=S(e,n),x.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},x.reject=function(t,e,n){return x.filter(t,x.negate(S(e)),n)},x.every=x.all=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(!e(t[s],s,t))return!1}return!0},x.some=x.any=function(t,e,n){e=S(e,n);for(var i=!A(t)&&x.keys(t),o=(i||t).length,r=0;r<o;r++){var s=i?i[r]:r;if(e(t[s],s,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,n,i){return A(t)||(t=x.values(t)),("number"!=typeof n||i)&&(n=0),x.indexOf(t,e,n)>=0},x.invoke=function(t,e){var n=m.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){var o=i?e:t[e];return null==o?o:o.apply(t,n)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,n){var i,o,r=-(1/0),s=-(1/0);if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,c=t.length;a<c;a++)i=t[a],i>r&&(r=i)}else e=S(e,n),x.each(t,function(t,n,i){o=e(t,n,i),(o>s||o===-(1/0)&&r===-(1/0))&&(r=t,s=o)});return r},x.min=function(t,e,n){var i,o,r=1/0,s=1/0;if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,c=t.length;a<c;a++)i=t[a],i<r&&(r=i)}else e=S(e,n),x.each(t,function(t,n,i){o=e(t,n,i),(o<s||o===1/0&&r===1/0)&&(r=t,s=o)});return r},x.shuffle=function(t){for(var e,n=A(t)?t:x.values(t),i=n.length,o=Array(i),r=0;r<i;r++)e=x.random(0,r),e!==r&&(o[r]=o[e]),o[e]=n[r];return o},x.sample=function(t,e,n){return null==e||n?(A(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,n){return e=S(e,n),x.pluck(x.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,i){var o={};return n=S(n,i),x.each(e,function(i,r){var s=n(i,r,e);t(o,i,s)}),o}};x.groupBy=D(function(t,e,n){x.has(t,n)?t[n].push(e):t[n]=[e]}),x.indexBy=D(function(t,e,n){t[n]=e}),x.countBy=D(function(t,e,n){x.has(t,n)?t[n]++:t[n]=1}),x.toArray=function(t){return t?x.isArray(t)?m.call(t):A(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:A(t)?t.length:x.keys(t).length},x.partition=function(t,e,n){e=S(e,n);var i=[],o=[];return x.each(t,function(t,n,r){(e(t,n,r)?i:o).push(t)}),[i,o]},x.first=x.head=x.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,n){return m.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},x.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,n){return m.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var N=function t(e,n,i,o){for(var r=[],s=0,a=o||0,c=M(e);a<c;a++){var u=e[a];if(A(u)&&(x.isArray(u)||x.isArguments(u))){n||(u=t(u,n,i));var l=0,h=u.length;for(r.length+=h;l<h;)r[s++]=u[l++]}else i||(r[s++]=u)}return r};x.flatten=function(t,e){return N(t,e,!1)},x.without=function(t){return x.difference(t,m.call(arguments,1))},x.uniq=x.unique=function(t,e,n,i){x.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=S(n,i));for(var o=[],r=[],s=0,a=M(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e?(s&&r===u||o.push(c),r=u):n?x.contains(r,u)||(r.push(u),o.push(c)):x.contains(o,c)||o.push(c)}return o},x.union=function(){return x.uniq(N(arguments,!0,!0))},x.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=M(t);i<o;i++){var r=t[i];if(!x.contains(e,r)){for(var s=1;s<n&&x.contains(arguments[s],r);s++);s===n&&e.push(r)}}return e},x.difference=function(t){var e=N(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,M).length||0,n=Array(e),i=0;i<e;i++)n[i]=x.pluck(t,i);return n},x.object=function(t,e){for(var n={},i=0,o=M(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},x.findIndex=s(1),x.findLastIndex=s(-1),x.sortedIndex=function(t,e,n,i){n=S(n,i,1);for(var o=n(e),r=0,s=M(t);r<s;){var a=Math.floor((r+s)/2);n(t[a])<o?r=a+1:s=a}return r},x.indexOf=a(1,x.findIndex,x.sortedIndex),x.lastIndexOf=a(-1,x.findLastIndex),x.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;r<i;r++,t+=n)o[r]=t;return o};var O=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var r=P(t.prototype),s=t.apply(r,o);return x.isObject(s)?s:r};x.bind=function(t,e){if(w&&t.bind===w)return w.apply(t,m.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var n=m.call(arguments,2),i=function i(){return O(t,i,e,this,n.concat(m.call(arguments)))};return i},x.partial=function(t){var e=m.call(arguments,1),n=function n(){for(var i=0,o=e.length,r=Array(o),s=0;s<o;s++)r[s]=e[s]===x?arguments[i++]:e[s];for(;i<arguments.length;)r.push(arguments[i++]);return O(t,n,this,this,r)};return n},x.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=x.bind(t[n],t);return t},x.memoize=function(t,e){var n=function n(i){var o=n.cache,r=""+(e?e.apply(this,arguments):i);return x.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},x.delay=function(t,e){var n=m.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:x.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var u=x.now();a||n.leading!==!1||(a=u);var l=e-(u-a);return i=this,o=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),a=u,r=t.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(c,l)),r}},x.debounce=function(t,e,n){var i,o,r,s,a,c=function c(){var u=x.now()-s;u<e&&u>=0?i=setTimeout(c,e-u):(i=null,n||(a=t.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=x.now();var u=n&&!i;return i||(i=setTimeout(c,e)),u&&(a=t.apply(r,o),r=o=null),a}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},x.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},x.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},x.once=x.partial(x.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)x.has(t,n)&&e.push(n);return j&&c(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var n in t)e.push(n);return j&&c(t,e),e},x.values=function(t){for(var e=x.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},x.mapObject=function(t,e,n){e=S(e,n);for(var i,o=x.keys(t),r=o.length,s={},a=0;a<r;a++)i=o[a],s[i]=e(t[i],i,t);return s},x.pairs=function(t){for(var e=x.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},x.invert=function(t){for(var e={},n=x.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=E(x.allKeys),x.extendOwn=x.assign=E(x.keys),x.findKey=function(t,e,n){e=S(e,n);for(var i,o=x.keys(t),r=0,s=o.length;r<s;r++)if(i=o[r],e(t[i],i,t))return i},x.pick=function(t,e,n){var i,o,r={},s=t;if(null==s)return r;x.isFunction(e)?(o=x.allKeys(s),i=T(e,n)):(o=N(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var a=0,c=o.length;a<c;a++){var u=o[a],l=s[u];i(l,u,s)&&(r[u]=l)}return r},x.omit=function(t,e,n){if(x.isFunction(e))e=x.negate(e);else{var i=x.map(N(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(i,e)}}return x.pick(t,e,n)},x.defaults=E(x.allKeys,!0),x.create=function(t,e){var n=P(t);return e&&x.extendOwn(n,e),n},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var n=x.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),r=0;r<i;r++){var s=n[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var z=function t(e,n,i,o){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof x&&(e=e._wrapped),n instanceof x&&(n=n._wrapped);var s=v.call(e);if(s!==v.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var a="[object Array]"===s;if(!a){if("object"!=("undefined"==typeof e?"undefined":r(e))||"object"!=("undefined"==typeof n?"undefined":r(n)))return!1;var c=e.constructor,u=n.constructor;if(c!==u&&!(x.isFunction(c)&&c instanceof c&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}i=i||[],o=o||[];for(var l=i.length;l--;)if(i[l]===e)return o[l]===n;if(i.push(e),o.push(n),a){if(l=e.length,l!==n.length)return!1;for(;l--;)if(!t(e[l],n[l],i,o))return!1}else{var h,d=x.keys(e);if(l=d.length,x.keys(n).length!==l)return!1;for(;l--;)if(h=d[l],!x.has(n,h)||!t(e[h],n[h],i,o))return!1}return i.pop(),o.pop(),!0};x.isEqual=function(t,e){return z(t,e)},x.isEmpty=function(t){return null==t||(A(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length)},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=y||function(t){return"[object Array]"===v.call(t)},x.isObject=function(t){var e="undefined"==typeof t?"undefined":r(t);return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return v.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":r(Int8Array))&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===v.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&g.call(t,e)},x.noConflict=function(){return u._=l,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=C,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,n){var i=Array(Math.max(0,t));e=T(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=x.invert(B),R=function(t){var e=function(e){return t[e]},n="(?:"+x.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};x.escape=R(B),x.unescape=R(q),x.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),x.isFunction(i)?i.call(t):i};var H=0;x.uniqueId=function(t){var e=++H+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+X[t]};x.template=function(t,e,n){!e&&n&&(e=n),e=x.defaults({},e,x.templateSettings);var i=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(i,function(e,n,i,s,a){return r+=t.slice(o,a).replace(Y,$),o=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var a=function(t){return s.call(this,t,x)},c=e.variable||"obj";return a.source="function("+c+"){\n"+r+"}",a},x.chain=function(t){var e=x(t);return e._chain=!0,e};var J=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),J(this,n.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],J(this,n)}}),x.each(["concat","join","slice"],function(t){var e=h[t];x.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},i=[],o=function(){return x}.apply(e,i),!(void 0!==o&&(t.exports=o))}).call(this)},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="bi-alert '+(null==(__t=type)?"":__t)+'" style="width:'+(null==(__t=width)?"":__t)+'">\n    <div class="bi-alert-bd">\n        ',__p+="confirm"===type?'\n            <p class="mod-tips">\n                <span class="vm-message">'+(null==(__t=message)?"":__t)+'</span>\n                <span class="vm-tips">'+(null==(__t=tips)?"":__t)+'</span>\n            </p>\n            <p class="mod-link">\n                <a class="vm-know bi-alert-close" href="javascript:;">鐭ラ亾浜�</a>\n                <a class="vm-cart" href="//cart.mall.meizu.com">鍘昏喘鐗╄溅</a>\n            </p>\n        ':'\n            <p class="mod-message bi-alert-close">\n                <i class="iconfont icon-'+(null==(__t=type)?"":__t)+'"></i>\n                <span>'+(null==(__t=message)?"":__t)+"</span>\n            </p>\n        ",__p+="\n    </div>\n</div>\n","confirm"===type&&(__p+='\n<div class="bi-backdrop">\n</div>\n'),__p+="";return __p}},function(t,e,n){/*!
     * snapup-timing.js
     * @date 2017.7.20
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var i=n(29),o=(n(30),n(37),n(45)),r=n(58),s={serverTime:i("#servertime"),message:i("#J_sanpUp"),btnBuyAll:i("#J_btnBuyNow").add("#J_btnBuyPropsEnter")},a={getSaleStatus:"//detail.mall.meizu.com/api/item/sale_status",getService:"//detail.mall.meizu.com/api/timestamp"},c=function(t){this.liveView=t,this.model=t.model,this.init(),this.handlerSoonSale(this.model)};c.prototype.init=function(){var t=this;t.liveView.listenTo(t.liveView.model,"change:skuId",t.handlerSoonSale.bind(t))},c.prototype.handlerSoonSale=function(t){var e=this,n=t.get("type"),i=!t.previous("skuId");switch(s.message.html("").removeClass("count-down"),s.btnBuyAll.show(),n){case 1:e.handlerGeneral(i);break;case 2:e.handlerPanicBuying(i)}},c.prototype.getServerTime=function(){var t=i.Deferred();return i.ajax({url:a.getService,type:"get",dataType:"json",timeout:4e3,cache:!1}).done(function(e){e.success?t.resolve(e.data):t.reject(e)}).fail(function(){t.reject("缃戠粶寮傚父锛岃绋嶅悗鍐嶈瘯!")}),t.promise()},c.prototype.handlerGeneral=function(t){var e=this,n=e.model,i=n.get("activeStatus"),o=n.get("stock"),a=n.get("buyButton"),c=n.get("shipping")||0,u=n.get("total"),l=n.get("isPreSale");1===i&&o>0&&(l||1!==MZ.modelData.merchantId||1==MZ.modelData.merchantId&&u>=c)?s.btnBuyAll.text("绔嬪嵆璐拱").addClass("btn-danger").removeClass("disabled"):1===i&&o>0&&1==MZ.modelData.merchantId&&u<c?s.btnBuyAll.hide():1===i&&o<=0?s.btnBuyAll.text(a).addClass("disabled"):2===i?t?(s.btnBuyAll.text("鍗冲皢鍙戝敭").addClass("disabled"),e.waitingTimeToString()):r.getSkuSaleStatus(n).done(function(t){1===t.activeStatus&&(1!==MZ.modelData.merchantId||1==MZ.modelData.merchantId&&u>=c)?s.btnBuyAll.text("绔嬪嵆璐拱").removeClass("disabled"):1===t.activeStatus&&1==MZ.modelData.merchantId&&u<c?s.btnBuyAll.hide():2===t.activeStatus&&(s.btnBuyAll.text("鍗冲皢鍙戝敭").addClass("disabled"),e.waitingTimeToString(t.timestamp))}):3===i&&s.btnBuyAll.text("宸蹭笅鏋�").addClass("disabled")},c.prototype.handlerPanicBuying=function(t){var e=this,n=e.model,i=(e.liveView,n.get("activeStatus"));1===i?e.syncStateInPanicBuying():2===i?t?(s.btnBuyAll.text("鍗冲皢寮€濮嬫姠璐�").addClass("disabled"),e.waitingTimeToString()):e.syncStateInPanicBuying():3===i&&s.btnBuyAll.text("娲诲姩宸茬粨鏉�").addClass("disabled")},c.prototype.syncStateInPanicBuying=function(){var t=this,e=t.model;r.getSkuSaleStatus(e).done(function(e){if(1===e.activeStatus)switch(e.stockStatus){case 1:o.isLogin()?s.btnBuyAll.text("绔嬪嵆鎶㈣喘").removeClass("disabled"):s.btnBuyAll.text("璇峰厛鐧诲綍").removeClass("btn-danger disabled").addClass("notlogin");break;case 2:s.btnBuyAll.text("杩樻湁鏈轰細").addClass("disabled"),s.message.html("璇ュ晢鍝佹湁鐢ㄦ埛涓嬪崟鍚庢湭浠樻锛岃繕鏈夋満浼氭姠鍒�");break;case 3:s.btnBuyAll.text("宸插敭缃�").addClass("disabled")}else 2===e.activeStatus?(s.btnBuyAll.text("鍗冲皢寮€濮嬫姠璐�").addClass("disabled"),t.waitingTimeToString(e.timestamp)):3===e.activeStatus&&s.btnBuyAll.text("娲诲姩宸茬粨鏉�").addClass("disabled")})},c.prototype.waitingTimeToString=function(t){var e,n=this,i=n.model,r=t||Number(s.serverTime.val()),a=i.get("shelveTime"),c=2===i.get("type"),u=n.getWaitingTime(r),l=c?n.countDownDoPanicBuying:n.countDownDoBuying,h=!1,d=[];return e=Math.ceil((a-r)/1e3),n.timer&&clearInterval(n.timer),e>86400?d.push('&nbsp;<em id="J_panicBuyingCountDown">'+u+"</em> "):e>0?(d.push('璺濆紑鍞繕鍓� <em id="J_panicBuyingCountDown">'+u+"</em> "),c&&!o.isLogin()&&d.push("璇烽鍏堢櫥褰曡处鍙�"),n.timer=o.countDown(r,a,n.syncShelveTime.bind(n),l.bind(n))):e<=0&&(h=!0),s.message.html(d.join("锛�")).addClass("count-down"),h},c.prototype.syncShelveTime=function(t){var e=this.formatDate(t);i("#J_panicBuyingCountDown").text(e)},c.prototype.formatDate=function(t){var e=Math.floor(t%86400/3600),n=Math.floor(t%3600/60)<10?"0"+Math.floor(t%3600/60):Math.floor(t%3600/60),i=t%60<10?"0"+t%60:t%60;return e+"鏃�"+n+"鍒�"+i+"绉�"},c.prototype.getShowTime=function(t,e){var n,i=new Date;return i.setTime(t),n=i.getMonth()+1+"鏈�"+i.getDate()+"鏃� "+(i.getHours()>=10?i.getHours():"0"+i.getHours())+":"+(i.getMinutes()>=10?i.getMinutes():"0"+i.getMinutes()),"next"===e?n="涓嬫寮€鍞細"+n:n+=" 鍑嗘椂寮€鍞�",n},c.prototype.getWaitingTime=function(t,e){var n,i,o=this,r=o.model.get("shelveTime"),a=t||Number(s.serverTime.val());return e=e||0,n=Math.floor((r-a)/1e3)-e,i=!(n<0)&&(n<86400?o.formatDate(n):o.getShowTime(r))},c.prototype.countDownDoBuying=function(){var t=this,e=t.model;e.set("activeStatus",1),s.btnBuyAll.text("绔嬪嵆璐拱").removeClass("disabled"),s.message.empty().removeClass("count-down")},c.prototype.countDownDoPanicBuying=function(){var t=this,e=t.model;e.set("activeStatus",1),o.isLogin()?s.btnBuyAll.text("绔嬪嵆鎶㈣喘").removeClass("disabled"):s.btnBuyAll.text("璇峰厛鐧诲綍").removeClass("btn-danger disabled").addClass("notlogin"),s.message.empty().removeClass("count-down")},t.exports=window._Snapup=c},function(t,e,n){/*!
     * delivery.js
     * @date 2017.8.30
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var i=n(29),o=n(69),r=n(45),s={sudaCon:i("#prod-suda-info"),siteText:i("#J_siteText"),siteStatus:i("#J_siteStatus"),summaryDiscount:i("#J_summaryDiscount")},a={getDefaultSite:"//me.m.meizu.com/vip/address/default_new_address",queryChildren:"//area.meizu.com/area/child/batch_query",fastArrival:"//detail.mall.meizu.com/api/sku/check_fast_arrival",ipLocate:"//detail.mall.meizu.com/api/ip/locate_city"},c=function(t,e){this.liveView=t,this.model=t.model,this.supportFastArrival=e,this.props={origin:{province:"骞夸笢",provinceId:18482,city:"骞垮窞甯�",cityId:19033},userSite:{},activeSite:{}},this.init()};c.prototype.init=function(){var t=this,e=t.liveView,n=t.model.get("isPackage");new o("#J_sudaSelector",t.activeHandler.bind(t)),t.liveView.listenTo(t.liveView.model,"change:skuId",t.handlerDelivery.bind(t)),n&&e.listenTo(e.model,"change:packageSkuIds",t.queryFastArrival.bind(t)),t.getDefaultSite().done(function(e){t.props.userSite=e,t.renderShowText(t.props.userSite),t.handlerDelivery()})},c.prototype.getDefaultSite=function(){var t=this,e=i.Deferred();return r.isLogin()?t.ajax(a.getDefaultSite,null,"get","jsonp").done(function(t){e.resolve(t)}).fail(function(n){t.ipLocateCity().done(function(t){e.resolve({province:t.province,provinceId:t.provinceId,city:t.city,cityId:t.cityId})}).fail(function(){e.resolve(t.props.origin)})}):t.ipLocateCity().done(function(t){e.resolve({province:t.province,provinceId:t.provinceId,city:t.city,cityId:t.cityId})}),e.promise()},c.prototype.ipLocateCity=function(){var t=this,e=i.Deferred();return t.ajax(a.ipLocate,null,"get","jsonp",!0).done(function(t){e.resolve(t.location)}).fail(function(n){e.resolve(t.props.origin)}),e.promise()},c.prototype.handlerDelivery=function(t){var e,n=this,t=n.model,i=t.get("isPreSale"),o="";i?(e=t.get("delaySendDayNum")||15,o='<a class="vm-icon" href="javascript:;"><i class="iconfont icon-pre-sale"></i>棰勫敭鍟嗗搧</a><span class="vm-msg">浠樻鍚庨璁�'+e+"澶╁唴鍙戣揣</span>",s.siteStatus.html(o).show(),s.summaryDiscount.html(o)):(s.siteStatus.empty().hide(),s.summaryDiscount.empty(),n.supportFastArrival&&n.queryFastArrival())},c.prototype.renderShowText=function(t){var e=["province","city","area","town"],n=[];t?(i.each(e,function(e,i){return!!t[i]&&void n.push(t[i])}),s.siteText.html(n.join(" ")).removeClass("b-color9")):s.siteText.html("璇烽€夋嫨").addClass("b-color9")},c.prototype.renderShowSite=function(){var t=this,e=[],n=(t.props.activeSite,t.props.userSite,t.props.activeSite[0]&&t.props.activeSite[0].name||t.props.userSite.province),i=t.props.activeSite[1]&&t.props.activeSite[1].name||t.props.userSite.city,o=t.props.activeSite[2]&&t.props.activeSite[2].name||t.props.userSite.area,r=t.props.activeSite[3]&&t.props.activeSite[3].name||t.props.userSite.town;i&&e.push(i),o?e.push(o):e.unshift(n),r?e.push(r):e.push("銆愯閫夋嫨銆�"),s.show.text(e.join(" "))},c.prototype.activeHandler=function(t){var e=this,n=["province","city","area","town"],o={};4===t.length&&(e.props.activeSite=t,i.each(t,function(t,e){o[n[t]]=e.name,o[n[t]+"Id"]=e.id}),e.renderShowText(o),e.handlerDelivery())},c.prototype.queryFastArrival=function(){var t=this,e=t.model,n=t.props.activeSite[0]&&t.props.activeSite[0].id||t.props.userSite.provinceId,o=t.props.activeSite[1]&&t.props.activeSite[1].id||t.props.userSite.cityId,r=t.props.activeSite[2]&&t.props.activeSite[2].id||t.props.userSite.areaId,c=t.props.activeSite[3]&&t.props.activeSite[3].id||t.props.userSite.townId,u=e.get("isPreSale"),l=!e.get("isPackage")||""!==e.get("activePackage"),h=e.get("quantity"),d=e.get("skuId"),p=e.get("packageSkuIds"),f=[];2===e.get("type");!u&&t.supportFastArrival&&d&&l&&n&&o&&(f.push({id:livePropertyView.model.get("skuId"),num:h}),p&&i.each(p,function(t,e){f.push({id:e,num:h})}),t.ajax(a.fastArrival,{provinceId:n,cityId:o,areaId:r,townId:c,skus:JSON.stringify(f),type:1},"get","jsonp").done(function(t){var e="",n="",i=new Date(t.arrivalDate||0);1===t.fastArrivalStatus?(e+='<a class="vm-icon" href="//store.meizu.com/marrive/summary.html" target="_blank"><i class="iconfont icon-suda2"></i>褰撴棩杈�</a>',e+='<span class="vm-msg">'+t.payTime+" 鍓嶆敮浠橈紝棰勮浠婂ぉ閫佽揪</span>",s.siteStatus.add(s.summaryDiscount).html(e).show()):2===t.fastArrivalStatus?(n="鏄庡ぉ锛�"+(i.getMonth()+1)+"鏈�"+i.getDate()+"鏃ワ級",e+='<a class="vm-icon" href="//store.meizu.com/marrive/summary.html" target="_blank"><i class="iconfont icon-suda2"></i>娆℃棩杈�</a>',s.siteStatus.html(e+'<span class="vm-msg">'+t.payTime+" 鍓嶆敮浠橈紝棰勮"+n+"閫佽揪</span>").show(),s.summaryDiscount.html(e+'<span class="vm-msg">'+t.payTime+" 鍓嶆敮浠橈紝棰勮鏄庡ぉ閫佽揪</span>").show()):3===t.fastArrivalStatus?(n="鍚庡ぉ锛�"+(i.getMonth()+1)+"鏈�"+i.getDate()+"鏃ワ級",e='<span class="vm-msg">'+t.payTime+" 鍓嶄笅鍗曞苟鏀粯锛岄璁�"+n+"閫佽揪</span>",s.siteStatus.add(s.summaryDiscount).html(e).show()):0===t.fastArrivalStatus&&1===t.fastArrivalEnable?(e='<span class="vm-msg">'+t.payTime+" 鍓嶄粯娆撅紝褰撳ぉ鍙戣揣</span>",s.siteStatus.add(s.summaryDiscount).html(e).show()):0===t.fastArrivalStatus&&2===t.fastArrivalEnable?(e='<span class="vm-msg">浠樻鍚�24h鍐呭揩閫熷彂璐�</span>',s.siteStatus.add(s.summaryDiscount).html(e).show()):(s.siteStatus.empty().hide(),s.summaryDiscount.empty())}))},c.prototype.ajax=function(t,e,n,o,r){var s=i.Deferred(),a={url:t,type:n?n:"get",data:e?e:null,dataType:o?o:"json",timeout:4e3,cache:r||!1};return r&&(a.jsonpCallback="ipLocateCallback"),i.ajax(a).done(function(t){t.success||200===t.code&&t.data?s.resolve(t.data):s.reject(t.message)}).fail(function(){s.reject("璇锋眰澶辫触")}),s.promise()},t.exports=window._Site=c},function(t,e,n){var i,o=n(29),r=n(70),s=n(46),a=n(71),c=new s;!function(s){"use strict";function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e){var n="string"==typeof t?h.querySelector(t):t;n&&(this.targetElem=n,this.checked=[],e&&(this.callback=e),this.bindEvent())}var h=s.document,d=new r;u(l.prototype,{bindEvent:function(){var t=this,e=o(this.targetElem);e.on("click",function(){d.open({eventType:"click",title:"閰嶉€佽嚦",xclose:!0,content:'<div id="j-loca-checked" class="loca-checked">璇烽€夋嫨</div><div id="j-loca-list" class="loca-list"><ul></ul></div>',clazz:"loca-dialog",buttons:[],onOpen:function(){o(document.body).addClass("lock"),document.querySelector(".dialog-overlay").addEventListener("touchmove",function(t){t.preventDefault()},!1),document.querySelector(".dialog-body").addEventListener("touchmove",function(t){t.preventDefault()},!1);var e=o("#j-loca-list"),n=o("#j-loca-checked"),i=[];t.checked=[],t.getSubArea(0,e),n.on("click","span",function(r){var s=o(this).data("pid"),a=o(this).data("level");i.splice(a-1),t.getSubArea(s,e),i.length?n.html(i.join(" ")):n.html("璇烽€夋嫨")}),e.on("tap","li",function(r){var s=o(this),a=s.data("id"),c=s.data("pid"),u=s.data("level"),l=s.text(),h=s.data("zipcode");t.checked[u-1]={id:a,parentId:c,name:l,level:u,zipCode:h},i[u-1]='<span data-pid="'+c+'" data-level="'+u+'">'+l+"</span>",n.html(i.join(" ")),i.length<4?t.getSubArea(a,e):(t.callback(t.checked),d.close(),o(document.body).removeClass("lock"))})},onClose:function(){o(document.body).removeClass("lock")}})})},getSubArea:function(t,e){var n=this,i=o(this.targetElem);o.ajax({url:i.data("url")+t,dataType:"jsonp"}).done(function(t){t.success?n.renderSubArea(t.data,e):c.open("鑾峰彇鍦板潃澶辫触锛岀◢鍚庡啀璇曡瘯~")}).fail(function(){c.open("鏈嶅姟鍣ㄦ墦鐩逛簡锛岃绋嶅悗鍐嶈瘯~")})},renderSubArea:function(t,e){var n="";o.each(t,function(t,e){var i=e.parentId,o=e.zipCode,r=o?'data-zipcode="'+o+'"':"";n+='<li data-id="'+e.id+'" data-pid="'+i+'" data-level="'+e.level+'"'+r+">"+e.name+"</li>"}),e.find("ul").html(n),this.locaScroll&&this.locaScroll.destroy(),this.locaScroll=new a("#j-loca-list")},destroy:function(){this.locaScroll&&this.locaScroll.destroy()}}),s.SeleLocation=l,"undefined"!=typeof t&&t.exports?t.exports=l:(n(34).cmd||n(35))&&(i=function(t,e,n){return l}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}(window)},function(t,e,n){var i;!function(o,r){"use strict";function s(){this.isCreated=!1}var a=r(o.document.body),c=s.prototype;r.extend(c,{options:{eventType:"tap",touchmove:!1,content:"",buttons:[{text:"纭畾"},{text:"鍙栨秷",dismiss:!0}],backdrop:!0}}),r.extend(c,{_createDialog:function(){var t=this,e=this.config;t.dialog=r('<div class="dialog-popup"/>').addClass(e.clazz).html('<div class="dialog-body"></div>'),t.dialogBody=t.dialog.find(".dialog-body"),t.dialogHeader=r('<div class="dialog-header"/>').appendTo(t.dialogBody),t.dialogBackdrop=r('<div class="dialog-overlay"/>').prependTo(t.dialog),void 0!==e.xclose?t.dialogClose=r('<a data-dismiss="true" class="close"><i>&times;</i></a>').appendTo(t.dialogHeader):t.dialogHeader.find(".close").remove(),void 0!==e.title?t.dialogTitle=r('<h4 class="dialog-title">'+e.title+"</h4>").appendTo(t.dialogHeader):t.dialogTitle=r('<h4 class="dialog-title"/>'),t.dialogContent=r('<div class="dialog-content"/>').appendTo(t.dialogBody),t.dialogButtons=r('<div class="dialog-buttons"/>').appendTo(t.dialogBody)},_renderDialog:function(){var t=this,e=this.config,n=this.dialog,i=e.eventType;void 0!==e.clazz&&(n[0].className="dialog-popup "+e.clazz),void 0!==e.width&&r.isNumeric(e.width)&&this.dialogBody.css("width",e.width),void 0!==e.backdrop&&("static"===e.backdrop?this.dialogBackdrop.removeAttr("data-dismiss").off(i+".dismiss.dialog"):e.backdrop===!0?this.dialogBackdrop.attr("data-dismiss","true"):e.backdrop===!1&&this.dialogBackdrop.remove()),void 0!==e.title&&t.dialogTitle.html(e.title).prependTo(t.dialogHeader),t.dialogContent.html(e.content),e.buttons.length>0?(t.dialogButtons.html(""),r.each(e.buttons,function(e,n){var o=void 0!==n.clazz?"btn "+n.clazz:"btn",s=void 0===n.dismiss||n.dismiss,a={type:"button",text:n.text,class:o,"data-dismiss":s},c=r("<button/>",a);if(c.appendTo(t.dialogButtons),void 0!==n.click&&r.isFunction(n.click)){var u=n.click;c.on(i,u)}})):t.dialogButtons.html("")},_bindEvent:function(t){var e=this,n=this.config,i=n.eventType+".dismiss.dialog";this.dialog.on(i,'[data-dismiss="true"]',function(t){e.close()}),n.touchmove||this.dialog.on("touchmove",function(t){t.preventDefault()})},onClose:function(t){void 0!==t&&r.isFunction(t)&&(this.handlerOnClose=t)},onOpen:function(t){void 0!==t&&r.isFunction(t)&&(this.handlerOnOpen=t)},set:function(t){return this.config=r.extend({},this.config,t),this._renderDialog(),this.dialog.focus(),this},open:function(t){var e=this;return this.config=t=r.extend({},s.prototype.options,t),a.hasClass("dialog-open")||(this.isCreated||(this.isCreated=!0,this._createDialog(),this.dialog.appendTo(a),setTimeout(function(){e._bindEvent()},0)),this._renderDialog(),this.dialog.show(),this.dialog.addClass("open"),a.addClass("dialog-open"),void 0!==t.onOpen&&r.isFunction(t.onOpen)&&t.onOpen.apply(this,arguments),void 0!==e.handlerOnOpen&&e.handlerOnOpen.apply(this,arguments)),this},close:function(){var t=this;this.config;return t.dialog.removeClass("open"),setTimeout(function(){t.dialog.hide(),t.isOpen=!1,a.removeClass("dialog-open")},160),this}}),window.Dialog=s,"undefined"!=typeof t&&t.exports?t.exports=s:(n(34).cmd||n(35))&&(i=function(t,e,n){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}(window,Zepto)},function(t,e,n){var i;/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
!function(o,r,s){function a(t,e){this.wrapper="string"==typeof t?r.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in e)this.options[n]=e[n];this.translateZ=this.options.HWCompositing&&u.hasPerspective?" translateZ(0)":"",this.options.useTransition=u.hasTransition&&this.options.useTransition,this.options.useTransform=u.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?u.ease[this.options.bounceEasing]||u.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var c=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(t){o.setTimeout(t,1e3/60)},u=function(){function t(t){return i!==!1&&(""===i?t:i+t.charAt(0).toUpperCase()+t.substr(1))}var e={},n=r.createElement("div").style,i=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,o=e.length;i<o;i++)if(t=e[i]+"ransform",t in n)return e[i].substr(0,e[i].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(t,e){for(var n in e)t[n]=e[n]},e.addEvent=function(t,e,n,i){t.addEventListener(e,n,!!i)},e.removeEvent=function(t,e,n,i){t.removeEventListener(e,n,!!i)},e.prefixPointerEvent=function(t){return o.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},e.momentum=function(t,e,n,i,o,r){var a,c,u=t-e,l=s.abs(u)/n;return r=void 0===r?6e-4:r,a=t+l*l/(2*r)*(u<0?-1:1),c=l/r,a<i?(a=o?i-o/2.5*(l/8):i,u=s.abs(a-t),c=u/l):a>0&&(a=o?o/2.5*(l/8):0,u=s.abs(t)+a,c=u/l),{destination:s.round(a),duration:c}};var a=t("transform");return e.extend(e,{hasTransform:a!==!1,hasPerspective:t("perspective")in n,hasTouch:"ontouchstart"in o,hasPointer:o.PointerEvent||o.MSPointerEvent,hasTransition:t("transition")in n}),e.isBadAndroid=/Android /.test(o.navigator.appVersion)&&!/Chrome\/\d/.test(o.navigator.appVersion),e.extend(e.style={},{transform:a,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),e.hasClass=function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return n.test(t.className)},e.addClass=function(t,n){if(!e.hasClass(t,n)){var i=t.className.split(" ");i.push(n),t.className=i.join(" ")}},e.removeClass=function(t,n){if(e.hasClass(t,n)){var i=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(i," ")}},e.offset=function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return{left:e,top:n}},e.preventDefaultException=function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return s.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*s.pow(2,-10*t)*s.sin((t-e/4)*(2*s.PI)/e)+1}}}),e.tap=function(t,e){var n=r.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},e.click=function(t){var e,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(e=r.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,n.dispatchEvent(e))},e}();a.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==u.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||u.eventType[t.type]===this.initiated)){!this.options.preventDefault||u.isBadAndroid||u.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,n=t.touches?t.touches[0]:t;this.initiated=u.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=u.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(s.round(e.x),s.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&u.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,i,o,r=t.touches?t.touches[0]:t,a=r.pageX-this.pointX,c=r.pageY-this.pointY,l=u.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=a,this.distY+=c,i=s.abs(this.distX),o=s.abs(this.distY),!(l-this.endTime>300&&i<10&&o<10)){if(this.directionLocked||this.options.freeScroll||(i>o+this.options.directionLockThreshold?this.directionLocked="h":o>=i+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,c=this.hasVerticalScroll?c:0,e=this.x+a,n=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+a/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:n>0?0:this.maxScrollY),this.directionX=a>0?-1:a<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&u.eventType[t.type]===this.initiated){this.options.preventDefault&&!u.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,i=(t.changedTouches?t.changedTouches[0]:t,u.getTime()-this.startTime),o=s.round(this.x),r=s.round(this.y),a=s.abs(o-this.startX),c=s.abs(r-this.startY),l=0,h="";if(this.isInTransition=0,this.initiated=0,this.endTime=u.getTime(),!this.resetPosition(this.options.bounceTime))return this.scrollTo(o,r),this.moved?this._events.flick&&i<200&&a<100&&c<100?void this._execEvent("flick"):(this.options.momentum&&i<300&&(e=this.hasHorizontalScroll?u.momentum(this.x,this.startX,i,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},n=this.hasVerticalScroll?u.momentum(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},o=e.destination,r=n.destination,l=s.max(e.duration,n.duration),this.isInTransition=1),o!=this.x||r!=this.y?((o>0||o<this.maxScrollX||r>0||r<this.maxScrollY)&&(h=u.ease.quadratic),void this.scrollTo(o,r,l,h)):void this._execEvent("scrollEnd")):(this.options.tap&&u.tap(t,this.options.tap),this.options.click&&u.click(t),void this._execEvent("scrollCancel"))}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,n=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),(e!=this.x||n!=this.y)&&(this.scrollTo(e,n,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=u.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;e<n;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,n,i){t=this.x+t,e=this.y+e,n=n||0,this.scrollTo(t,e,n,i)},scrollTo:function(t,e,n,i){i=i||u.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(t,e)):this._animate(t,e,n,i.fn)},scrollToElement:function(t,e,n,i,o){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=u.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,n===!0&&(n=s.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),i===!0&&(i=s.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=n||0,r.top-=i||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?s.max(s.abs(this.x-r.left),s.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,o)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[u.style.transitionDuration]=t+"ms",!t&&u.isBadAndroid&&(this.scrollerStyle[u.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(t){this.scrollerStyle[u.style.transitionTimingFunction]=t},_translate:function(t,e){this.options.useTransform?this.scrollerStyle[u.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=s.round(t),e=s.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e},_initEvents:function(t){var e=t?u.removeEvent:u.addEvent,n=this.options.bindToWrapper?this.wrapper:o;e(o,"orientationchange",this),e(o,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(n,"mousemove",this),e(n,"mousecancel",this),e(n,"mouseup",this)),u.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,u.prefixPointerEvent("pointerdown"),this),e(n,u.prefixPointerEvent("pointermove"),this),e(n,u.prefixPointerEvent("pointercancel"),this),e(n,u.prefixPointerEvent("pointerup"),this)),u.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(n,"touchmove",this),e(n,"touchcancel",this),e(n,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,e,n=o.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[u.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),e=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),e=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:e}},_animate:function(t,e,n,i){function o(){var d,p,f,m=u.getTime();return m>=h?(r.isAnimating=!1,r._translate(t,e),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(m=(m-l)/n,f=i(m),d=(t-s)*f+s,p=(e-a)*f+a,r._translate(d,p),void(r.isAnimating&&c(o)))}var r=this,s=this.x,a=this.y,l=u.getTime(),h=l+n;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},a.utils=u,o.IScroll=a,"undefined"!=typeof t&&t.exports?t.exports=a:(n(34).cmd||n(35))&&(i=function(t,e,n){return a}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}(window,document,Math)},function(t,e,n){function i(t){var e=this;e.liveView=t,e.model=t.model,e.imgLoaded=[],t.listenTo(e.model,"change:images",e.updateImages.bind(e)),e.renderSliders(),t.preSaleIcon()}/*!
     * swipe-showcase.js
     * @date 2016.3.15
     * @author chenjinghui@meizu.com
     * @version 0.0.1
     */
var o=n(29),r=n(45),s=n(73),a={swipe:o("#prd-sliders"),booth:o("#J_summaryPicBooth")};i.prototype.updateImages=function(t,e){var n=this,i=r.imageUrlProcess(e[0],240);a.booth.attr({src:i,names:t.get("names")}),n.renderSliders(),n.preloadImages(e)},i.prototype.preloadImages=function(t){var e,n=this;t&&t.length&&(e=o.map(t,function(t){return r.imageUrlProcess(t,480)}),o.each(e,function(t,e){if(o.inArray(e,n.imgLoaded)===-1){var i=new Image;i.src=e,i.complete?n.imgLoaded.push(e):i.onload=i.onerror=function(){n.imgLoaded.push(i),i.onload=i.onerror=null}}}))},i.prototype.renderSummaryPic=function(t){o("#J_summaryPicBooth").attr("src",r.imageUrlProcess(t,240))},i.prototype.renderSliders=function(){var t=this,e=t.model,n=e.get("images"),i="";if(n&&n.length){t.renderSummaryPic(n[0]),o.each(n,function(t,e){""!==e&&(e=r.imageUrlProcess(e,480),i+='<div class="item"><img src="'+e+'" /></div>')}),a.swipe.find(".swipe-wrap").html(i),window.prodSwipe&&prodSwipe.kill(),window.prodSwipe=new s(a.swipe[0],{continuous:!1,callback:function(t,e){var n=a.swipe.find(".poin span"),i=prodSwipe.getNumSlides();n.removeClass("active"),n.eq(t%i).addClass("active")}});var c=prodSwipe.getNumSlides();if(c>=2){for(var u="",l=0;l<c;l++)u+=0===l?'<span class="active" data-index="'+l+'"></span>':'<span data-index="'+l+'"></span>';a.swipe.find(".poin").html(u)}else a.swipe.find(".poin").html("")}},t.exports=window._SwipeShowcase=i},function(t,e,n){function i(t,e){"use strict";function n(){m=b.children,y=m.length,m.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&m.length<3&&(b.appendChild(m[0].cloneNode(!0)),b.appendChild(b.children[1].cloneNode(!0)),m=b.children),v=new Array(m.length),g=t.getBoundingClientRect().width||t.offsetWidth,b.style.width=m.length*g+"px";for(var n=m.length;n--;){var i=m[n];i.style.width=g+"px",i.setAttribute("data-index",n),f.transitions&&(i.style.left=n*-g+"px",a(n,w>n?-g:w<n?g:0,0))}e.continuous&&f.transitions&&(a(r(w-1),-g,0),a(r(w+1),g,0)),f.transitions||(b.style.left=w*-g+"px"),t.style.visibility="visible"}function i(){e.continuous?s(w-1):w&&s(w-1)}function o(){e.continuous?s(w+1):w<m.length-1&&s(w+1)}function r(t){return(m.length+t%m.length)%m.length}function s(t,n){if(w!=t){if(f.transitions){var i=Math.abs(w-t)/(w-t);if(e.continuous){var o=i;i=-v[r(t)]/g,i!==o&&(t=-i*m.length+t)}for(var s=Math.abs(w-t)-1;s--;)a(r((t>w?t:w)-s-1),g*i,0);t=r(t),a(w,g*i,n||_),a(t,0,n||_),e.continuous&&a(r(t-i),-(g*i),0)}else t=r(t),u(w*-g,t*-g,n||_);w=t,p(e.callback&&e.callback(w,m[w]))}}function a(t,e,n){c(t,e,n),v[t]=e}function c(t,e,n){var i=m[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform="translate("+e+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+e+"px)")}function u(t,n,i){if(!i)return void(b.style.left=n+"px");var o=+new Date,r=setInterval(function(){var s=+new Date-o;return s>i?(b.style.left=n+"px",T&&l(),e.transitionEnd&&e.transitionEnd.call(event,w,m[w]),void clearInterval(r)):void(b.style.left=(n-t)*(Math.floor(s/i*100)/100)+t+"px")},4)}function l(){k=setTimeout(o,T)}function h(){T=e.auto>0?e.auto:0,clearTimeout(k)}var d=function(){},p=function(t){setTimeout(t||d,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,v,g,y,b=t.children[0];e=e||{};var w=parseInt(e.startSlide,10)||0,_=e.speed||300;e.continuous=void 0===e.continuous||e.continuous;var k,x,T=e.auto||0,S={},E={},P={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":p(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(t));break;case"resize":p(n)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];S={x:e.pageX,y:e.pageY,time:+new Date},x=void 0,E={},b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];E={x:n.pageX-S.x,y:n.pageY-S.y},"undefined"==typeof x&&(x=!!(x||Math.abs(E.x)<Math.abs(E.y))),x||(t.preventDefault(),h(),e.continuous?(c(r(w-1),E.x+v[r(w-1)],0),c(w,E.x+v[w],0),c(r(w+1),E.x+v[r(w+1)],0)):(E.x=E.x/(!w&&E.x>0||w==m.length-1&&E.x<0?Math.abs(E.x)/g+1:1),c(w-1,E.x+v[w-1],0),c(w,E.x+v[w],0),c(w+1,E.x+v[w+1],0)))}},end:function(t){var n=+new Date-S.time,i=Number(n)<250&&Math.abs(E.x)>20||Math.abs(E.x)>g/2,o=!w&&E.x>0||w==m.length-1&&E.x<0;e.continuous&&(o=!1);var s=E.x<0;x||(i&&!o?(s?(e.continuous?(a(r(w-1),-g,0),a(r(w+2),g,0)):a(w-1,-g,0),a(w,v[w]-g,_),a(r(w+1),v[r(w+1)]-g,_),w=r(w+1)):(e.continuous?(a(r(w+1),g,0),a(r(w-2),-g,0)):a(w+1,g,0),a(w,v[w]+g,_),a(r(w-1),v[r(w-1)]+g,_),w=r(w-1)),e.callback&&e.callback(w,m[w])):e.continuous?(a(r(w-1),-g,_),a(w,0,_),a(r(w+1),g,_)):(a(w-1,-g,_),a(w,0,_),a(w+1,g,_))),b.removeEventListener("touchmove",P,!1),b.removeEventListener("touchend",P,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==w&&(T&&l(),e.transitionEnd&&e.transitionEnd.call(t,w,m[w]))}};return n(),T&&l(),f.addEventListener?(f.touch&&b.addEventListener("touchstart",P,!1),f.transitions&&(b.addEventListener("webkitTransitionEnd",P,!1),b.addEventListener("msTransitionEnd",P,!1),b.addEventListener("oTransitionEnd",P,!1),b.addEventListener("otransitionend",P,!1),b.addEventListener("transitionend",P,!1)),window.addEventListener("resize",P,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){h(),s(t,e)},prev:function(){h(),i()},next:function(){h(),o()},stop:function(){h()},getPos:function(){return w},getNumSlides:function(){return y},kill:function(){h(),b.style.width="",b.style.left="";for(var t=m.length;t--;){var e=m[t];e.style.width="",e.style.left="",f.transitions&&c(t,0,0)}f.addEventListener?(b.removeEventListener("touchstart",P,!1),b.removeEventListener("webkitTransitionEnd",P,!1),b.removeEventListener("msTransitionEnd",P,!1),b.removeEventListener("oTransitionEnd",P,!1),b.removeEventListener("otransitionend",P,!1),b.removeEventListener("transitionend",P,!1),window.removeEventListener("resize",P,!1)):window.onresize=null}}}}var o;(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(e){return this.each(function(){t(this).data("Swipe",new i(t(this)[0],e))})}}(window.jQuery||window.Zepto),"undefined"!=typeof t&&t.exports?t.exports=i:(n(34).cmd||n(35))&&(o=function(t,e,n){return i}.call(e,n,e,t),!(void 0!==o&&(t.exports=o)))},function(t,e,n){function i(t,e){c.init(t,e)}var o=n(29),r=n(45),s={recommendContent:o("#detailRecommendInline"),detailCommend:o("#detailRecommend")},a=n(75),c={remoteUrl:{detailRec:"//detail.mall.meizu.com/api/item/recommendsH5"},init:function(t,e){var n=this;t&&n.getRecommend(e)},getRecommend:function(t){var e=this;r.ajax(e.remoteUrl.detailRec,{itemId:t},"get","jsonp").done(function(t){t&&t.length&&(s.detailCommend.css("display","block"),e.renderCoupon(t))})},renderCoupon:function(t){if(t){t.forEach(function(t,e){t.mtype="mall_xgtj_kw_"+(e+1)});var e=a({items:t});s.recommendContent.append(e)}}};t.exports=i},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="recommend">\n    <div class="title">鐩稿叧鎺ㄨ崘</div>\n    <div class="recommend-slider" id="J_recommendSlider">\n        <ul class="slider-wrap">\n            ';for(var i=0,length=items.length;i<length;i++)__p+='\n            <li class="rs-item">\n                <a class="rs-item-wrap" title="'+(null==(__t=items[i].name)?"":__t)+'" href="'+(null==(__t=items[i].itemUrl)?"":__t)+'" target="_blank" data-mtype="'+(null==(__t=items[i].mtype)?"":__t)+'">\n                    <div class="mod-pic">\n                        <img class="recommend-pic" src="'+(null==(__t=items[i].imgUrl+"@240x240.jpg")?"":__t)+'"/>\n                    </div>\n            \n                    <div class="mod-desc">\n                        <p class="vm-name">'+(null==(__t=items[i].name)?"":__t)+'</p>\n                        <p class="vm-price">\n                            <small>楼</small>\n                            ',items[i].discountFlag?(__p+='\n                                <span class="vm-price-text">'+(null==(__t=items[i].discountPrice)?"":__t)+"</span>\n                                ",items[i].discountPrice!==items[i].maxPrice&&(__p+='\n                                  <span class="vm-price-qi">璧�</span>\n                                '),__p+="\n                            "):(__p+='\n                                <span class="vm-price-text">'+(null==(__t=items[i].minPrice)?"":__t)+"</span>\n                                ",items[i].minPrice!==items[i].maxPrice&&(__p+='\n                                    <span class="vm-price-qi">璧�</span>\n                                '),__p+="\n                            "),__p+="\n                        </p>\n                    </div>\n                </a>\n            </li>\n            ";__p+="\n        </ul>\n    </div>\n</div>\n  "}return __p}}]);